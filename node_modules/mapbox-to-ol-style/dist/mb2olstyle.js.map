{"version":3,"sources":["webpack://mb2olstyle/webpack/bootstrap","webpack://mb2olstyle/./index.js","webpack://mb2olstyle/./node_modules/@mapbox/mapbox-gl-style-spec/deref.js","webpack://mb2olstyle/./node_modules/@mapbox/mapbox-gl-style-spec/feature_filter/index.js","webpack://mb2olstyle/./node_modules/@mapbox/mapbox-gl-style-spec/function/color_spaces.js","webpack://mb2olstyle/./node_modules/@mapbox/mapbox-gl-style-spec/function/index.js","webpack://mb2olstyle/./node_modules/@mapbox/mapbox-gl-style-spec/util/extend.js","webpack://mb2olstyle/./node_modules/@mapbox/mapbox-gl-style-spec/util/get_type.js","webpack://mb2olstyle/./node_modules/@mapbox/mapbox-gl-style-spec/util/interpolate.js","webpack://mb2olstyle/./node_modules/@mapbox/mapbox-gl-style-spec/util/parse_color.js","webpack://mb2olstyle/./node_modules/@mapbox/mapbox-gl-style-spec/util/ref_properties.js","webpack://mb2olstyle/./node_modules/csscolorparser/csscolorparser.js","webpack://mb2olstyle/./node_modules/mapbox-to-css-font/index.js","webpack://mb2olstyle/./node_modules/ol/AssertionError.js","webpack://mb2olstyle/./node_modules/ol/Disposable.js","webpack://mb2olstyle/./node_modules/ol/ImageState.js","webpack://mb2olstyle/./node_modules/ol/Object.js","webpack://mb2olstyle/./node_modules/ol/ObjectEventType.js","webpack://mb2olstyle/./node_modules/ol/Observable.js","webpack://mb2olstyle/./node_modules/ol/asserts.js","webpack://mb2olstyle/./node_modules/ol/color.js","webpack://mb2olstyle/./node_modules/ol/colorlike.js","webpack://mb2olstyle/./node_modules/ol/css.js","webpack://mb2olstyle/./node_modules/ol/dom.js","webpack://mb2olstyle/./node_modules/ol/events.js","webpack://mb2olstyle/./node_modules/ol/events/Event.js","webpack://mb2olstyle/./node_modules/ol/events/EventTarget.js","webpack://mb2olstyle/./node_modules/ol/events/EventType.js","webpack://mb2olstyle/./node_modules/ol/extent.js","webpack://mb2olstyle/./node_modules/ol/extent/Corner.js","webpack://mb2olstyle/./node_modules/ol/extent/Relationship.js","webpack://mb2olstyle/./node_modules/ol/functions.js","webpack://mb2olstyle/./node_modules/ol/geom/Geometry.js","webpack://mb2olstyle/./node_modules/ol/geom/GeometryLayout.js","webpack://mb2olstyle/./node_modules/ol/geom/GeometryType.js","webpack://mb2olstyle/./node_modules/ol/geom/SimpleGeometry.js","webpack://mb2olstyle/./node_modules/ol/geom/flat/deflate.js","webpack://mb2olstyle/./node_modules/ol/geom/flat/transform.js","webpack://mb2olstyle/./node_modules/ol/geom/point.js","webpack://mb2olstyle/./node_modules/ol/has.js","webpack://mb2olstyle/./node_modules/ol/index.js","webpack://mb2olstyle/./node_modules/ol/math.js","webpack://mb2olstyle/./node_modules/ol/obj.js","webpack://mb2olstyle/./node_modules/ol/proj.js","webpack://mb2olstyle/./node_modules/ol/proj/Projection.js","webpack://mb2olstyle/./node_modules/ol/proj/Units.js","webpack://mb2olstyle/./node_modules/ol/proj/epsg3857.js","webpack://mb2olstyle/./node_modules/ol/proj/epsg4326.js","webpack://mb2olstyle/./node_modules/ol/proj/projections.js","webpack://mb2olstyle/./node_modules/ol/proj/transforms.js","webpack://mb2olstyle/./node_modules/ol/render/canvas.js","webpack://mb2olstyle/./node_modules/ol/sphere.js","webpack://mb2olstyle/./node_modules/ol/structs/LRUCache.js","webpack://mb2olstyle/./node_modules/ol/style.js","webpack://mb2olstyle/./node_modules/ol/style/Circle.js","webpack://mb2olstyle/./node_modules/ol/style/Fill.js","webpack://mb2olstyle/./node_modules/ol/style/IconAnchorUnits.js","webpack://mb2olstyle/./node_modules/ol/style/IconImage.js","webpack://mb2olstyle/./node_modules/ol/style/IconImageCache.js","webpack://mb2olstyle/./node_modules/ol/style/IconOrigin.js","webpack://mb2olstyle/./node_modules/ol/style/Image.js","webpack://mb2olstyle/./node_modules/ol/style/RegularShape.js","webpack://mb2olstyle/./node_modules/ol/style/Stroke.js","webpack://mb2olstyle/./node_modules/ol/style/TextPlacement.js","webpack://mb2olstyle/./node_modules/ol/style/circle.js","webpack://mb2olstyle/./node_modules/ol/style/fill.js","webpack://mb2olstyle/./node_modules/ol/style/icon.js","webpack://mb2olstyle/./node_modules/ol/style/stroke.js","webpack://mb2olstyle/./node_modules/ol/style/style.js","webpack://mb2olstyle/./node_modules/ol/style/text.js","webpack://mb2olstyle/./node_modules/ol/transform.js"],"names":["olLayer","glStyle","source","resolutions","spriteData","spriteImageUrl","fonts","res","length","push","JSON","parse","version","Error","spriteImage","spriteImgSize","img","Image","crossOrigin","onload","width","height","changed","src","ctx","document","createElement","getContext","measureCache","wrapText","text","font","em","key","wrappedText","oneEm","measureText","words","split","line","lines","i","ii","word","join","allLayers","layers","layersBySourceLayer","mapboxLayers","mapboxSource","layer","indexOf","id","sourceLayer","index","textHalo","textColor","iconImageCache","styles","styleFunction","feature","resolution","properties","getProperties","zoom","getZoomForResolution","type","types","getGeometry","getType","f","stylesLength","layerData","layerId","layout","emptyObj","paint","visibility","minzoom","maxzoom","filter","evaluateFilter","color","opacity","fill","stroke","strokeColor","style","getValue","colorWithOpacity","getFill","getStroke","getText","setColor","setZIndex","setLineCap","defaults","setLineJoin","setMiterLimit","setWidth","setLineDash","undefined","map","x","hasImage","icon","iconImg","skipLabel","iconImage","fromTemplate","styleGeom","geom","getFlatMidpoint","extent","getExtent","size","Math","sqrt","max","pow","getImage","setGeometry","iconSize","iconColor","icon_cache_key","spriteImageData","canvas","drawImage","y","data","getImageData","c","cc","putImageData","imgSize","scale","pixelRatio","offset","setRotation","deg2rad","setOpacity","setImage","setText","circleRadius","circleStrokeColor","circleColor","circleOpacity","circleStrokeWidth","cache_key","radius","label","textField","textSize","chooseFont","textTransform","toUpperCase","toLowerCase","wrappedLabel","setFont","textAnchor","placement","setPlacement","textAlign","setTextAlign","textBaseline","setTextBaseline","textOffset","setOffsetX","setOffsetY","setFill","haloColor","setStroke","setStyle","set","functionTypes","functionCache","layoutOrPaint","property","functions","value","function","stops","fontMap","availableFonts","filterCache","candidate","zoomFactor","log","colorCache","colorData","degrees","PI","templateRegEx","parts","match","refProperties","require","deref","parent","result","k","forEach","module","exports","derefLayers","slice","Object","create","ref","createFilter","Function","compile","op","str","compileComparisonOp","compileLogicalOp","compileNegation","compileInOp","compileHasOp","compilePropertyReference","stringify","checkType","left","right","expressions","values","sort","compare","expression","a","b","Xn","Yn","Zn","t0","t1","t2","t3","rad2deg","xyz2lab","t","lab2xyz","xyz2rgb","rgb2xyz","rgbToLab","rgbColor","l","z","labToRgb","labColor","isNaN","rgbToHcl","h","atan2","hclToRgb","hclColor","cos","sin","lab","forward","reverse","hcl","colorSpaces","parseColor","extend","interpolate","identityFunction","createFunction","parameters","propertySpec","isColor","fun","isFunctionDefinition","isFeatureConstant","isZoomConstant","zoomAndFeatureDependent","featureDependent","zoomDependent","stop","default","innerFun","hashedStops","categoricalKeyType","evaluateExponentialFunction","evaluateIntervalFunction","evaluateCategoricalFunction","evaluateIdentityFunction","outputFunction","colorSpace","colorspace","s","featureFunctions","zoomStops","featureFunctionStops","base","coalesce","input","keyType","evaluated","n","findStopLessThanOrEqualTo","interpolationFactor","outputLower","outputUpper","interp","args","evaluatedLower","apply","evaluatedUpper","lowerIndex","upperIndex","currentIndex","currentValue","upperValue","floor","lowerValue","difference","progress","output","inputs","val","Number","String","Boolean","Array","isArray","number","vec2","from","to","array","d","parseColorString","parseCSSColor","rgba","kCSSColorTable","clamp_css_byte","round","clamp_css_float","parse_css_int","parseFloat","parseInt","parse_css_float","css_hue_to_rgb","m1","m2","css_str","replace","iv","substr","ep","fname","params","alpha","pop","e","fontWeights","thin","hairline","light","book","regular","normal","plain","roman","standard","medium","bold","heavy","black","fat","poster","sp","fontCache","cssData","maybeWeight","weight","w","fontFamily","AssertionError","code","path","message","name","Disposable","prototype","disposed_","dispose","disposeInternal","IDLE","LOADING","LOADED","ERROR","getChangeEventType","BaseObjectEvent","oldValue","call","BaseObject","opt_values","values_","setProperties","changeEventTypeCache","hasOwnProperty","get","getKeys","keys","notify","eventType","dispatchEvent","PROPERTYCHANGE","opt_silent","unset","unByKey","Observable","revision_","CHANGE","getRevision","on","listener","len","once","un","assert","assertion","errorCode","asString","asArray","normalize","toString","HEX_COLOR_RE_","NAMED_COLOR_RE_","fromNamed","el","body","appendChild","rgb","getComputedStyle","removeChild","fromString","MAX_CACHE_SIZE","cache","cacheSize","fromStringInternal_","r","g","exec","hasAlpha","asColorLike","isColorLike","CanvasPattern","CanvasGradient","CLASS_HIDDEN","CLASS_SELECTABLE","CLASS_UNSELECTABLE","CLASS_UNSUPPORTED","CLASS_CONTROL","CLASS_COLLAPSED","getFontFamilies","family","createCanvasContext2D","outerWidth","outerHeight","replaceNode","removeNode","removeChildren","opt_width","opt_height","element","offsetWidth","marginLeft","marginRight","offsetHeight","marginTop","marginBottom","newNode","oldNode","parentNode","replaceChild","node","lastChild","bindListener","findListener","getListeners","listen","listenOnce","unlisten","unlistenByKey","unlistenAll","listenerObj","boundListener","evt","bindTo","target","callOnce","listeners","opt_this","opt_setDeleteIndex","deleteIndex","listenerMap","ol_lm","getListenerMap","removeListeners","removeEventListener","opt_once","addEventListener","splice","stopPropagation","preventDefault","Event","propagationStopped","EventTarget","pendingRemovals_","dispatching_","listeners_","event","propagate","pendingRemovals","hasListener","opt_type","CLEAR","CONTEXTMENU","CLICK","DBLCLICK","DRAGENTER","DRAGOVER","DROP","KEYDOWN","KEYPRESS","LOAD","MOUSEDOWN","MOUSEMOVE","MOUSEOUT","MOUSEUP","MOUSEWHEEL","MSPOINTERDOWN","RESIZE","TOUCHSTART","TOUCHMOVE","TOUCHEND","WHEEL","boundingExtent","buffer","clone","closestSquaredDistanceXY","containsCoordinate","containsExtent","containsXY","coordinateRelationship","createEmpty","createOrUpdate","createOrUpdateEmpty","createOrUpdateFromCoordinate","createOrUpdateFromCoordinates","createOrUpdateFromFlatCoordinates","createOrUpdateFromRings","equals","extendCoordinate","extendCoordinates","extendFlatCoordinates","extendRings","extendXY","forEachCorner","getArea","getBottomLeft","getBottomRight","getCenter","getCorner","getEnlargedArea","getForViewAndSize","getHeight","getIntersectionArea","getIntersection","getMargin","getSize","getTopLeft","getTopRight","getWidth","intersects","isEmpty","returnOrUpdate","scaleFromCenter","intersectsSegment","applyTransform","coordinates","_boundingExtentXYs","xs","ys","opt_extent","minX","min","minY","maxX","maxY","dx","dy","coordinate","extent1","extent2","relationship","UNKNOWN","LEFT","RIGHT","BELOW","ABOVE","INTERSECTING","Infinity","flatCoordinates","end","stride","rings","callback","area","corner","BOTTOM_LEFT","BOTTOM_RIGHT","TOP_LEFT","TOP_RIGHT","center","rotation","cosRotation","sinRotation","xCos","xSin","yCos","ySin","x0","x1","x2","x3","y0","y1","y2","y3","intersection","deltaX","deltaY","start","startRel","endRel","startX","startY","endX","endY","slope","transformFn","TRUE","FALSE","UNDEFINED","Geometry","extent_","extentRevision_","simplifiedGeometryCache","simplifiedGeometryMaxMinSquaredTolerance","simplifiedGeometryRevision","tmpTransform_","closestPointXY","closestPoint","minSquaredDistance","getClosestPoint","point","opt_closestPoint","NaN","intersectsCoordinate","computeExtent","rotate","angle","anchor","sx","opt_sy","opt_anchor","simplify","tolerance","getSimplifiedGeometry","squaredTolerance","intersectsExtent","translate","transform","destination","tmpTransform","getUnits","TILE_PIXELS","inCoordinates","outCoordinates","pixelExtent","projectedExtent","getWorldExtent","XY","XYZ","XYM","XYZM","POINT","LINE_STRING","LINEAR_RING","POLYGON","MULTI_POINT","MULTI_LINE_STRING","MULTI_POLYGON","GEOMETRY_COLLECTION","CIRCLE","getStrideForLayout","transformGeom2D","SimpleGeometry","getLayoutForStride","getCoordinates","getFirstCoordinate","getFlatCoordinates","getLastCoordinate","getLayout","simplifiedGeometry","getSimplifiedGeometryInternal","simplifiedFlatCoordinates","getStride","setFlatCoordinatesInternal","setCoordinates","opt_layout","setLayout","nesting","sy","simpleGeometry","opt_dest","deflateCoordinate","deflateCoordinates","deflateCoordinatesArray","deflateMultiCoordinatesArray","j","coordinatess","opt_ends","ends","jj","coordinatesss","opt_endss","endss","transform2D","dest","anchorX","anchorY","Point","setFlatCoordinates","squaredDistance","ua","navigator","userAgent","FIREFOX","SAFARI","WEBKIT","MAC","DEVICE_PIXEL_RATIO","window","devicePixelRatio","CANVAS_LINE_DASH","has","GEOLOCATION","TOUCH","POINTER","MSPOINTER","msPointerEnabled","inherits","getUid","VERSION","childCtor","parentCtor","constructor","uidCounter_","obj","ol_uid","clamp","roundUpToPowerOfTwo","squaredSegmentDistance","solveLinearSystem","toDegrees","toRadians","modulo","lerp","cosh","exp","ceil","LN2","mat","maxRow","maxEl","abs","absValue","tmp","coef","m","angleInRadians","angleInDegrees","clear","getValues","assign","var_sources","TypeError","arguments","object","cloneTransform","identityTransform","addProjection","addProjections","getPointResolution","addEquivalentProjections","addEquivalentTransforms","clearAllProjections","createProjection","createTransformFromCoordinateTransform","addCoordinateTransforms","fromLonLat","toLonLat","equivalent","getTransformFromProjections","getTransform","transformExtent","transformWithProjections","addCommon","projections","METERS_PER_UNIT","opt_output","opt_dimension","projection","add","getCode","projectionLike","opt_units","pointResolution","getter","getPointResolutionFunc","units","DEGREES","toEPSG4326","vertices","metersPerUnit","getMetersPerUnit","projections1","projections2","forwardTransform","inverseTransform","projection1","projection2","defaultCode","coordTransform","dimension","inverse","sourceProj","destProj","opt_projection","lonLat","lon","equalUnits","transformFunc","sourceProjection","destinationProjection","sourceCode","destinationCode","Projection","options","code_","units_","worldExtent_","worldExtent","axisOrientation_","axisOrientation","global_","global","canWrapX_","getPointResolutionFunc_","defaultTileGrid_","metersPerUnit_","canWrapX","getAxisOrientation","isGlobal","setGlobal","getDefaultTileGrid","setDefaultTileGrid","tileGrid","setExtent","setWorldExtent","setGetPointResolution","func","Units","FEET","METERS","PIXELS","USFEET","fromEPSG4326","RADIUS","HALF_SIZE","EXTENT","WORLD_EXTENT","EPSG3857Projection","PROJECTIONS","halfSize","tan","atan","EPSG4326Projection","opt_axisOrientation","remove","transforms","measureTextWidth","rotateAtOffset","defaultFont","defaultFillStyle","defaultLineCap","defaultLineDash","defaultLineDashOffset","defaultLineJoin","defaultMiterLimit","defaultStrokeStyle","defaultTextAlign","defaultTextBaseline","defaultPadding","defaultLineWidth","labelCache","checkedFonts","measureContext","textHeights","checkFont","retries","checked","referenceFonts","interval","referenceWidth","isAvailable","context","getMeasureContext","available","referenceFont","check","done","clearInterval","fontSpec","fontFamilies","setInterval","measureTextHeight","span","heights","textContent","margin","padding","position","offsetX","offsetY","resetTransform","image","originX","originY","globalAlpha","setTransform","getDistance","getLength","SphereMetricOptions","DEFAULT_RADIUS","c1","c2","opt_radius","lat1","lat2","deltaLatBy2","deltaLonBy2","getLengthInternal","geometry","opt_options","coords","geometries","getGeometries","getAreaInternal","distance","bearing","lon1","dByR","lat","asin","LRUCache","opt_highWaterMark","highWaterMark","count_","entries_","oldest_","newest_","canExpireCache","getCount","containsKey","entry","value_","key_","newer","older","peekLast","peekLastKey","peekFirstKey","setSize","prune","CircleStyle","points","snapToPixel","atlasManager","getRadius","getSnapToPixel","atlasManager_","getOpacity","setScale","getScale","setRadius","radius_","render_","Fill","color_","checksum_","getColor","getChecksum","FRACTION","IconImage","imageState","hitDetectionImage_","image_","canvas_","imageListenerKeys_","imageState_","size_","src_","tainting_","determineTainting_","dispatchChangeEvent_","handleImageError_","unlistenImage_","handleImageLoad_","replaceColor_","getImageState","getHitDetectionImage","fillRect","getSrc","load","imgData","IconImageCache","cache_","cacheSize_","maxCacheSize_","getKey","colorString","expire","maxCacheSize","ImageStyle","opacity_","rotateWithView_","rotateWithView","rotation_","scale_","snapToPixel_","getRotateWithView","getRotation","getAnchor","getImageSize","getHitDetectionImageSize","getOrigin","setRotateWithView","setSnapToPixel","listenImageChange","thisArg","unlistenImageChange","RegularShape","checksums_","hitDetectionCanvas_","fill_","origin_","points_","radius1","radius2_","radius2","angle_","stroke_","anchor_","imageSize_","hitDetectionImageSize_","getPoints","getRadius2","getAngle","imageSize","lineCap","lineJoin","miterLimit","lineDash","lineDashOffset","strokeStyle","strokeWidth","getLineDash","getLineDashOffset","getLineJoin","getLineCap","getMiterLimit","renderOptions","draw_","createHitDetectionCanvas_","hasCustomHitDetectionImage","renderHitDetectionCallback","drawHitDetectionCanvas_","bind","info","hitImage","angle0","radiusC","beginPath","arc","lineTo","fillStyle","lineWidth","closePath","strokeChecksum","fillChecksum","recalculate","checksum","Stroke","lineCap_","lineDash_","lineDashOffset_","lineJoin_","miterLimit_","width_","setLineDashOffset","LINE","Icon","normalizedAnchor_","anchorOrigin_","anchorOrigin","anchorXUnits_","anchorXUnits","anchorYUnits_","anchorYUnits","crossOrigin_","iconImage_","offset_","offsetOrigin_","offsetOrigin","iconImageSize","toFunction","createDefaultStyle","createEditingStyle","Style","geometry_","geometryFunction_","defaultGeometryFunction","renderer_","renderer","text_","zIndex_","zIndex","getZIndex","getRenderer","setRenderer","getGeometryFunction","defaultStyles","white","blue","concat","DEFAULT_FILL_COLOR","Text","font_","textAlign_","textBaseline_","maxAngle_","maxAngle","placement_","overflow_","overflow","offsetX_","offsetY_","backgroundFill_","backgroundFill","backgroundStroke_","backgroundStroke","padding_","getFont","getPlacement","getMaxAngle","getOverflow","getTextAlign","getTextBaseline","getOffsetX","getOffsetY","getBackgroundFill","getBackgroundStroke","getPadding","setOverflow","setMaxAngle","setBackgroundFill","setBackgroundStroke","setPadding","reset","multiply","setFromArray","compose","invert","determinant","tmp_","transform1","transform2","a1","b1","d1","e1","f1","a2","b2","d2","e2","f2","dx1","dy1","dx2","dy2","det"],"mappings":"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","file":"mb2olstyle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","/*\nmapbox-to-ol-style - Create OpenLayers style functions from Mapbox Style objects\nCopyright 2016-present Boundless Spatial, Inc.\nLicense: https://raw.githubusercontent.com/boundlessgeo/mapbox-to-ol-style/master/LICENSE.md\n*/\n\nimport Style from 'ol/style/style';\nimport Fill from 'ol/style/fill';\nimport Stroke from 'ol/style/stroke';\nimport Icon from 'ol/style/icon';\nimport Text from 'ol/style/text';\nimport Circle from 'ol/style/circle';\nimport Point from 'ol/geom/point';\nimport derefLayers from '@mapbox/mapbox-gl-style-spec/deref';\nimport glfun from '@mapbox/mapbox-gl-style-spec/function';\nimport createFilter from '@mapbox/mapbox-gl-style-spec/feature_filter';\nimport mb2css from 'mapbox-to-css-font';\n\nconst functionTypes = {\n  'line-miter-limit': 'interpolated',\n  'fill-opacity': 'interpolated',\n  'line-opacity': 'interpolated',\n  'line-width': 'interpolated',\n  'text-halo-width': 'interpolated',\n  'text-max-width': 'interpolated',\n  'text-offset': 'interpolated',\n  'text-opacity': 'interpolated',\n  'text-rotate': 'interpolated',\n  'text-size': 'interpolated',\n  'icon-opacity': 'interpolated',\n  'icon-rotate': 'interpolated',\n  'icon-size': 'interpolated',\n  'icon-color': 'interpolated',\n  'circle-radius': 'interpolated',\n  'circle-opacity': 'interpolated',\n  'circle-stroke-width': 'interpolated',\n  'circle-color': 'interpolated',\n  'circle-stroke-color': 'interpolated',\n  'text-halo-color': 'interpolated',\n  'text-color': 'interpolated',\n  'line-color': 'interpolated',\n  'fill-outline-color': 'interpolated',\n  'fill-color': 'interpolated',\n  'icon-image': 'piecewise-constant',\n  'line-cap': 'piecewise-constant',\n  'line-join': 'piecewise-constant',\n  'line-dasharray': 'piecewise-constant',\n  'symbol-placement': 'piecewise-constant',\n  'text-anchor': 'piecewise-constant',\n  'text-field': 'piecewise-constant',\n  'text-font': 'piecewise-constant'\n};\n\nconst defaults = {\n  'fill-opacity': 1,\n  'line-cap': 'butt',\n  'line-join': 'miter',\n  'line-miter-limit': 2,\n  'line-opacity': 1,\n  'line-width': 1,\n  'symbol-placement': 'point',\n  'text-anchor': 'center',\n  'text-color': '#000000',\n  'text-font': ['Open Sans Regular', 'Arial Unicode MS Regular'],\n  'text-halo-color': 'rgba(0, 0, 0, 0)',\n  'text-halo-width': 0,\n  'text-max-width': 10,\n  'text-offset': [0, 0],\n  'text-opacity': 1,\n  'text-rotate': 0,\n  'text-size': 16,\n  'icon-opacity': 1,\n  'icon-rotate': 0,\n  'icon-size': 1,\n  'circle-color': '#000000',\n  'circle-stroke-color': '#000000',\n  'circle-opacity': 1,\n  'circle-stroke-width': 0\n};\n\nconst types = {\n  'Point': 1,\n  'MultiPoint': 1,\n  'LineString': 2,\n  'MultiLineString': 2,\n  'Polygon': 3,\n  'MultiPolygon': 3\n};\n\nconst functionCache = {};\nfunction getValue(layerId, layoutOrPaint, property, zoom, properties) {\n  if (!functionCache[layerId]) {\n    functionCache[layerId] = {};\n  }\n  const functions = functionCache[layerId];\n  if (!functions[property]) {\n    let value = layoutOrPaint[property];\n    if (value === undefined) {\n      value = defaults[property];\n    }\n    functions[property] = glfun(value, {\n      function: functionTypes[property],\n      type: property.indexOf('color') !== -1 ? 'color' :\n        typeof value == 'object' && value.stops && typeof value.stops[0][0] == 'number' ? 'number' : undefined\n    });\n  }\n  return functions[property](zoom, properties);\n}\n\nconst fontMap = {};\nfunction chooseFont(fonts, availableFonts) {\n  if (fontMap[fonts]) {\n    return fontMap[fonts];\n  }\n  if (availableFonts) {\n    for (let i = 0, ii = fonts.length; i < ii; ++i) {\n      const font = fonts[i];\n      if (availableFonts.indexOf(font) != -1) {\n        fontMap[fonts] = font;\n        break;\n      }\n    }\n    if (!fontMap[fonts]) {\n      // fallback font\n      fontMap[fonts] = fonts[fonts.length - 1];\n    }\n  } else {\n    fontMap[fonts] = fonts[0];\n  }\n  return fontMap[fonts];\n}\n\nconst filterCache = {};\nfunction evaluateFilter(layerId, filter, feature) {\n  if (!(layerId in filterCache)) {\n    filterCache[layerId] = createFilter(filter);\n  }\n  return filterCache[layerId](feature);\n}\n\nfunction getZoomForResolution(resolution, resolutions) {\n  let i = 0;\n  const ii = resolutions.length;\n  for (; i < ii; ++i) {\n    const candidate = resolutions[i];\n    if (candidate < resolution && i + 1 < ii) {\n      const zoomFactor = resolutions[i] / resolutions[i + 1];\n      return i + Math.log(resolutions[i] / resolution) / Math.log(zoomFactor);\n    }\n  }\n  return ii - 1;\n}\n\nconst colorCache = {};\nfunction colorWithOpacity(color, opacity) {\n  if (color && opacity !== undefined) {\n    let colorData = colorCache[color];\n    if (!colorData) {\n      colorCache[color] = colorData = {\n        color: [\n          color[0] * 255 / color[3],\n          color[1] * 255 / color[3],\n          color[2] * 255 / color[3],\n          color[3]\n        ],\n        opacity: color[3]\n      };\n    }\n    color = colorData.color;\n    color[3] = colorData.opacity * opacity;\n    if (color[3] === 0) {\n      color = undefined;\n    }\n  }\n  return color;\n}\n\nfunction deg2rad(degrees) {\n  return degrees * Math.PI / 180;\n}\n\nconst templateRegEx = /^([^]*)\\{(.*)\\}([^]*)$/;\n\nfunction fromTemplate(text, properties) {\n  let parts;\n  do {\n    parts = text.match(templateRegEx);\n    if (parts) {\n      const value = properties[parts[2]] || '';\n      text = parts[1] + value + parts[3];\n    }\n  } while (parts);\n  return text;\n}\n\nconst emptyObj = {};\n\n/**\n * Creates a style function from the `glStyle` object for all layers that use\n * the specified `source`, which needs to be a `\"type\": \"vector\"` or\n * `\"type\": \"geojson\"` source and applies it to the specified OpenLayers layer.\n *\n * @param {ol.layer.Vector|ol.layer.VectorTile} olLayer OpenLayers layer to\n * apply the style to. In addition to the style, the layer will get two\n * properties: `mapbox-source` will be the `id` of the `glStyle`'s source used\n * for the layer, and `mapbox-layers` will be an array of the `id`s of the\n * `glStyle`'s layers.\n * @param {string|Object} glStyle Mapbox Style object.\n * @param {string|Array<string>} source `source` key or an array of layer `id`s\n * from the Mapbox Style object. When a `source` key is provided, all layers for\n * the specified source will be included in the style function. When layer `id`s\n * are provided, they must be from layers that use the same source.\n * @param {Array<number>} [resolutions=[78271.51696402048, 39135.75848201024,\n * 19567.87924100512, 9783.93962050256, 4891.96981025128, 2445.98490512564,\n * 1222.99245256282, 611.49622628141, 305.748113140705, 152.8740565703525,\n * 76.43702828517625, 38.21851414258813, 19.109257071294063, 9.554628535647032,\n * 4.777314267823516, 2.388657133911758, 1.194328566955879, 0.5971642834779395,\n * 0.29858214173896974, 0.14929107086948487, 0.07464553543474244]]\n * Resolutions for mapping resolution to zoom level.\n * @param {Object} [spriteData=undefined] Sprite data from the url specified in\n * the Mapbox Style object's `sprite` property. Only required if a `sprite`\n * property is specified in the Mapbox Style object.\n * @param {Object} [spriteImageUrl=undefined] Sprite image url for the sprite\n * specified in the Mapbox Style object's `sprite` property. Only required if a\n * `sprite` property is specified in the Mapbox Style object.\n * @param {Array<string>} [fonts=undefined] Array of available fonts, using the\n * same font names as the Mapbox Style object. If not provided, the style\n * function will always use the first font from the font array.\n * @return {ol.style.StyleFunction} Style function for use in\n * `ol.layer.Vector` or `ol.layer.VectorTile`.\n */\nexport default function(olLayer, glStyle, source, resolutions, spriteData, spriteImageUrl, fonts) {\n  if (!resolutions) {\n    resolutions = [];\n    for (let res = 78271.51696402048; resolutions.length < 21; res /= 2) {\n      resolutions.push(res);\n    }\n  }\n  if (typeof glStyle == 'string') {\n    glStyle = JSON.parse(glStyle);\n  }\n  if (glStyle.version != 8) {\n    throw new Error('glStyle version 8 required.');\n  }\n\n  let spriteImage, spriteImgSize;\n  if (spriteImageUrl) {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.onload = function() {\n      spriteImage = img;\n      spriteImgSize = [img.width, img.height];\n      olLayer.changed();\n    };\n    img.src = spriteImageUrl;\n  }\n\n  const ctx = document.createElement('CANVAS').getContext('2d');\n  const measureCache = {};\n  function wrapText(text, font, em) {\n    const key = em + ',' + font + ',' + text;\n    let wrappedText = measureCache[key];\n    if (!wrappedText) {\n      ctx.font = font;\n      const oneEm = ctx.measureText('M').width;\n      const width = oneEm * em;\n      const words = text.split(' ');\n      let line = '';\n      const lines = [];\n      for (let i = 0, ii = words.length; i < ii; ++i) {\n        const word = words[i];\n        if ((ctx.measureText(line + word).width <= width)) {\n          line += (line ? ' ' : '') + word;\n        } else {\n          if (line) {\n            lines.push(line);\n          }\n          line = word;\n        }\n      }\n      if (line) {\n        lines.push(line);\n      }\n      measureCache[key] = wrappedText = lines.join('\\n');\n    }\n    return wrappedText;\n  }\n\n  const allLayers = derefLayers(glStyle.layers);\n\n  const layersBySourceLayer = {};\n  const mapboxLayers = [];\n  let mapboxSource;\n  for (let i = 0, ii = allLayers.length; i < ii; ++i) {\n    const layer = allLayers[i];\n    if (typeof source == 'string' && layer.source == source ||\n        source.indexOf(layer.id) !== -1) {\n      const sourceLayer = layer['source-layer'];\n      if (!mapboxSource) {\n        mapboxSource = layer.source;\n      }\n      let layers = layersBySourceLayer[sourceLayer];\n      if (!layers) {\n        layers = layersBySourceLayer[sourceLayer] = [];\n      }\n      layers.push({\n        layer: layer,\n        index: i\n      });\n      mapboxLayers.push(layer.id);\n    }\n  }\n\n  const textHalo = new Stroke();\n  const textColor = new Fill();\n\n  const iconImageCache = {};\n\n  const styles = [];\n\n  const styleFunction = function(feature, resolution) {\n    const properties = feature.getProperties();\n    const layers = layersBySourceLayer[properties.layer];\n    if (!layers) {\n      return;\n    }\n    let zoom = resolutions.indexOf(resolution);\n    if (zoom == -1) {\n      zoom = getZoomForResolution(resolution, resolutions);\n    }\n    const type = types[feature.getGeometry().getType()];\n    const f = {\n      properties: properties,\n      type: type\n    };\n    let stylesLength = -1;\n    for (let i = 0, ii = layers.length; i < ii; ++i) {\n      const layerData = layers[i];\n      const layer = layerData.layer;\n      const layerId = layer.id;\n      const layout = layer.layout || emptyObj;\n      const paint = layer.paint || emptyObj;\n      if (layout.visibility === 'none' || ('minzoom' in layer && zoom < layer.minzoom) ||\n          ('maxzoom' in layer && zoom >= layer.maxzoom)) {\n        continue;\n      }\n      const filter = layer.filter;\n      if (!filter || evaluateFilter(layerId, filter, f)) {\n        let color, opacity, fill, stroke, strokeColor, style;\n        const index = layerData.index;\n        if (type == 3) {\n          if (!('fill-pattern' in paint) && 'fill-color' in paint) {\n            opacity = getValue(layerId, paint, 'fill-opacity', zoom, properties);\n            color = colorWithOpacity(getValue(layerId, paint, 'fill-color', zoom, properties), opacity);\n            if (color) {\n              ++stylesLength;\n              style = styles[stylesLength];\n              if (!style || !style.getFill() || style.getStroke() || style.getText()) {\n                style = styles[stylesLength] = new Style({\n                  fill: new Fill()\n                });\n              }\n              fill = style.getFill();\n              fill.setColor(color);\n              style.setZIndex(index);\n            }\n            if ('fill-outline-color' in paint) {\n              strokeColor = colorWithOpacity(getValue(layerId, paint, 'fill-outline-color', zoom, properties), opacity);\n            }\n            if (strokeColor) {\n              ++stylesLength;\n              style = styles[stylesLength];\n              if (!style || !style.getStroke() || style.getFill() || style.getText()) {\n                style = styles[stylesLength] = new Style({\n                  stroke: new Stroke()\n                });\n              }\n              stroke = style.getStroke();\n              stroke.setLineCap(defaults['line-cap']);\n              stroke.setLineJoin(defaults['line-join']);\n              stroke.setMiterLimit(defaults['line-miter-limit']);\n              stroke.setColor(strokeColor);\n              stroke.setWidth(1);\n              stroke.setLineDash(null);\n              style.setZIndex(index);\n            }\n          }\n        }\n        if (type != 1) {\n          color = !('line-pattern' in paint) && 'line-color' in paint ?\n            colorWithOpacity(getValue(layerId, paint, 'line-color', zoom, properties), getValue(layerId, paint, 'line-opacity', zoom, properties)) :\n            undefined;\n          const width = getValue(layerId, paint, 'line-width', zoom, properties);\n          if (color && width > 0) {\n            ++stylesLength;\n            style = styles[stylesLength];\n            if (!style || !style.getStroke() || style.getFill() || style.getText()) {\n              style = styles[stylesLength] = new Style({\n                stroke: new Stroke()\n              });\n            }\n            stroke = style.getStroke();\n            stroke.setLineCap(getValue(layerId, layout, 'line-cap', zoom, properties));\n            stroke.setLineJoin(getValue(layerId, layout, 'line-join', zoom, properties));\n            stroke.setMiterLimit(getValue(layerId, layout, 'line-miter-limit', zoom, properties));\n            stroke.setColor(color);\n            stroke.setWidth(width);\n            stroke.setLineDash(paint['line-dasharray'] ?\n              getValue(layerId, paint, 'line-dasharray', zoom, properties).map(function(x) {\n                return x * width;\n              }) : null);\n            style.setZIndex(index);\n          }\n        }\n\n        let hasImage = false;\n        let text = null;\n        let icon, iconImg, skipLabel;\n        if ((type == 1 || type == 2) && 'icon-image' in layout) {\n          const iconImage = getValue(layerId, layout, 'icon-image', zoom, properties);\n          if (iconImage) {\n            icon = fromTemplate(iconImage, properties);\n            let styleGeom = undefined;\n            if (spriteImage && spriteData && spriteData[icon]) {\n              if (type == 2) {\n                const geom = feature.getGeometry();\n                // ol package and ol-debug.js only\n                if (geom.getFlatMidpoint) {\n                  const extent = geom.getExtent();\n                  const size = Math.sqrt(Math.max(\n                    Math.pow((extent[2] - extent[0]) / resolution, 2),\n                    Math.pow((extent[3] - extent[1]) / resolution, 2))\n                  );\n                  if (size > 150) {\n                    //FIXME Do not hard-code a size of 150\n                    styleGeom = new Point(geom.getFlatMidpoint());\n                  }\n                }\n              }\n              if (type !== 2 || styleGeom) {\n                ++stylesLength;\n                style = styles[stylesLength];\n                if (!style || !style.getImage() || style.getFill() || style.getStroke()) {\n                  style = styles[stylesLength] = new Style();\n                }\n                style.setGeometry(styleGeom);\n                const iconSize = getValue(layerId, layout, 'icon-size', zoom, properties);\n                const iconColor = paint['icon-color'] !== undefined ? getValue(layerId, paint, 'icon-color', zoom, properties) : null;\n                let icon_cache_key = icon + '.' + iconSize;\n                if (iconColor !== null) {\n                  icon_cache_key += '.' + iconColor;\n                }\n                iconImg = iconImageCache[icon_cache_key];\n                if (!iconImg) {\n                  const spriteImageData = spriteData[icon];\n                  if (iconColor !== null) {\n                    // cut out the sprite and color it\n                    color = colorWithOpacity(iconColor, 1);\n                    const canvas = document.createElement('canvas');\n                    canvas.width = spriteImageData.width;\n                    canvas.height = spriteImageData.height;\n                    const ctx = canvas.getContext('2d');\n                    ctx.drawImage(\n                      spriteImage,\n                      spriteImageData.x,\n                      spriteImageData.y,\n                      spriteImageData.width,\n                      spriteImageData.height,\n                      0,\n                      0,\n                      spriteImageData.width,\n                      spriteImageData.height\n                    );\n                    const data = ctx.getImageData(0, 0, canvas.width, canvas.height);\n                    for (let c = 0, cc = data.data.length; c < cc; c += 4) {\n                      data.data[c] = color[0];\n                      data.data[c + 1] = color[1];\n                      data.data[c + 2] = color[2];\n                    }\n                    ctx.putImageData(data, 0, 0);\n                    iconImg = iconImageCache[icon_cache_key] = new Icon({\n                      img: canvas,\n                      imgSize: [canvas.width, canvas.height],\n                      scale: iconSize / spriteImageData.pixelRatio\n                    });\n                  } else {\n                    iconImg = iconImageCache[icon_cache_key] = new Icon({\n                      img: spriteImage,\n                      imgSize: spriteImgSize,\n                      size: [spriteImageData.width, spriteImageData.height],\n                      offset: [spriteImageData.x, spriteImageData.y],\n                      scale: iconSize / spriteImageData.pixelRatio\n                    });\n                  }\n                }\n                iconImg.setRotation(deg2rad(getValue(layerId, layout, 'icon-rotate', zoom, properties)));\n                iconImg.setOpacity(getValue(layerId, paint, 'icon-opacity', zoom, properties));\n                style.setImage(iconImg);\n                text = style.getText();\n                style.setText(undefined);\n                style.setZIndex(99999 - index);\n                hasImage = true;\n                skipLabel = false;\n              } else {\n                skipLabel = true;\n              }\n            }\n          }\n        }\n\n        if (type == 1 && 'circle-radius' in paint) {\n          ++stylesLength;\n          style = styles[stylesLength];\n          if (!style || !style.getImage() || style.getFill() || style.getStroke()) {\n            style = styles[stylesLength] = new Style();\n          }\n          const circleRadius = getValue(layerId, paint, 'circle-radius', zoom, properties);\n          const circleStrokeColor = getValue(layerId, paint, 'circle-stroke-color', zoom, properties);\n          const circleColor = getValue(layerId, paint, 'circle-color', zoom, properties);\n          const circleOpacity = getValue(layerId, paint, 'circle-opacity', zoom, properties);\n          const circleStrokeWidth = getValue(layerId, paint, 'circle-stroke-width', zoom, properties);\n          const cache_key = circleRadius + '.' + circleStrokeColor + '.' +\n            circleColor + '.' + circleOpacity + '.' + circleStrokeWidth;\n          iconImg = iconImageCache[cache_key];\n          if (!iconImg) {\n            iconImg = new Circle({\n              radius: circleRadius,\n              stroke: circleStrokeWidth === 0 ? undefined : new Stroke({\n                width: circleStrokeWidth,\n                color: colorWithOpacity(circleStrokeColor, circleOpacity)\n              }),\n              fill: new Fill({\n                color: colorWithOpacity(circleColor, circleOpacity)\n              })\n            });\n          }\n          style.setImage(iconImg);\n          text = style.getText();\n          style.setText(undefined);\n          style.setGeometry(undefined);\n          style.setZIndex(99999 - index);\n          hasImage = true;\n        }\n\n        let label;\n        if ('text-field' in layout) {\n          const textField = getValue(layerId, layout, 'text-field', zoom, properties);\n          label = fromTemplate(textField, properties);\n        }\n        if (label && !skipLabel) {\n          if (!hasImage) {\n            ++stylesLength;\n            style = styles[stylesLength];\n            if (!style || !style.getText() || style.getFill() || style.getStroke()) {\n              style = styles[stylesLength] = new Style();\n            }\n            style.setImage(undefined);\n            style.setGeometry(undefined);\n          }\n          if (!style.getText()) {\n            style.setText(text || new Text());\n          }\n          text = style.getText();\n          const textSize = getValue(layerId, layout, 'text-size', zoom, properties);\n          const font = mb2css(chooseFont(getValue(layerId, layout, 'text-font', zoom, properties)), textSize);\n          const textTransform = layout['text-transform'];\n          if (textTransform == 'uppercase') {\n            label = label.toUpperCase();\n          } else if (textTransform == 'lowercase') {\n            label = label.toLowerCase();\n          }\n          const wrappedLabel = type == 2 ? label : wrapText(label, font, getValue(layerId, layout, 'text-max-width', zoom, properties));\n          text.setText(wrappedLabel);\n          text.setFont(font);\n          text.setRotation(deg2rad(getValue(layerId, layout, 'text-rotate', zoom, properties)));\n          const textAnchor = getValue(layerId, layout, 'text-anchor', zoom, properties);\n          const placement = (hasImage || type == 1) ? 'point' : getValue(layerId, layout, 'symbol-placement', zoom, properties);\n          text.setPlacement(placement);\n          if (placement == 'point') {\n            let textAlign = 'center';\n            if (textAnchor.indexOf('left') !== -1) {\n              textAlign = 'left';\n            } else if (textAnchor.indexOf('right') !== -1) {\n              textAlign = 'right';\n            }\n            text.setTextAlign(textAlign);\n          } else {\n            text.setTextAlign();\n          }\n          let textBaseline = 'middle';\n          if (textAnchor.indexOf('bottom') == 0) {\n            textBaseline = 'bottom';\n          } else if (textAnchor.indexOf('top') == 0) {\n            textBaseline = 'top';\n          }\n          text.setTextBaseline(textBaseline);\n          const textOffset = getValue(layerId, layout, 'text-offset', zoom, properties);\n          text.setOffsetX(textOffset[0] * textSize);\n          text.setOffsetY(textOffset[1] * textSize);\n          opacity = getValue(layerId, paint, 'text-opacity', zoom, properties);\n          textColor.setColor(colorWithOpacity(getValue(layerId, paint, 'text-color', zoom, properties), opacity));\n          text.setFill(textColor);\n          const haloColor = colorWithOpacity(getValue(layerId, paint, 'text-halo-color', zoom, properties), opacity);\n          if (haloColor) {\n            textHalo.setColor(haloColor);\n            textHalo.setWidth(getValue(layerId, paint, 'text-halo-width', zoom, properties));\n            text.setStroke(textHalo);\n          } else {\n            text.setStroke(undefined);\n          }\n          style.setZIndex(99999 - index);\n        }\n      }\n    }\n\n    if (stylesLength > -1) {\n      styles.length = stylesLength + 1;\n      return styles;\n    }\n  };\n\n  olLayer.setStyle(styleFunction);\n  olLayer.set('mapbox-source', mapboxSource);\n  olLayer.set('mapbox-layers', mapboxLayers);\n  return styleFunction;\n}\n","\nconst refProperties = require('./util/ref_properties');\n\nfunction deref(layer, parent) {\n    const result = {};\n\n    for (const k in layer) {\n        if (k !== 'ref') {\n            result[k] = layer[k];\n        }\n    }\n\n    refProperties.forEach((k) => {\n        if (k in parent) {\n            result[k] = parent[k];\n        }\n    });\n\n    return result;\n}\n\nmodule.exports = derefLayers;\n\n/**\n * Given an array of layers, some of which may contain `ref` properties\n * whose value is the `id` of another property, return a new array where\n * such layers have been augmented with the 'type', 'source', etc. properties\n * from the parent layer, and the `ref` property has been removed.\n *\n * The input is not modified. The output may contain references to portions\n * of the input.\n *\n * @private\n * @param {Array<Layer>} layers\n * @returns {Array<Layer>}\n */\nfunction derefLayers(layers) {\n    layers = layers.slice();\n\n    const map = Object.create(null);\n    for (let i = 0; i < layers.length; i++) {\n        map[layers[i].id] = layers[i];\n    }\n\n    for (let i = 0; i < layers.length; i++) {\n        if ('ref' in layers[i]) {\n            layers[i] = deref(layers[i], map[layers[i].ref]);\n        }\n    }\n\n    return layers;\n}\n","module.exports = createFilter;\n\nconst types = ['Unknown', 'Point', 'LineString', 'Polygon'];\n\n/**\n * Given a filter expressed as nested arrays, return a new function\n * that evaluates whether a given feature (with a .properties or .tags property)\n * passes its test.\n *\n * @private\n * @param {Array} filter mapbox gl filter\n * @returns {Function} filter-evaluating function\n */\nfunction createFilter(filter) {\n    return new Function('f', `var p = (f && f.properties || {}); return ${compile(filter)}`);\n}\n\nfunction compile(filter) {\n    if (!filter) return 'true';\n    const op = filter[0];\n    if (filter.length <= 1) return op === 'any' ? 'false' : 'true';\n    const str =\n        op === '==' ? compileComparisonOp(filter[1], filter[2], '===', false) :\n        op === '!=' ? compileComparisonOp(filter[1], filter[2], '!==', false) :\n        op === '<' ||\n        op === '>' ||\n        op === '<=' ||\n        op === '>=' ? compileComparisonOp(filter[1], filter[2], op, true) :\n        op === 'any' ? compileLogicalOp(filter.slice(1), '||') :\n        op === 'all' ? compileLogicalOp(filter.slice(1), '&&') :\n        op === 'none' ? compileNegation(compileLogicalOp(filter.slice(1), '||')) :\n        op === 'in' ? compileInOp(filter[1], filter.slice(2)) :\n        op === '!in' ? compileNegation(compileInOp(filter[1], filter.slice(2))) :\n        op === 'has' ? compileHasOp(filter[1]) :\n        op === '!has' ? compileNegation(compileHasOp(filter[1])) :\n        'true';\n    return `(${str})`;\n}\n\nfunction compilePropertyReference(property) {\n    const ref =\n        property === '$type' ? 'f.type' :\n        property === '$id' ? 'f.id' : `p[${JSON.stringify(property)}]`;\n    return ref;\n}\n\nfunction compileComparisonOp(property, value, op, checkType) {\n    const left = compilePropertyReference(property);\n    const right = property === '$type' ? types.indexOf(value) : JSON.stringify(value);\n    return (checkType ? `typeof ${left}=== typeof ${right}&&` : '') + left + op + right;\n}\n\nfunction compileLogicalOp(expressions, op) {\n    return expressions.map(compile).join(op);\n}\n\nfunction compileInOp(property, values) {\n    if (property === '$type') values = values.map((value) => {\n        return types.indexOf(value);\n    });\n    const left = JSON.stringify(values.sort(compare));\n    const right = compilePropertyReference(property);\n\n    if (values.length <= 200) return `${left}.indexOf(${right}) !== -1`;\n\n    return `${'function(v, a, i, j) {' +\n        'while (i <= j) { var m = (i + j) >> 1;' +\n        '    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;' +\n        '}' +\n    'return false; }('}${right}, ${left},0,${values.length - 1})`;\n}\n\nfunction compileHasOp(property) {\n    return property === '$id' ? '\"id\" in f' : `${JSON.stringify(property)} in p`;\n}\n\nfunction compileNegation(expression) {\n    return `!(${expression})`;\n}\n\n// Comparison function to sort numbers and strings\nfunction compare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n","\n// Constants\nconst Xn = 0.950470, // D65 standard referent\n    Yn = 1,\n    Zn = 1.088830,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1,\n    deg2rad = Math.PI / 180,\n    rad2deg = 180 / Math.PI;\n\n// Utilities\nfunction xyz2lab(t) {\n    return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n    return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction xyz2rgb(x) {\n    return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2xyz(x) {\n    x /= 255;\n    return x <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\n// LAB\nfunction rgbToLab(rgbColor) {\n    const b = rgb2xyz(rgbColor[0]),\n        a = rgb2xyz(rgbColor[1]),\n        l = rgb2xyz(rgbColor[2]),\n        x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),\n        y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),\n        z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);\n\n    return [\n        116 * y - 16,\n        500 * (x - y),\n        200 * (y - z),\n        rgbColor[3]\n    ];\n}\n\nfunction labToRgb(labColor) {\n    let y = (labColor[0] + 16) / 116,\n        x = isNaN(labColor[1]) ? y : y + labColor[1] / 500,\n        z = isNaN(labColor[2]) ? y : y - labColor[2] / 200;\n    y = Yn * lab2xyz(y);\n    x = Xn * lab2xyz(x);\n    z = Zn * lab2xyz(z);\n    return [\n        xyz2rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n        xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),\n        xyz2rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z),\n        labColor[3]\n    ];\n}\n\n// HCL\nfunction rgbToHcl(rgbColor) {\n    const labColor = rgbToLab(rgbColor);\n    const l = labColor[0],\n        a = labColor[1],\n        b = labColor[2];\n    const h = Math.atan2(b, a) * rad2deg;\n    return [\n        h < 0 ? h + 360 : h,\n        Math.sqrt(a * a + b * b),\n        l,\n        rgbColor[3]\n    ];\n}\n\nfunction hclToRgb(hclColor) {\n    const h = hclColor[0] * deg2rad,\n        c = hclColor[1],\n        l = hclColor[2];\n    return labToRgb([\n        l,\n        Math.cos(h) * c,\n        Math.sin(h) * c,\n        hclColor[3]\n    ]);\n}\n\nmodule.exports = {\n    lab: {\n        forward: rgbToLab,\n        reverse: labToRgb\n    },\n    hcl: {\n        forward: rgbToHcl,\n        reverse: hclToRgb\n    }\n};\n","\nconst colorSpaces = require('./color_spaces');\nconst parseColor = require('../util/parse_color');\nconst extend = require('../util/extend');\nconst getType = require('../util/get_type');\nconst interpolate = require('../util/interpolate');\n\nfunction identityFunction(x) {\n    return x;\n}\n\nfunction createFunction(parameters, propertySpec) {\n    const isColor = propertySpec.type === 'color';\n\n    let fun;\n\n    if (!isFunctionDefinition(parameters)) {\n        if (isColor && parameters) {\n            parameters = parseColor(parameters);\n        }\n        fun = function() {\n            return parameters;\n        };\n        fun.isFeatureConstant = true;\n        fun.isZoomConstant = true;\n\n    } else {\n        const zoomAndFeatureDependent = parameters.stops && typeof parameters.stops[0][0] === 'object';\n        const featureDependent = zoomAndFeatureDependent || parameters.property !== undefined;\n        const zoomDependent = zoomAndFeatureDependent || !featureDependent;\n        const type = parameters.type || (propertySpec.function === 'interpolated' ? 'exponential' : 'interval');\n\n        if (isColor) {\n            parameters = extend({}, parameters);\n\n            if (parameters.stops) {\n                parameters.stops = parameters.stops.map((stop) => {\n                    return [stop[0], parseColor(stop[1])];\n                });\n            }\n\n            if (parameters.default) {\n                parameters.default = parseColor(parameters.default);\n            } else {\n                parameters.default = parseColor(propertySpec.default);\n            }\n        }\n\n        let innerFun;\n        let hashedStops;\n        let categoricalKeyType;\n        if (type === 'exponential') {\n            innerFun = evaluateExponentialFunction;\n        } else if (type === 'interval') {\n            innerFun = evaluateIntervalFunction;\n        } else if (type === 'categorical') {\n            innerFun = evaluateCategoricalFunction;\n\n            // For categorical functions, generate an Object as a hashmap of the stops for fast searching\n            hashedStops = Object.create(null);\n            for (const stop of parameters.stops) {\n                hashedStops[stop[0]] = stop[1];\n            }\n\n            // Infer key type based on first stop key-- used to encforce strict type checking later\n            categoricalKeyType = typeof parameters.stops[0][0];\n\n        } else if (type === 'identity') {\n            innerFun = evaluateIdentityFunction;\n        } else {\n            throw new Error(`Unknown function type \"${type}\"`);\n        }\n\n        let outputFunction;\n\n        // If we're interpolating colors in a color system other than RGBA,\n        // first translate all stop values to that color system, then interpolate\n        // arrays as usual. The `outputFunction` option lets us then translate\n        // the result of that interpolation back into RGBA.\n        if (parameters.colorSpace && parameters.colorSpace !== 'rgb') {\n            if (colorSpaces[parameters.colorSpace]) {\n                const colorspace = colorSpaces[parameters.colorSpace];\n                // Avoid mutating the parameters value\n                parameters = JSON.parse(JSON.stringify(parameters));\n                for (let s = 0; s < parameters.stops.length; s++) {\n                    parameters.stops[s] = [\n                        parameters.stops[s][0],\n                        colorspace.forward(parameters.stops[s][1])\n                    ];\n                }\n                outputFunction = colorspace.reverse;\n            } else {\n                throw new Error(`Unknown color space: ${parameters.colorSpace}`);\n            }\n        } else {\n            outputFunction = identityFunction;\n        }\n\n        if (zoomAndFeatureDependent) {\n            const featureFunctions = {};\n            const zoomStops = [];\n            for (let s = 0; s < parameters.stops.length; s++) {\n                const stop = parameters.stops[s];\n                const zoom = stop[0].zoom;\n                if (featureFunctions[zoom] === undefined) {\n                    featureFunctions[zoom] = {\n                        zoom: zoom,\n                        type: parameters.type,\n                        property: parameters.property,\n                        default: parameters.default,\n                        stops: []\n                    };\n                    zoomStops.push(zoom);\n                }\n                featureFunctions[zoom].stops.push([stop[0].value, stop[1]]);\n            }\n\n            const featureFunctionStops = [];\n            for (const z of zoomStops) {\n                featureFunctionStops.push([featureFunctions[z].zoom, createFunction(featureFunctions[z], propertySpec)]);\n            }\n            fun = function(zoom, feature) {\n                return outputFunction(evaluateExponentialFunction({\n                    stops: featureFunctionStops,\n                    base: parameters.base\n                }, propertySpec, zoom)(zoom, feature));\n            };\n            fun.isFeatureConstant = false;\n            fun.isZoomConstant = false;\n\n        } else if (zoomDependent) {\n            fun = function(zoom) {\n                return outputFunction(innerFun(parameters, propertySpec, zoom, hashedStops, categoricalKeyType));\n            };\n            fun.isFeatureConstant = true;\n            fun.isZoomConstant = false;\n        } else {\n            fun = function(zoom, feature) {\n                const value = feature[parameters.property];\n                if (value === undefined) {\n                    return coalesce(parameters.default, propertySpec.default);\n                }\n                return outputFunction(innerFun(parameters, propertySpec, value, hashedStops, categoricalKeyType));\n            };\n            fun.isFeatureConstant = false;\n            fun.isZoomConstant = true;\n        }\n    }\n\n    return fun;\n}\n\nfunction coalesce(a, b, c) {\n    if (a !== undefined) return a;\n    if (b !== undefined) return b;\n    if (c !== undefined) return c;\n}\n\nfunction evaluateCategoricalFunction(parameters, propertySpec, input, hashedStops, keyType) {\n    const evaluated = typeof input === keyType ? hashedStops[input] : undefined; // Enforce strict typing on input\n    return coalesce(evaluated, parameters.default, propertySpec.default);\n}\n\nfunction evaluateIntervalFunction(parameters, propertySpec, input) {\n    // Edge cases\n    if (getType(input) !== 'number') return coalesce(parameters.default, propertySpec.default);\n    const n = parameters.stops.length;\n    if (n === 1) return parameters.stops[0][1];\n    if (input <= parameters.stops[0][0]) return parameters.stops[0][1];\n    if (input >= parameters.stops[n - 1][0]) return parameters.stops[n - 1][1];\n\n    const index = findStopLessThanOrEqualTo(parameters.stops, input);\n\n    return parameters.stops[index][1];\n}\n\nfunction evaluateExponentialFunction(parameters, propertySpec, input) {\n    const base = parameters.base !== undefined ? parameters.base : 1;\n\n    // Edge cases\n    if (getType(input) !== 'number') return coalesce(parameters.default, propertySpec.default);\n    const n = parameters.stops.length;\n    if (n === 1) return parameters.stops[0][1];\n    if (input <= parameters.stops[0][0]) return parameters.stops[0][1];\n    if (input >= parameters.stops[n - 1][0]) return parameters.stops[n - 1][1];\n\n    const index = findStopLessThanOrEqualTo(parameters.stops, input);\n    const t = interpolationFactor(\n        input, base,\n        parameters.stops[index][0],\n        parameters.stops[index + 1][0]);\n\n    const outputLower = parameters.stops[index][1];\n    const outputUpper = parameters.stops[index + 1][1];\n    const interp = interpolate[propertySpec.type] || identityFunction;\n\n    if (typeof outputLower === 'function') {\n        return function(...args) {\n            const evaluatedLower = outputLower.apply(undefined, args);\n            const evaluatedUpper = outputUpper.apply(undefined, args);\n            // Special case for fill-outline-color, which has no spec default.\n            if (evaluatedLower === undefined || evaluatedUpper === undefined) {\n                return undefined;\n            }\n            return interp(evaluatedLower, evaluatedUpper, t);\n        };\n    }\n\n    return interp(outputLower, outputUpper, t);\n}\n\nfunction evaluateIdentityFunction(parameters, propertySpec, input) {\n    if (propertySpec.type === 'color') {\n        input = parseColor(input);\n    } else if (getType(input) !== propertySpec.type && (propertySpec.type !== 'enum' || !propertySpec.values[input])) {\n        input = undefined;\n    }\n    return coalesce(input, parameters.default, propertySpec.default);\n}\n\n/**\n * Returns the index of the last stop <= input, or 0 if it doesn't exist.\n *\n * @private\n */\nfunction findStopLessThanOrEqualTo(stops, input) {\n    const n = stops.length;\n    let lowerIndex = 0;\n    let upperIndex = n - 1;\n    let currentIndex = 0;\n    let currentValue, upperValue;\n\n    while (lowerIndex <= upperIndex) {\n        currentIndex = Math.floor((lowerIndex + upperIndex) / 2);\n        currentValue = stops[currentIndex][0];\n        upperValue = stops[currentIndex + 1][0];\n        if (input === currentValue || input > currentValue && input < upperValue) { // Search complete\n            return currentIndex;\n        } else if (currentValue < input) {\n            lowerIndex = currentIndex + 1;\n        } else if (currentValue > input) {\n            upperIndex = currentIndex - 1;\n        }\n    }\n\n    return Math.max(currentIndex - 1, 0);\n}\n\nfunction isFunctionDefinition(value) {\n    return typeof value === 'object' && (value.stops || value.type === 'identity');\n}\n\n/**\n * Returns a ratio that can be used to interpolate between exponential function\n * stops.\n *\n * How it works:\n * Two consecutive stop values define a (scaled and shifted) exponential\n * function `f(x) = a * base^x + b`, where `base` is the user-specified base,\n * and `a` and `b` are constants affording sufficient degrees of freedom to fit\n * the function to the given stops.\n *\n * Here's a bit of algebra that lets us compute `f(x)` directly from the stop\n * values without explicitly solving for `a` and `b`:\n *\n * First stop value: `f(x0) = y0 = a * base^x0 + b`\n * Second stop value: `f(x1) = y1 = a * base^x1 + b`\n * => `y1 - y0 = a(base^x1 - base^x0)`\n * => `a = (y1 - y0)/(base^x1 - base^x0)`\n *\n * Desired value: `f(x) = y = a * base^x + b`\n * => `f(x) = y0 + a * (base^x - base^x0)`\n *\n * From the above, we can replace the `a` in `a * (base^x - base^x0)` and do a\n * little algebra:\n * ```\n * a * (base^x - base^x0) = (y1 - y0)/(base^x1 - base^x0) * (base^x - base^x0)\n *                     = (y1 - y0) * (base^x - base^x0) / (base^x1 - base^x0)\n * ```\n *\n * If we let `(base^x - base^x0) / (base^x1 base^x0)`, then we have\n * `f(x) = y0 + (y1 - y0) * ratio`.  In other words, `ratio` may be treated as\n * an interpolation factor between the two stops' output values.\n *\n * (Note: a slightly different form for `ratio`,\n * `(base^(x-x0) - 1) / (base^(x1-x0) - 1) `, is equivalent, but requires fewer\n * expensive `Math.pow()` operations.)\n *\n * @private\n*/\nfunction interpolationFactor(input, base, lowerValue, upperValue) {\n    const difference = upperValue - lowerValue;\n    const progress = input - lowerValue;\n\n    if (difference === 0) {\n        return 0;\n    } else if (base === 1) {\n        return progress / difference;\n    } else {\n        return (Math.pow(base, progress) - 1) / (Math.pow(base, difference) - 1);\n    }\n}\n\nmodule.exports = createFunction;\nmodule.exports.isFunctionDefinition = isFunctionDefinition;\nmodule.exports.interpolationFactor = interpolationFactor;\nmodule.exports.findStopLessThanOrEqualTo = findStopLessThanOrEqualTo;\n","\nmodule.exports = function (output, ...inputs) {\n    for (const input of inputs) {\n        for (const k in input) {\n            output[k] = input[k];\n        }\n    }\n    return output;\n};\n","\nmodule.exports = function getType(val) {\n    if (val instanceof Number) {\n        return 'number';\n    } else if (val instanceof String) {\n        return 'string';\n    } else if (val instanceof Boolean) {\n        return 'boolean';\n    } else if (Array.isArray(val)) {\n        return 'array';\n    } else if (val === null) {\n        return 'null';\n    } else {\n        return typeof val;\n    }\n};\n","\nmodule.exports = interpolate;\n\nfunction interpolate(a, b, t) {\n    return (a * (1 - t)) + (b * t);\n}\n\ninterpolate.number = interpolate;\n\ninterpolate.vec2 = function(from, to, t) {\n    return [\n        interpolate(from[0], to[0], t),\n        interpolate(from[1], to[1], t)\n    ];\n};\n\n/*\n * Interpolate between two colors given as 4-element arrays.\n *\n * @param {Color} from\n * @param {Color} to\n * @param {number} t interpolation factor between 0 and 1\n * @returns {Color} interpolated color\n */\ninterpolate.color = function(from, to, t) {\n    return [\n        interpolate(from[0], to[0], t),\n        interpolate(from[1], to[1], t),\n        interpolate(from[2], to[2], t),\n        interpolate(from[3], to[3], t)\n    ];\n};\n\ninterpolate.array = function(from, to, t) {\n    return from.map((d, i) => {\n        return interpolate(d, to[i], t);\n    });\n};\n","\nconst parseColorString = require('csscolorparser').parseCSSColor;\n\nmodule.exports = function parseColor(input) {\n    if (typeof input === 'string') {\n        const rgba = parseColorString(input);\n        if (!rgba) { return undefined; }\n\n        // GL expects all components to be in the range [0, 1] and to be\n        // multipled by the alpha value.\n        return [\n            rgba[0] / 255 * rgba[3],\n            rgba[1] / 255 * rgba[3],\n            rgba[2] / 255 * rgba[3],\n            rgba[3]\n        ];\n\n    } else if (Array.isArray(input)) {\n        return input;\n\n    } else {\n        return undefined;\n    }\n};\n","\nmodule.exports = ['type', 'source', 'source-layer', 'minzoom', 'maxzoom', 'filter', 'layout'];\n","// (c) Dean McNamee <dean@gmail.com>, 2012.\n//\n// https://github.com/deanm/css-color-parser-js\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n// IN THE SOFTWARE.\n\n// http://www.w3.org/TR/css3-color/\nvar kCSSColorTable = {\n  \"transparent\": [0,0,0,0], \"aliceblue\": [240,248,255,1],\n  \"antiquewhite\": [250,235,215,1], \"aqua\": [0,255,255,1],\n  \"aquamarine\": [127,255,212,1], \"azure\": [240,255,255,1],\n  \"beige\": [245,245,220,1], \"bisque\": [255,228,196,1],\n  \"black\": [0,0,0,1], \"blanchedalmond\": [255,235,205,1],\n  \"blue\": [0,0,255,1], \"blueviolet\": [138,43,226,1],\n  \"brown\": [165,42,42,1], \"burlywood\": [222,184,135,1],\n  \"cadetblue\": [95,158,160,1], \"chartreuse\": [127,255,0,1],\n  \"chocolate\": [210,105,30,1], \"coral\": [255,127,80,1],\n  \"cornflowerblue\": [100,149,237,1], \"cornsilk\": [255,248,220,1],\n  \"crimson\": [220,20,60,1], \"cyan\": [0,255,255,1],\n  \"darkblue\": [0,0,139,1], \"darkcyan\": [0,139,139,1],\n  \"darkgoldenrod\": [184,134,11,1], \"darkgray\": [169,169,169,1],\n  \"darkgreen\": [0,100,0,1], \"darkgrey\": [169,169,169,1],\n  \"darkkhaki\": [189,183,107,1], \"darkmagenta\": [139,0,139,1],\n  \"darkolivegreen\": [85,107,47,1], \"darkorange\": [255,140,0,1],\n  \"darkorchid\": [153,50,204,1], \"darkred\": [139,0,0,1],\n  \"darksalmon\": [233,150,122,1], \"darkseagreen\": [143,188,143,1],\n  \"darkslateblue\": [72,61,139,1], \"darkslategray\": [47,79,79,1],\n  \"darkslategrey\": [47,79,79,1], \"darkturquoise\": [0,206,209,1],\n  \"darkviolet\": [148,0,211,1], \"deeppink\": [255,20,147,1],\n  \"deepskyblue\": [0,191,255,1], \"dimgray\": [105,105,105,1],\n  \"dimgrey\": [105,105,105,1], \"dodgerblue\": [30,144,255,1],\n  \"firebrick\": [178,34,34,1], \"floralwhite\": [255,250,240,1],\n  \"forestgreen\": [34,139,34,1], \"fuchsia\": [255,0,255,1],\n  \"gainsboro\": [220,220,220,1], \"ghostwhite\": [248,248,255,1],\n  \"gold\": [255,215,0,1], \"goldenrod\": [218,165,32,1],\n  \"gray\": [128,128,128,1], \"green\": [0,128,0,1],\n  \"greenyellow\": [173,255,47,1], \"grey\": [128,128,128,1],\n  \"honeydew\": [240,255,240,1], \"hotpink\": [255,105,180,1],\n  \"indianred\": [205,92,92,1], \"indigo\": [75,0,130,1],\n  \"ivory\": [255,255,240,1], \"khaki\": [240,230,140,1],\n  \"lavender\": [230,230,250,1], \"lavenderblush\": [255,240,245,1],\n  \"lawngreen\": [124,252,0,1], \"lemonchiffon\": [255,250,205,1],\n  \"lightblue\": [173,216,230,1], \"lightcoral\": [240,128,128,1],\n  \"lightcyan\": [224,255,255,1], \"lightgoldenrodyellow\": [250,250,210,1],\n  \"lightgray\": [211,211,211,1], \"lightgreen\": [144,238,144,1],\n  \"lightgrey\": [211,211,211,1], \"lightpink\": [255,182,193,1],\n  \"lightsalmon\": [255,160,122,1], \"lightseagreen\": [32,178,170,1],\n  \"lightskyblue\": [135,206,250,1], \"lightslategray\": [119,136,153,1],\n  \"lightslategrey\": [119,136,153,1], \"lightsteelblue\": [176,196,222,1],\n  \"lightyellow\": [255,255,224,1], \"lime\": [0,255,0,1],\n  \"limegreen\": [50,205,50,1], \"linen\": [250,240,230,1],\n  \"magenta\": [255,0,255,1], \"maroon\": [128,0,0,1],\n  \"mediumaquamarine\": [102,205,170,1], \"mediumblue\": [0,0,205,1],\n  \"mediumorchid\": [186,85,211,1], \"mediumpurple\": [147,112,219,1],\n  \"mediumseagreen\": [60,179,113,1], \"mediumslateblue\": [123,104,238,1],\n  \"mediumspringgreen\": [0,250,154,1], \"mediumturquoise\": [72,209,204,1],\n  \"mediumvioletred\": [199,21,133,1], \"midnightblue\": [25,25,112,1],\n  \"mintcream\": [245,255,250,1], \"mistyrose\": [255,228,225,1],\n  \"moccasin\": [255,228,181,1], \"navajowhite\": [255,222,173,1],\n  \"navy\": [0,0,128,1], \"oldlace\": [253,245,230,1],\n  \"olive\": [128,128,0,1], \"olivedrab\": [107,142,35,1],\n  \"orange\": [255,165,0,1], \"orangered\": [255,69,0,1],\n  \"orchid\": [218,112,214,1], \"palegoldenrod\": [238,232,170,1],\n  \"palegreen\": [152,251,152,1], \"paleturquoise\": [175,238,238,1],\n  \"palevioletred\": [219,112,147,1], \"papayawhip\": [255,239,213,1],\n  \"peachpuff\": [255,218,185,1], \"peru\": [205,133,63,1],\n  \"pink\": [255,192,203,1], \"plum\": [221,160,221,1],\n  \"powderblue\": [176,224,230,1], \"purple\": [128,0,128,1],\n  \"rebeccapurple\": [102,51,153,1],\n  \"red\": [255,0,0,1], \"rosybrown\": [188,143,143,1],\n  \"royalblue\": [65,105,225,1], \"saddlebrown\": [139,69,19,1],\n  \"salmon\": [250,128,114,1], \"sandybrown\": [244,164,96,1],\n  \"seagreen\": [46,139,87,1], \"seashell\": [255,245,238,1],\n  \"sienna\": [160,82,45,1], \"silver\": [192,192,192,1],\n  \"skyblue\": [135,206,235,1], \"slateblue\": [106,90,205,1],\n  \"slategray\": [112,128,144,1], \"slategrey\": [112,128,144,1],\n  \"snow\": [255,250,250,1], \"springgreen\": [0,255,127,1],\n  \"steelblue\": [70,130,180,1], \"tan\": [210,180,140,1],\n  \"teal\": [0,128,128,1], \"thistle\": [216,191,216,1],\n  \"tomato\": [255,99,71,1], \"turquoise\": [64,224,208,1],\n  \"violet\": [238,130,238,1], \"wheat\": [245,222,179,1],\n  \"white\": [255,255,255,1], \"whitesmoke\": [245,245,245,1],\n  \"yellow\": [255,255,0,1], \"yellowgreen\": [154,205,50,1]}\n\nfunction clamp_css_byte(i) {  // Clamp to integer 0 .. 255.\n  i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n  return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clamp_css_float(f) {  // Clamp to float 0.0 .. 1.0.\n  return f < 0 ? 0 : f > 1 ? 1 : f;\n}\n\nfunction parse_css_int(str) {  // int or percentage.\n  if (str[str.length - 1] === '%')\n    return clamp_css_byte(parseFloat(str) / 100 * 255);\n  return clamp_css_byte(parseInt(str));\n}\n\nfunction parse_css_float(str) {  // float or percentage.\n  if (str[str.length - 1] === '%')\n    return clamp_css_float(parseFloat(str) / 100);\n  return clamp_css_float(parseFloat(str));\n}\n\nfunction css_hue_to_rgb(m1, m2, h) {\n  if (h < 0) h += 1;\n  else if (h > 1) h -= 1;\n\n  if (h * 6 < 1) return m1 + (m2 - m1) * h * 6;\n  if (h * 2 < 1) return m2;\n  if (h * 3 < 2) return m1 + (m2 - m1) * (2/3 - h) * 6;\n  return m1;\n}\n\nfunction parseCSSColor(css_str) {\n  // Remove all whitespace, not compliant, but should just be more accepting.\n  var str = css_str.replace(/ /g, '').toLowerCase();\n\n  // Color keywords (and transparent) lookup.\n  if (str in kCSSColorTable) return kCSSColorTable[str].slice();  // dup.\n\n  // #abc and #abc123 syntax.\n  if (str[0] === '#') {\n    if (str.length === 4) {\n      var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n      if (!(iv >= 0 && iv <= 0xfff)) return null;  // Covers NaN.\n      return [((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8),\n              (iv & 0xf0) | ((iv & 0xf0) >> 4),\n              (iv & 0xf) | ((iv & 0xf) << 4),\n              1];\n    } else if (str.length === 7) {\n      var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n      if (!(iv >= 0 && iv <= 0xffffff)) return null;  // Covers NaN.\n      return [(iv & 0xff0000) >> 16,\n              (iv & 0xff00) >> 8,\n              iv & 0xff,\n              1];\n    }\n\n    return null;\n  }\n\n  var op = str.indexOf('('), ep = str.indexOf(')');\n  if (op !== -1 && ep + 1 === str.length) {\n    var fname = str.substr(0, op);\n    var params = str.substr(op+1, ep-(op+1)).split(',');\n    var alpha = 1;  // To allow case fallthrough.\n    switch (fname) {\n      case 'rgba':\n        if (params.length !== 4) return null;\n        alpha = parse_css_float(params.pop());\n        // Fall through.\n      case 'rgb':\n        if (params.length !== 3) return null;\n        return [parse_css_int(params[0]),\n                parse_css_int(params[1]),\n                parse_css_int(params[2]),\n                alpha];\n      case 'hsla':\n        if (params.length !== 4) return null;\n        alpha = parse_css_float(params.pop());\n        // Fall through.\n      case 'hsl':\n        if (params.length !== 3) return null;\n        var h = (((parseFloat(params[0]) % 360) + 360) % 360) / 360;  // 0 .. 1\n        // NOTE(deanm): According to the CSS spec s/l should only be\n        // percentages, but we don't bother and let float or percentage.\n        var s = parse_css_float(params[1]);\n        var l = parse_css_float(params[2]);\n        var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n        var m1 = l * 2 - m2;\n        return [clamp_css_byte(css_hue_to_rgb(m1, m2, h+1/3) * 255),\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h) * 255),\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h-1/3) * 255),\n                alpha];\n      default:\n        return null;\n    }\n  }\n\n  return null;\n}\n\ntry { exports.parseCSSColor = parseCSSColor } catch(e) { }\n","var fontWeights = {\n  thin: 100,\n  hairline: 100,\n  'ultra-light': 100,\n  'extra-light': 100,\n  light: 200,\n  book: 300,\n  regular: 400,\n  normal: 400,\n  plain: 400,\n  roman: 400,\n  standard: 400,\n  medium: 500,\n  'semi-bold': 600,\n  'demi-bold': 600,\n  bold: 700,\n  heavy: 800,\n  black: 800,\n  'extra-bold': 800,\n  'ultra-black': 900,\n  'extra-black': 900,\n  'ultra-bold': 900,\n  'heavy-black': 900,\n  fat: 900,\n  poster: 900\n};\nvar sp = ' ';\n\nvar fontCache = {};\n\nmodule.exports = function(font, size) {\n  var cssData = fontCache[font];\n  if (!cssData) {\n    var parts = font.split(' ');\n    var maybeWeight = parts[parts.length - 1].toLowerCase();\n    var weight = 'normal';\n    var style = 'normal';\n    if (maybeWeight == 'normal' || maybeWeight == 'italic' || maybeWeight == 'oblique') {\n      style = maybeWeight;\n      parts.pop();\n      maybeWeight = parts[parts.length - 1].toLowerCase();\n    }\n    for (var w in fontWeights) {\n      if (maybeWeight == w || maybeWeight == w.replace('-', '') || maybeWeight == w.replace('-', ' ')) {\n        weight = fontWeights[w];\n        parts.pop();\n        break;\n      }\n    }\n    if (typeof maybeWeight == 'number') {\n      weight = maybeWeight;\n    }\n    var fontFamily = parts.join(' ')\n        .replace('Klokantech Noto Sans', 'Noto Sans');\n    if (fontFamily.indexOf(' ') !== -1) {\n      fontFamily = '\"' + fontFamily + '\"';\n    }\n    // CSS font property: font-style font-weight font-size font-family\n    cssData = fontCache[font] = [style, weight, fontFamily];\n  }\n  return cssData[0] + sp + cssData[1] + sp + size + 'px' + sp + cssData[2];\n}\n","/**\n * @module ol/AssertionError\n */\nimport {VERSION, inherits} from './index.js';\n\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error}\n * @constructor\n * @extends {Error}\n * @implements {oli.AssertionError}\n * @param {number} code Error code.\n */\nconst AssertionError = function(code) {\n\n  const path = VERSION ? VERSION.split('-')[0] : 'latest';\n\n  /**\n   * @type {string}\n   */\n  this.message = 'Assertion failed. See https://openlayers.org/en/' + path +\n      '/doc/errors/#' + code + ' for details.';\n\n  /**\n   * Error code. The meaning of the code can be found on\n   * {@link https://openlayers.org/en/latest/doc/errors/} (replace `latest` with\n   * the version found in the OpenLayers script's header comment if a version\n   * other than the latest is used).\n   * @type {number}\n   * @api\n   */\n  this.code = code;\n\n  this.name = 'AssertionError';\n\n};\n\ninherits(AssertionError, Error);\n\nexport default AssertionError;\n","/**\n * @module ol/Disposable\n */\nimport {UNDEFINED} from './functions.js';\n\n/**\n * Objects that need to clean up after themselves.\n * @constructor\n */\nconst Disposable = function() {};\n\n/**\n * The object has already been disposed.\n * @type {boolean}\n * @private\n */\nDisposable.prototype.disposed_ = false;\n\n/**\n * Clean up.\n */\nDisposable.prototype.dispose = function() {\n  if (!this.disposed_) {\n    this.disposed_ = true;\n    this.disposeInternal();\n  }\n};\n\n/**\n * Extension point for disposable objects.\n * @protected\n */\nDisposable.prototype.disposeInternal = UNDEFINED;\nexport default Disposable;\n","/**\n * @module ol/ImageState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3\n};\n","/**\n * @module ol/Object\n */\nimport {getUid, inherits} from './index.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport Event from './events/Event.js';\nimport {assign} from './obj.js';\n\n\n/**\n * @classdesc\n * Events emitted by {@link ol.Object} instances are instances of this type.\n *\n * @param {string} type The event type.\n * @param {string} key The property name.\n * @param {*} oldValue The old value for `key`.\n * @extends {ol.events.Event}\n * @implements {oli.Object.Event}\n * @constructor\n */\nconst BaseObjectEvent = function(type, key, oldValue) {\n  Event.call(this, type);\n\n  /**\n   * The name of the property whose value is changing.\n   * @type {string}\n   * @api\n   */\n  this.key = key;\n\n  /**\n   * The old value. To get the new value use `e.target.get(e.key)` where\n   * `e` is the event object.\n   * @type {*}\n   * @api\n   */\n  this.oldValue = oldValue;\n\n};\ninherits(BaseObjectEvent, Event);\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link ol.Observable} with observable properties, where each\n * property is observable as well as the object as a whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link ol.Map} has a `target` property, accessed with `getTarget()`  and\n * changed with `setTarget()`. Not all properties are however settable. There\n * are also general-purpose accessors `get()` and `set()`. For example,\n * `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link ol.View} has a `center`\n * property, so `view.on('change:center', function(evt) {...});` would call the\n * function whenever the value of the center property changes. Within the\n * function, `evt.target` would be the view, so `evt.target.getCenter()` would\n * return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link ol.Object#getProperties object.getProperties()}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @constructor\n * @extends {ol.Observable}\n * @param {Object.<string, *>=} opt_values An object with key-value pairs.\n * @fires ol.Object.Event\n * @api\n */\nconst BaseObject = function(opt_values) {\n  Observable.call(this);\n\n  // Call ol.getUid to ensure that the order of objects' ids is the same as\n  // the order in which they were created.  This also helps to ensure that\n  // object properties are always added in the same order, which helps many\n  // JavaScript engines generate faster code.\n  getUid(this);\n\n  /**\n   * @private\n   * @type {!Object.<string, *>}\n   */\n  this.values_ = {};\n\n  if (opt_values !== undefined) {\n    this.setProperties(opt_values);\n  }\n};\n\ninherits(BaseObject, Observable);\n\n\n/**\n * @type {Object.<string, string>}\n */\nconst changeEventTypeCache = {};\n\n\n/**\n * @param {string} key Key name.\n * @return {string} Change name.\n */\nexport function getChangeEventType(key) {\n  return changeEventTypeCache.hasOwnProperty(key) ?\n    changeEventTypeCache[key] :\n    (changeEventTypeCache[key] = 'change:' + key);\n}\n\n\n/**\n * Gets a value.\n * @param {string} key Key name.\n * @return {*} Value.\n * @api\n */\nBaseObject.prototype.get = function(key) {\n  let value;\n  if (this.values_.hasOwnProperty(key)) {\n    value = this.values_[key];\n  }\n  return value;\n};\n\n\n/**\n * Get a list of object property names.\n * @return {Array.<string>} List of property names.\n * @api\n */\nBaseObject.prototype.getKeys = function() {\n  return Object.keys(this.values_);\n};\n\n\n/**\n * Get an object of all property names and values.\n * @return {Object.<string, *>} Object.\n * @api\n */\nBaseObject.prototype.getProperties = function() {\n  return assign({}, this.values_);\n};\n\n\n/**\n * @param {string} key Key name.\n * @param {*} oldValue Old value.\n */\nBaseObject.prototype.notify = function(key, oldValue) {\n  let eventType;\n  eventType = getChangeEventType(key);\n  this.dispatchEvent(new BaseObjectEvent(eventType, key, oldValue));\n  eventType = ObjectEventType.PROPERTYCHANGE;\n  this.dispatchEvent(new BaseObjectEvent(eventType, key, oldValue));\n};\n\n\n/**\n * Sets a value.\n * @param {string} key Key name.\n * @param {*} value Value.\n * @param {boolean=} opt_silent Update without triggering an event.\n * @api\n */\nBaseObject.prototype.set = function(key, value, opt_silent) {\n  if (opt_silent) {\n    this.values_[key] = value;\n  } else {\n    const oldValue = this.values_[key];\n    this.values_[key] = value;\n    if (oldValue !== value) {\n      this.notify(key, oldValue);\n    }\n  }\n};\n\n\n/**\n * Sets a collection of key-value pairs.  Note that this changes any existing\n * properties and adds new ones (it does not remove any existing properties).\n * @param {Object.<string, *>} values Values.\n * @param {boolean=} opt_silent Update without triggering an event.\n * @api\n */\nBaseObject.prototype.setProperties = function(values, opt_silent) {\n  for (const key in values) {\n    this.set(key, values[key], opt_silent);\n  }\n};\n\n\n/**\n * Unsets a property.\n * @param {string} key Key name.\n * @param {boolean=} opt_silent Unset without triggering an event.\n * @api\n */\nBaseObject.prototype.unset = function(key, opt_silent) {\n  if (key in this.values_) {\n    const oldValue = this.values_[key];\n    delete this.values_[key];\n    if (!opt_silent) {\n      this.notify(key, oldValue);\n    }\n  }\n};\n\n\nexport default BaseObject;\n","/**\n * @module ol/ObjectEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a property is changed.\n   * @event ol.Object.Event#propertychange\n   * @api\n   */\n  PROPERTYCHANGE: 'propertychange'\n};\n","/**\n * @module ol/Observable\n */\nimport {inherits} from './index.js';\nimport {listen, unlistenByKey, unlisten, listenOnce} from './events.js';\nimport EventTarget from './events/EventTarget.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link ol.Observable#changed}.\n *\n * @constructor\n * @extends {ol.events.EventTarget}\n * @fires ol.events.Event\n * @struct\n * @api\n */\nconst Observable = function() {\n\n  EventTarget.call(this);\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.revision_ = 0;\n\n};\n\ninherits(Observable, EventTarget);\n\n\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {ol.EventsKey|Array.<ol.EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n  if (Array.isArray(key)) {\n    for (let i = 0, ii = key.length; i < ii; ++i) {\n      unlistenByKey(key[i]);\n    }\n  } else {\n    unlistenByKey(/** @type {ol.EventsKey} */ (key));\n  }\n}\n\n\n/**\n * Increases the revision counter and dispatches a 'change' event.\n * @api\n */\nObservable.prototype.changed = function() {\n  ++this.revision_;\n  this.dispatchEvent(EventType.CHANGE);\n};\n\n\n/**\n * Dispatches an event and calls all listeners listening for events\n * of this type. The event parameter can either be a string or an\n * Object with a `type` property.\n *\n * @param {{type: string,\n *     target: (EventTarget|ol.events.EventTarget|undefined)}|ol.events.Event|\n *     string} event Event object.\n * @function\n * @api\n */\nObservable.prototype.dispatchEvent;\n\n\n/**\n * Get the version number for this object.  Each time the object is modified,\n * its version number will be incremented.\n * @return {number} Revision.\n * @api\n */\nObservable.prototype.getRevision = function() {\n  return this.revision_;\n};\n\n\n/**\n * Listen for a certain type of event.\n * @param {string|Array.<string>} type The event type or array of event types.\n * @param {function(?): ?} listener The listener function.\n * @return {ol.EventsKey|Array.<ol.EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.on = function(type, listener) {\n  if (Array.isArray(type)) {\n    const len = type.length;\n    const keys = new Array(len);\n    for (let i = 0; i < len; ++i) {\n      keys[i] = listen(this, type[i], listener);\n    }\n    return keys;\n  } else {\n    return listen(this, /** @type {string} */ (type), listener);\n  }\n};\n\n\n/**\n * Listen once for a certain type of event.\n * @param {string|Array.<string>} type The event type or array of event types.\n * @param {function(?): ?} listener The listener function.\n * @return {ol.EventsKey|Array.<ol.EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.once = function(type, listener) {\n  if (Array.isArray(type)) {\n    const len = type.length;\n    const keys = new Array(len);\n    for (let i = 0; i < len; ++i) {\n      keys[i] = listenOnce(this, type[i], listener);\n    }\n    return keys;\n  } else {\n    return listenOnce(this, /** @type {string} */ (type), listener);\n  }\n};\n\n\n/**\n * Unlisten for a certain type of event.\n * @param {string|Array.<string>} type The event type or array of event types.\n * @param {function(?): ?} listener The listener function.\n * @api\n */\nObservable.prototype.un = function(type, listener) {\n  if (Array.isArray(type)) {\n    for (let i = 0, ii = type.length; i < ii; ++i) {\n      unlisten(this, type[i], listener);\n    }\n    return;\n  } else {\n    unlisten(this, /** @type {string} */ (type), listener);\n  }\n};\nexport default Observable;\n","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n  if (!assertion) {\n    throw new AssertionError(errorCode);\n  }\n}\n","/**\n * @module ol/color\n */\nimport {assert} from './asserts.js';\nimport {clamp} from './math.js';\n\n\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nconst HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n\n\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nconst NAMED_COLOR_RE_ = /^([a-z]*)$/i;\n\n\n/**\n * Return the color as an rgba string.\n * @param {ol.Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n  if (typeof color === 'string') {\n    return color;\n  } else {\n    return toString(color);\n  }\n}\n\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n  const el = document.createElement('div');\n  el.style.color = color;\n  if (el.style.color !== '') {\n    document.body.appendChild(el);\n    const rgb = getComputedStyle(el).color;\n    document.body.removeChild(el);\n    return rgb;\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * @param {string} s String.\n * @return {ol.Color} Color.\n */\nexport const fromString = (\n  function() {\n\n    // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n    // semantics, whenever the cache grows too large we simply delete an\n    // arbitrary 25% of the entries.\n\n    /**\n     * @const\n     * @type {number}\n     */\n    const MAX_CACHE_SIZE = 1024;\n\n    /**\n     * @type {Object.<string, ol.Color>}\n     */\n    const cache = {};\n\n    /**\n     * @type {number}\n     */\n    let cacheSize = 0;\n\n    return (\n      /**\n       * @param {string} s String.\n       * @return {ol.Color} Color.\n       */\n      function(s) {\n        let color;\n        if (cache.hasOwnProperty(s)) {\n          color = cache[s];\n        } else {\n          if (cacheSize >= MAX_CACHE_SIZE) {\n            let i = 0;\n            for (const key in cache) {\n              if ((i++ & 3) === 0) {\n                delete cache[key];\n                --cacheSize;\n              }\n            }\n          }\n          color = fromStringInternal_(s);\n          cache[s] = color;\n          ++cacheSize;\n        }\n        return color;\n      }\n    );\n\n  })();\n\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {ol.Color|string} color Color.\n * @return {ol.Color} Color.\n * @api\n */\nexport function asArray(color) {\n  if (Array.isArray(color)) {\n    return color;\n  } else {\n    return fromString(/** @type {string} */ (color));\n  }\n}\n\n/**\n * @param {string} s String.\n * @private\n * @return {ol.Color} Color.\n */\nfunction fromStringInternal_(s) {\n  let r, g, b, a, color;\n\n  if (NAMED_COLOR_RE_.exec(s)) {\n    s = fromNamed(s);\n  }\n\n  if (HEX_COLOR_RE_.exec(s)) { // hex\n    const n = s.length - 1; // number of hex digits\n    let d; // number of digits per channel\n    if (n <= 4) {\n      d = 1;\n    } else {\n      d = 2;\n    }\n    const hasAlpha = n === 4 || n === 8;\n    r = parseInt(s.substr(1 + 0 * d, d), 16);\n    g = parseInt(s.substr(1 + 1 * d, d), 16);\n    b = parseInt(s.substr(1 + 2 * d, d), 16);\n    if (hasAlpha) {\n      a = parseInt(s.substr(1 + 3 * d, d), 16);\n    } else {\n      a = 255;\n    }\n    if (d == 1) {\n      r = (r << 4) + r;\n      g = (g << 4) + g;\n      b = (b << 4) + b;\n      if (hasAlpha) {\n        a = (a << 4) + a;\n      }\n    }\n    color = [r, g, b, a / 255];\n  } else if (s.indexOf('rgba(') == 0) { // rgba()\n    color = s.slice(5, -1).split(',').map(Number);\n    normalize(color);\n  } else if (s.indexOf('rgb(') == 0) { // rgb()\n    color = s.slice(4, -1).split(',').map(Number);\n    color.push(1);\n    normalize(color);\n  } else {\n    assert(false, 14); // Invalid color\n  }\n  return /** @type {ol.Color} */ (color);\n}\n\n\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {ol.Color} color Color.\n * @return {ol.Color} Clamped color.\n */\nexport function normalize(color) {\n  color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n  color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n  color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n  color[3] = clamp(color[3], 0, 1);\n  return color;\n}\n\n\n/**\n * @param {ol.Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n  let r = color[0];\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0;\n  }\n  let g = color[1];\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0;\n  }\n  let b = color[2];\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0;\n  }\n  const a = color[3] === undefined ? 1 : color[3];\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n","/**\n * @module ol/colorlike\n */\nimport {toString} from './color.js';\n\n\n/**\n * @param {ol.Color|ol.ColorLike} color Color.\n * @return {ol.ColorLike} The color as an ol.ColorLike\n * @api\n */\nexport function asColorLike(color) {\n  if (isColorLike(color)) {\n    return /** @type {string|CanvasPattern|CanvasGradient} */ (color);\n  } else {\n    return toString(/** @type {ol.Color} */ (color));\n  }\n}\n\n\n/**\n * @param {?} color The value that is potentially an ol.ColorLike\n * @return {boolean} Whether the color is an ol.ColorLike\n */\nexport function isColorLike(color) {\n  return (\n    typeof color === 'string' ||\n    color instanceof CanvasPattern ||\n    color instanceof CanvasGradient\n  );\n}\n","/**\n * @module ol/css\n */\n\n\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_HIDDEN = 'ol-hidden';\n\n\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_SELECTABLE = 'ol-selectable';\n\n\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSELECTABLE = 'ol-unselectable';\n\n\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSUPPORTED = 'ol-unsupported';\n\n\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_CONTROL = 'ol-control';\n\n\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_COLLAPSED = 'ol-collapsed';\n\n\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} The CSS font property.\n * @return {Object.<string>} The font families (or null if the input spec is invalid).\n */\nexport const getFontFamilies = (function() {\n  let style;\n  const cache = {};\n  return function(font) {\n    if (!style) {\n      style = document.createElement('div').style;\n    }\n    if (!(font in cache)) {\n      style.font = font;\n      const family = style.fontFamily;\n      style.font = '';\n      if (!family) {\n        return null;\n      }\n      cache[font] = family.split(/,\\s?/);\n    }\n    return cache[font];\n  };\n})();\n","/**\n * @module ol/dom\n */\n\n\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number=} opt_width Canvas width.\n * @param {number=} opt_height Canvas height.\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(opt_width, opt_height) {\n  const canvas = document.createElement('CANVAS');\n  if (opt_width) {\n    canvas.width = opt_width;\n  }\n  if (opt_height) {\n    canvas.height = opt_height;\n  }\n  return canvas.getContext('2d');\n}\n\n\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!Element} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n  let width = element.offsetWidth;\n  const style = getComputedStyle(element);\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\n  return width;\n}\n\n\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!Element} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n  let height = element.offsetHeight;\n  const style = getComputedStyle(element);\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\n  return height;\n}\n\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n  const parent = oldNode.parentNode;\n  if (parent) {\n    parent.replaceChild(newNode, oldNode);\n  }\n}\n\n/**\n * @param {Node} node The node to remove.\n * @returns {Node} The node that was removed or null.\n */\nexport function removeNode(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n}\n","/**\n * @module ol/events\n */\nimport {clear} from './obj.js';\n\n\n/**\n * @param {ol.EventsKey} listenerObj Listener object.\n * @return {ol.EventsListenerFunctionType} Bound listener.\n */\nexport function bindListener(listenerObj) {\n  const boundListener = function(evt) {\n    const listener = listenerObj.listener;\n    const bindTo = listenerObj.bindTo || listenerObj.target;\n    if (listenerObj.callOnce) {\n      unlistenByKey(listenerObj);\n    }\n    return listener.call(bindTo, evt);\n  };\n  listenerObj.boundListener = boundListener;\n  return boundListener;\n}\n\n\n/**\n * Finds the matching {@link ol.EventsKey} in the given listener\n * array.\n *\n * @param {!Array<!ol.EventsKey>} listeners Array of listeners.\n * @param {!Function} listener The listener function.\n * @param {Object=} opt_this The `this` value inside the listener.\n * @param {boolean=} opt_setDeleteIndex Set the deleteIndex on the matching\n *     listener, for {@link ol.events.unlistenByKey}.\n * @return {ol.EventsKey|undefined} The matching listener object.\n */\nexport function findListener(listeners, listener, opt_this, opt_setDeleteIndex) {\n  let listenerObj;\n  for (let i = 0, ii = listeners.length; i < ii; ++i) {\n    listenerObj = listeners[i];\n    if (listenerObj.listener === listener &&\n        listenerObj.bindTo === opt_this) {\n      if (opt_setDeleteIndex) {\n        listenerObj.deleteIndex = i;\n      }\n      return listenerObj;\n    }\n  }\n  return undefined;\n}\n\n\n/**\n * @param {ol.EventTargetLike} target Target.\n * @param {string} type Type.\n * @return {Array.<ol.EventsKey>|undefined} Listeners.\n */\nexport function getListeners(target, type) {\n  const listenerMap = target.ol_lm;\n  return listenerMap ? listenerMap[type] : undefined;\n}\n\n\n/**\n * Get the lookup of listeners.  If one does not exist on the target, it is\n * created.\n * @param {ol.EventTargetLike} target Target.\n * @return {!Object.<string, Array.<ol.EventsKey>>} Map of\n *     listeners by event type.\n */\nfunction getListenerMap(target) {\n  let listenerMap = target.ol_lm;\n  if (!listenerMap) {\n    listenerMap = target.ol_lm = {};\n  }\n  return listenerMap;\n}\n\n\n/**\n * Clean up all listener objects of the given type.  All properties on the\n * listener objects will be removed, and if no listeners remain in the listener\n * map, it will be removed from the target.\n * @param {ol.EventTargetLike} target Target.\n * @param {string} type Type.\n */\nfunction removeListeners(target, type) {\n  const listeners = getListeners(target, type);\n  if (listeners) {\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      target.removeEventListener(type, listeners[i].boundListener);\n      clear(listeners[i]);\n    }\n    listeners.length = 0;\n    const listenerMap = target.ol_lm;\n    if (listenerMap) {\n      delete listenerMap[type];\n      if (Object.keys(listenerMap).length === 0) {\n        delete target.ol_lm;\n      }\n    }\n  }\n}\n\n\n/**\n * Registers an event listener on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link ol.events.unlistenByKey}.\n *\n * @param {ol.EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ol.EventsListenerFunctionType} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean=} opt_once If true, add the listener as one-off listener.\n * @return {ol.EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, opt_this, opt_once) {\n  const listenerMap = getListenerMap(target);\n  let listeners = listenerMap[type];\n  if (!listeners) {\n    listeners = listenerMap[type] = [];\n  }\n  let listenerObj = findListener(listeners, listener, opt_this, false);\n  if (listenerObj) {\n    if (!opt_once) {\n      // Turn one-off listener into a permanent one.\n      listenerObj.callOnce = false;\n    }\n  } else {\n    listenerObj = /** @type {ol.EventsKey} */ ({\n      bindTo: opt_this,\n      callOnce: !!opt_once,\n      listener: listener,\n      target: target,\n      type: type\n    });\n    target.addEventListener(type, bindListener(listenerObj));\n    listeners.push(listenerObj);\n  }\n\n  return listenerObj;\n}\n\n\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link ol.events.unlistenByKey} in case the listener needs to be unregistered\n * before it is called.\n *\n * When {@link ol.events.listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {ol.EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ol.EventsListenerFunctionType} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {ol.EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, opt_this) {\n  return listen(target, type, listener, opt_this, true);\n}\n\n\n/**\n * Unregisters an event listener on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * To return a listener, this function needs to be called with the exact same\n * arguments that were used for a previous {@link ol.events.listen} call.\n *\n * @param {ol.EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ol.EventsListenerFunctionType} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n */\nexport function unlisten(target, type, listener, opt_this) {\n  const listeners = getListeners(target, type);\n  if (listeners) {\n    const listenerObj = findListener(listeners, listener, opt_this, true);\n    if (listenerObj) {\n      unlistenByKey(listenerObj);\n    }\n  }\n}\n\n\n/**\n * Unregisters event listeners on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * The argument passed to this function is the key returned from\n * {@link ol.events.listen} or {@link ol.events.listenOnce}.\n *\n * @param {ol.EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n  if (key && key.target) {\n    key.target.removeEventListener(key.type, key.boundListener);\n    const listeners = getListeners(key.target, key.type);\n    if (listeners) {\n      const i = 'deleteIndex' in key ? key.deleteIndex : listeners.indexOf(key);\n      if (i !== -1) {\n        listeners.splice(i, 1);\n      }\n      if (listeners.length === 0) {\n        removeListeners(key.target, key.type);\n      }\n    }\n    clear(key);\n  }\n}\n\n\n/**\n * Unregisters all event listeners on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * @param {ol.EventTargetLike} target Target.\n */\nexport function unlistenAll(target) {\n  const listenerMap = getListenerMap(target);\n  for (const type in listenerMap) {\n    removeListeners(target, type);\n  }\n}\n","/**\n * @module ol/events/Event\n */\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * @see {@link https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface}\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link ol.events.EventTarget}.\n *\n * @constructor\n * @implements {oli.events.Event}\n * @param {string} type Type.\n */\nconst Event = function(type) {\n\n  /**\n   * @type {boolean}\n   */\n  this.propagationStopped;\n\n  /**\n   * The event type.\n   * @type {string}\n   * @api\n   */\n  this.type = type;\n\n  /**\n   * The event target.\n   * @type {Object}\n   * @api\n   */\n  this.target = null;\n\n};\n\n\n/**\n * Stop event propagation.\n * @function\n * @override\n * @api\n */\nEvent.prototype.preventDefault =\n\n  /**\n   * Stop event propagation.\n   * @function\n   * @override\n   * @api\n   */\n  Event.prototype.stopPropagation = function() {\n    this.propagationStopped = true;\n  };\n\n\n/**\n * @param {Event|ol.events.Event} evt Event\n */\nexport function stopPropagation(evt) {\n  evt.stopPropagation();\n}\n\n\n/**\n * @param {Event|ol.events.Event} evt Event\n */\nexport function preventDefault(evt) {\n  evt.preventDefault();\n}\n\nexport default Event;\n","/**\n * @module ol/events/EventTarget\n */\nimport {inherits} from '../index.js';\nimport Disposable from '../Disposable.js';\nimport {unlistenAll} from '../events.js';\nimport {UNDEFINED} from '../functions.js';\nimport Event from '../events/Event.js';\n\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * @see {@link https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget}\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n *\n * @constructor\n * @extends {ol.Disposable}\n */\nconst EventTarget = function() {\n\n  Disposable.call(this);\n\n  /**\n   * @private\n   * @type {!Object.<string, number>}\n   */\n  this.pendingRemovals_ = {};\n\n  /**\n   * @private\n   * @type {!Object.<string, number>}\n   */\n  this.dispatching_ = {};\n\n  /**\n   * @private\n   * @type {!Object.<string, Array.<ol.EventsListenerFunctionType>>}\n   */\n  this.listeners_ = {};\n\n};\n\ninherits(EventTarget, Disposable);\n\n\n/**\n * @param {string} type Type.\n * @param {ol.EventsListenerFunctionType} listener Listener.\n */\nEventTarget.prototype.addEventListener = function(type, listener) {\n  let listeners = this.listeners_[type];\n  if (!listeners) {\n    listeners = this.listeners_[type] = [];\n  }\n  if (listeners.indexOf(listener) === -1) {\n    listeners.push(listener);\n  }\n};\n\n\n/**\n * @param {{type: string,\n *     target: (EventTarget|ol.events.EventTarget|undefined)}|ol.events.Event|\n *     string} event Event or event type.\n * @return {boolean|undefined} `false` if anyone called preventDefault on the\n *     event object or if any of the listeners returned false.\n */\nEventTarget.prototype.dispatchEvent = function(event) {\n  const evt = typeof event === 'string' ? new Event(event) : event;\n  const type = evt.type;\n  evt.target = this;\n  const listeners = this.listeners_[type];\n  let propagate;\n  if (listeners) {\n    if (!(type in this.dispatching_)) {\n      this.dispatching_[type] = 0;\n      this.pendingRemovals_[type] = 0;\n    }\n    ++this.dispatching_[type];\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n        propagate = false;\n        break;\n      }\n    }\n    --this.dispatching_[type];\n    if (this.dispatching_[type] === 0) {\n      let pendingRemovals = this.pendingRemovals_[type];\n      delete this.pendingRemovals_[type];\n      while (pendingRemovals--) {\n        this.removeEventListener(type, UNDEFINED);\n      }\n      delete this.dispatching_[type];\n    }\n    return propagate;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nEventTarget.prototype.disposeInternal = function() {\n  unlistenAll(this);\n};\n\n\n/**\n * Get the listeners for a specified event type. Listeners are returned in the\n * order that they will be called in.\n *\n * @param {string} type Type.\n * @return {Array.<ol.EventsListenerFunctionType>} Listeners.\n */\nEventTarget.prototype.getListeners = function(type) {\n  return this.listeners_[type];\n};\n\n\n/**\n * @param {string=} opt_type Type. If not provided,\n *     `true` will be returned if this EventTarget has any listeners.\n * @return {boolean} Has listeners.\n */\nEventTarget.prototype.hasListener = function(opt_type) {\n  return opt_type ?\n    opt_type in this.listeners_ :\n    Object.keys(this.listeners_).length > 0;\n};\n\n\n/**\n * @param {string} type Type.\n * @param {ol.EventsListenerFunctionType} listener Listener.\n */\nEventTarget.prototype.removeEventListener = function(type, listener) {\n  const listeners = this.listeners_[type];\n  if (listeners) {\n    const index = listeners.indexOf(listener);\n    if (type in this.pendingRemovals_) {\n      // make listener a no-op, and remove later in #dispatchEvent()\n      listeners[index] = UNDEFINED;\n      ++this.pendingRemovals_[type];\n    } else {\n      listeners.splice(index, 1);\n      if (listeners.length === 0) {\n        delete this.listeners_[type];\n      }\n    }\n  }\n};\nexport default EventTarget;\n","/**\n * @module ol/events/EventType\n */\n\n/**\n * @enum {string}\n * @const\n */\nexport default {\n  /**\n   * Generic change event. Triggered when the revision counter is increased.\n   * @event ol.events.Event#change\n   * @api\n   */\n  CHANGE: 'change',\n\n  CLEAR: 'clear',\n  CONTEXTMENU: 'contextmenu',\n  CLICK: 'click',\n  DBLCLICK: 'dblclick',\n  DRAGENTER: 'dragenter',\n  DRAGOVER: 'dragover',\n  DROP: 'drop',\n  ERROR: 'error',\n  KEYDOWN: 'keydown',\n  KEYPRESS: 'keypress',\n  LOAD: 'load',\n  MOUSEDOWN: 'mousedown',\n  MOUSEMOVE: 'mousemove',\n  MOUSEOUT: 'mouseout',\n  MOUSEUP: 'mouseup',\n  MOUSEWHEEL: 'mousewheel',\n  MSPOINTERDOWN: 'MSPointerDown',\n  RESIZE: 'resize',\n  TOUCHSTART: 'touchstart',\n  TOUCHMOVE: 'touchmove',\n  TOUCHEND: 'touchend',\n  WHEEL: 'wheel'\n};\n","/**\n * @module ol/extent\n */\nimport {assert} from './asserts.js';\nimport Corner from './extent/Corner.js';\nimport Relationship from './extent/Relationship.js';\n\n\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @return {ol.Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n  const extent = createEmpty();\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Array.<number>} xs Xs.\n * @param {Array.<number>} ys Ys.\n * @param {ol.Extent=} opt_extent Destination extent.\n * @private\n * @return {ol.Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, opt_extent) {\n  const minX = Math.min.apply(null, xs);\n  const minY = Math.min.apply(null, ys);\n  const maxX = Math.max.apply(null, xs);\n  const maxY = Math.max.apply(null, ys);\n  return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n}\n\n\n/**\n * Return extent increased by the provided value.\n * @param {ol.Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0] - value;\n    opt_extent[1] = extent[1] - value;\n    opt_extent[2] = extent[2] + value;\n    opt_extent[3] = extent[3] + value;\n    return opt_extent;\n  } else {\n    return [\n      extent[0] - value,\n      extent[1] - value,\n      extent[2] + value,\n      extent[3] + value\n    ];\n  }\n}\n\n\n/**\n * Creates a clone of an extent.\n *\n * @param {ol.Extent} extent Extent to clone.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} The clone.\n */\nexport function clone(extent, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0];\n    opt_extent[1] = extent[1];\n    opt_extent[2] = extent[2];\n    opt_extent[3] = extent[3];\n    return opt_extent;\n  } else {\n    return extent.slice();\n  }\n}\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n  let dx, dy;\n  if (x < extent[0]) {\n    dx = extent[0] - x;\n  } else if (extent[2] < x) {\n    dx = x - extent[2];\n  } else {\n    dx = 0;\n  }\n  if (y < extent[1]) {\n    dy = extent[1] - y;\n  } else if (extent[3] < y) {\n    dy = y - extent[3];\n  } else {\n    dy = 0;\n  }\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {ol.Extent} extent Extent.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n  return containsXY(extent, coordinate[0], coordinate[1]);\n}\n\n\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {ol.Extent} extent1 Extent 1.\n * @param {ol.Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n  return extent1[0] <= extent2[0] && extent2[2] <= extent1[2] &&\n      extent1[1] <= extent2[1] && extent2[3] <= extent1[3];\n}\n\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {ol.Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n  return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n\n\n/**\n * Get the relationship between a coordinate and extent.\n * @param {ol.Extent} extent The extent.\n * @param {ol.Coordinate} coordinate The coordinate.\n * @return {number} The relationship (bitwise compare with\n *     ol.extent.Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const x = coordinate[0];\n  const y = coordinate[1];\n  let relationship = Relationship.UNKNOWN;\n  if (x < minX) {\n    relationship = relationship | Relationship.LEFT;\n  } else if (x > maxX) {\n    relationship = relationship | Relationship.RIGHT;\n  }\n  if (y < minY) {\n    relationship = relationship | Relationship.BELOW;\n  } else if (y > maxY) {\n    relationship = relationship | Relationship.ABOVE;\n  }\n  if (relationship === Relationship.UNKNOWN) {\n    relationship = Relationship.INTERSECTING;\n  }\n  return relationship;\n}\n\n\n/**\n * Create an empty extent.\n * @return {ol.Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n  return [Infinity, Infinity, -Infinity, -Infinity];\n}\n\n\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {ol.Extent=} opt_extent Destination extent.\n * @return {ol.Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = minX;\n    opt_extent[1] = minY;\n    opt_extent[2] = maxX;\n    opt_extent[3] = maxY;\n    return opt_extent;\n  } else {\n    return [minX, minY, maxX, maxY];\n  }\n}\n\n\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n */\nexport function createOrUpdateEmpty(opt_extent) {\n  return createOrUpdate(\n    Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n}\n\n\n/**\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, opt_extent) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  return createOrUpdate(x, y, x, y, opt_extent);\n}\n\n\n/**\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendCoordinates(extent, coordinates);\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(flatCoordinates, offset, end, stride, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n\n/**\n * @param {Array.<Array.<ol.Coordinate>>} rings Rings.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendRings(extent, rings);\n}\n\n\n/**\n * Determine if two extents are equivalent.\n * @param {ol.Extent} extent1 Extent 1.\n * @param {ol.Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n  return extent1[0] == extent2[0] && extent1[2] == extent2[2] &&\n      extent1[1] == extent2[1] && extent1[3] == extent2[3];\n}\n\n\n/**\n * Modify an extent to include another extent.\n * @param {ol.Extent} extent1 The extent to be modified.\n * @param {ol.Extent} extent2 The extent that will be included in the first.\n * @return {ol.Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n  if (extent2[0] < extent1[0]) {\n    extent1[0] = extent2[0];\n  }\n  if (extent2[2] > extent1[2]) {\n    extent1[2] = extent2[2];\n  }\n  if (extent2[1] < extent1[1]) {\n    extent1[1] = extent2[1];\n  }\n  if (extent2[3] > extent1[3]) {\n    extent1[3] = extent2[3];\n  }\n  return extent1;\n}\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {ol.Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0];\n  }\n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0];\n  }\n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1];\n  }\n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1];\n  }\n}\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @return {ol.Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {ol.Extent} Extent.\n */\nexport function extendFlatCoordinates(extent, flatCoordinates, offset, end, stride) {\n  for (; offset < end; offset += stride) {\n    extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {Array.<Array.<ol.Coordinate>>} rings Rings.\n * @return {ol.Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n  for (let i = 0, ii = rings.length; i < ii; ++i) {\n    extendCoordinates(extent, rings[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n  extent[0] = Math.min(extent[0], x);\n  extent[1] = Math.min(extent[1], y);\n  extent[2] = Math.max(extent[2], x);\n  extent[3] = Math.max(extent[3], y);\n}\n\n\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {ol.Extent} extent Extent.\n * @param {function(this:T, ol.Coordinate): S} callback Callback.\n * @param {T=} opt_this Value to use as `this` when executing `callback`.\n * @return {S|boolean} Value.\n * @template S, T\n */\nexport function forEachCorner(extent, callback, opt_this) {\n  let val;\n  val = callback.call(opt_this, getBottomLeft(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getBottomRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getTopRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getTopLeft(extent));\n  if (val) {\n    return val;\n  }\n  return false;\n}\n\n\n/**\n * Get the size of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n  let area = 0;\n  if (!isEmpty(extent)) {\n    area = getWidth(extent) * getHeight(extent);\n  }\n  return area;\n}\n\n\n/**\n * Get the bottom left coordinate of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {ol.Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n  return [extent[0], extent[1]];\n}\n\n\n/**\n * Get the bottom right coordinate of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {ol.Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n  return [extent[2], extent[1]];\n}\n\n\n/**\n * Get the center coordinate of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {ol.Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n\n\n/**\n * Get a corner coordinate of an extent.\n * @param {ol.Extent} extent Extent.\n * @param {ol.extent.Corner} corner Corner.\n * @return {ol.Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n  let coordinate;\n  if (corner === Corner.BOTTOM_LEFT) {\n    coordinate = getBottomLeft(extent);\n  } else if (corner === Corner.BOTTOM_RIGHT) {\n    coordinate = getBottomRight(extent);\n  } else if (corner === Corner.TOP_LEFT) {\n    coordinate = getTopLeft(extent);\n  } else if (corner === Corner.TOP_RIGHT) {\n    coordinate = getTopRight(extent);\n  } else {\n    assert(false, 13); // Invalid corner\n  }\n  return /** @type {!ol.Coordinate} */ (coordinate);\n}\n\n\n/**\n * @param {ol.Extent} extent1 Extent 1.\n * @param {ol.Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n  const minX = Math.min(extent1[0], extent2[0]);\n  const minY = Math.min(extent1[1], extent2[1]);\n  const maxX = Math.max(extent1[2], extent2[2]);\n  const maxY = Math.max(extent1[3], extent2[3]);\n  return (maxX - minX) * (maxY - minY);\n}\n\n\n/**\n * @param {ol.Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {ol.Size} size Size.\n * @param {ol.Extent=} opt_extent Destination extent.\n * @return {ol.Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, opt_extent) {\n  const dx = resolution * size[0] / 2;\n  const dy = resolution * size[1] / 2;\n  const cosRotation = Math.cos(rotation);\n  const sinRotation = Math.sin(rotation);\n  const xCos = dx * cosRotation;\n  const xSin = dx * sinRotation;\n  const yCos = dy * cosRotation;\n  const ySin = dy * sinRotation;\n  const x = center[0];\n  const y = center[1];\n  const x0 = x - xCos + ySin;\n  const x1 = x - xCos - ySin;\n  const x2 = x + xCos - ySin;\n  const x3 = x + xCos + ySin;\n  const y0 = y - xSin - yCos;\n  const y1 = y - xSin + yCos;\n  const y2 = y + xSin + yCos;\n  const y3 = y + xSin - yCos;\n  return createOrUpdate(\n    Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3),\n    Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3),\n    opt_extent);\n}\n\n\n/**\n * Get the height of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n  return extent[3] - extent[1];\n}\n\n\n/**\n * @param {ol.Extent} extent1 Extent 1.\n * @param {ol.Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n  const intersection = getIntersection(extent1, extent2);\n  return getArea(intersection);\n}\n\n\n/**\n * Get the intersection of two extents.\n * @param {ol.Extent} extent1 Extent 1.\n * @param {ol.Extent} extent2 Extent 2.\n * @param {ol.Extent=} opt_extent Optional extent to populate with intersection.\n * @return {ol.Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, opt_extent) {\n  const intersection = opt_extent ? opt_extent : createEmpty();\n  if (intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0];\n    } else {\n      intersection[0] = extent2[0];\n    }\n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1];\n    } else {\n      intersection[1] = extent2[1];\n    }\n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2];\n    } else {\n      intersection[2] = extent2[2];\n    }\n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3];\n    } else {\n      intersection[3] = extent2[3];\n    }\n  } else {\n    createOrUpdateEmpty(intersection);\n  }\n  return intersection;\n}\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n  return getWidth(extent) + getHeight(extent);\n}\n\n\n/**\n * Get the size (width, height) of an extent.\n * @param {ol.Extent} extent The extent.\n * @return {ol.Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n  return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n\n\n/**\n * Get the top left coordinate of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {ol.Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n  return [extent[0], extent[3]];\n}\n\n\n/**\n * Get the top right coordinate of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {ol.Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n  return [extent[2], extent[3]];\n}\n\n\n/**\n * Get the width of an extent.\n * @param {ol.Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n  return extent[2] - extent[0];\n}\n\n\n/**\n * Determine if one extent intersects another.\n * @param {ol.Extent} extent1 Extent 1.\n * @param {ol.Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n  return extent1[0] <= extent2[2] &&\n      extent1[2] >= extent2[0] &&\n      extent1[1] <= extent2[3] &&\n      extent1[3] >= extent2[1];\n}\n\n\n/**\n * Determine if an extent is empty.\n * @param {ol.Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1];\n}\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} Extent.\n */\nexport function returnOrUpdate(extent, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0];\n    opt_extent[1] = extent[1];\n    opt_extent[2] = extent[2];\n    opt_extent[3] = extent[3];\n    return opt_extent;\n  } else {\n    return extent;\n  }\n}\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n  const deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n  const deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n  extent[0] -= deltaX;\n  extent[2] += deltaX;\n  extent[1] -= deltaY;\n  extent[3] += deltaY;\n}\n\n\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {ol.Extent} extent The extent.\n * @param {ol.Coordinate} start Segment start coordinate.\n * @param {ol.Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n  let intersects = false;\n  const startRel = coordinateRelationship(extent, start);\n  const endRel = coordinateRelationship(extent, end);\n  if (startRel === Relationship.INTERSECTING ||\n      endRel === Relationship.INTERSECTING) {\n    intersects = true;\n  } else {\n    const minX = extent[0];\n    const minY = extent[1];\n    const maxX = extent[2];\n    const maxY = extent[3];\n    const startX = start[0];\n    const startY = start[1];\n    const endX = end[0];\n    const endY = end[1];\n    const slope = (endY - startY) / (endX - startX);\n    let x, y;\n    if (!!(endRel & Relationship.ABOVE) &&\n        !(startRel & Relationship.ABOVE)) {\n      // potentially intersects top\n      x = endX - ((endY - maxY) / slope);\n      intersects = x >= minX && x <= maxX;\n    }\n    if (!intersects && !!(endRel & Relationship.RIGHT) &&\n        !(startRel & Relationship.RIGHT)) {\n      // potentially intersects right\n      y = endY - ((endX - maxX) * slope);\n      intersects = y >= minY && y <= maxY;\n    }\n    if (!intersects && !!(endRel & Relationship.BELOW) &&\n        !(startRel & Relationship.BELOW)) {\n      // potentially intersects bottom\n      x = endX - ((endY - minY) / slope);\n      intersects = x >= minX && x <= maxX;\n    }\n    if (!intersects && !!(endRel & Relationship.LEFT) &&\n        !(startRel & Relationship.LEFT)) {\n      // potentially intersects left\n      y = endY - ((endX - minX) * slope);\n      intersects = y >= minY && y <= maxY;\n    }\n\n  }\n  return intersects;\n}\n\n\n/**\n * Apply a transform function to the extent.\n * @param {ol.Extent} extent Extent.\n * @param {ol.TransformFunction} transformFn Transform function.  Called with\n * [minX, minY, maxX, maxY] extent coordinates.\n * @param {ol.Extent=} opt_extent Destination extent.\n * @return {ol.Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, opt_extent) {\n  const coordinates = [\n    extent[0], extent[1],\n    extent[0], extent[3],\n    extent[2], extent[1],\n    extent[2], extent[3]\n  ];\n  transformFn(coordinates, coordinates, 2);\n  const xs = [coordinates[0], coordinates[2], coordinates[4], coordinates[6]];\n  const ys = [coordinates[1], coordinates[3], coordinates[5], coordinates[7]];\n  return _boundingExtentXYs(xs, ys, opt_extent);\n}\n","/**\n * @module ol/extent/Corner\n */\n\n/**\n * Extent corner.\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/extent/Relationship\n */\n\n/**\n * Relationship to an extent.\n * @enum {number}\n */\nexport default {\n  UNKNOWN: 0,\n  INTERSECTING: 1,\n  ABOVE: 2,\n  RIGHT: 4,\n  BELOW: 8,\n  LEFT: 16\n};\n","/**\n * @module ol/functions\n */\n\n/**\n * Always returns true.\n * @returns {boolean} true.\n */\nexport function TRUE() {\n  return true;\n}\n\n/**\n * Always returns false.\n * @returns {boolean} false.\n */\nexport function FALSE() {\n  return false;\n}\n\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {undefined} Nothing.\n */\nexport function UNDEFINED() {}\n","/**\n * @module ol/geom/Geometry\n */\nimport {inherits} from '../index.js';\nimport BaseObject from '../Object.js';\nimport {createEmpty, getHeight, returnOrUpdate} from '../extent.js';\nimport {FALSE} from '../functions.js';\nimport {transform2D} from '../geom/flat/transform.js';\nimport {get as getProjection, getTransform} from '../proj.js';\nimport Units from '../proj/Units.js';\nimport {create as createTransform, compose as composeTransform} from '../transform.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for vector geometries.\n *\n * To get notified of changes to the geometry, register a listener for the\n * generic `change` event on your geometry instance.\n *\n * @constructor\n * @abstract\n * @extends {ol.Object}\n * @api\n */\nconst Geometry = function() {\n\n  BaseObject.call(this);\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.extent_ = createEmpty();\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.extentRevision_ = -1;\n\n  /**\n   * @protected\n   * @type {Object.<string, ol.geom.Geometry>}\n   */\n  this.simplifiedGeometryCache = {};\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.simplifiedGeometryRevision = 0;\n\n  /**\n   * @private\n   * @type {ol.Transform}\n   */\n  this.tmpTransform_ = createTransform();\n\n};\n\ninherits(Geometry, BaseObject);\n\n\n/**\n * Make a complete copy of the geometry.\n * @abstract\n * @return {!ol.geom.Geometry} Clone.\n */\nGeometry.prototype.clone = function() {};\n\n\n/**\n * @abstract\n * @param {number} x X.\n * @param {number} y Y.\n * @param {ol.Coordinate} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @return {number} Minimum squared distance.\n */\nGeometry.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {};\n\n\n/**\n * Return the closest point of the geometry to the passed point as\n * {@link ol.Coordinate coordinate}.\n * @param {ol.Coordinate} point Point.\n * @param {ol.Coordinate=} opt_closestPoint Closest point.\n * @return {ol.Coordinate} Closest point.\n * @api\n */\nGeometry.prototype.getClosestPoint = function(point, opt_closestPoint) {\n  const closestPoint = opt_closestPoint ? opt_closestPoint : [NaN, NaN];\n  this.closestPointXY(point[0], point[1], closestPoint, Infinity);\n  return closestPoint;\n};\n\n\n/**\n * Returns true if this geometry includes the specified coordinate. If the\n * coordinate is on the boundary of the geometry, returns false.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @return {boolean} Contains coordinate.\n * @api\n */\nGeometry.prototype.intersectsCoordinate = function(coordinate) {\n  return this.containsXY(coordinate[0], coordinate[1]);\n};\n\n\n/**\n * @abstract\n * @param {ol.Extent} extent Extent.\n * @protected\n * @return {ol.Extent} extent Extent.\n */\nGeometry.prototype.computeExtent = function(extent) {};\n\n\n/**\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nGeometry.prototype.containsXY = FALSE;\n\n\n/**\n * Get the extent of the geometry.\n * @param {ol.Extent=} opt_extent Extent.\n * @return {ol.Extent} extent Extent.\n * @api\n */\nGeometry.prototype.getExtent = function(opt_extent) {\n  if (this.extentRevision_ != this.getRevision()) {\n    this.extent_ = this.computeExtent(this.extent_);\n    this.extentRevision_ = this.getRevision();\n  }\n  return returnOrUpdate(this.extent_, opt_extent);\n};\n\n\n/**\n * Rotate the geometry around a given coordinate. This modifies the geometry\n * coordinates in place.\n * @abstract\n * @param {number} angle Rotation angle in radians.\n * @param {ol.Coordinate} anchor The rotation center.\n * @api\n */\nGeometry.prototype.rotate = function(angle, anchor) {};\n\n\n/**\n * Scale the geometry (with an optional origin).  This modifies the geometry\n * coordinates in place.\n * @abstract\n * @param {number} sx The scaling factor in the x-direction.\n * @param {number=} opt_sy The scaling factor in the y-direction (defaults to\n *     sx).\n * @param {ol.Coordinate=} opt_anchor The scale origin (defaults to the center\n *     of the geometry extent).\n * @api\n */\nGeometry.prototype.scale = function(sx, opt_sy, opt_anchor) {};\n\n\n/**\n * Create a simplified version of this geometry.  For linestrings, this uses\n * the the {@link\n * https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm\n * Douglas Peucker} algorithm.  For polygons, a quantization-based\n * simplification is used to preserve topology.\n * @function\n * @param {number} tolerance The tolerance distance for simplification.\n * @return {ol.geom.Geometry} A new, simplified version of the original\n *     geometry.\n * @api\n */\nGeometry.prototype.simplify = function(tolerance) {\n  return this.getSimplifiedGeometry(tolerance * tolerance);\n};\n\n\n/**\n * Create a simplified version of this geometry using the Douglas Peucker\n * algorithm.\n * @see https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm\n * @abstract\n * @param {number} squaredTolerance Squared tolerance.\n * @return {ol.geom.Geometry} Simplified geometry.\n */\nGeometry.prototype.getSimplifiedGeometry = function(squaredTolerance) {};\n\n\n/**\n * Get the type of this geometry.\n * @abstract\n * @return {ol.geom.GeometryType} Geometry type.\n */\nGeometry.prototype.getType = function() {};\n\n\n/**\n * Apply a transform function to each coordinate of the geometry.\n * The geometry is modified in place.\n * If you do not want the geometry modified in place, first `clone()` it and\n * then use this function on the clone.\n * @abstract\n * @param {ol.TransformFunction} transformFn Transform.\n */\nGeometry.prototype.applyTransform = function(transformFn) {};\n\n\n/**\n * Test if the geometry and the passed extent intersect.\n * @abstract\n * @param {ol.Extent} extent Extent.\n * @return {boolean} `true` if the geometry and the extent intersect.\n */\nGeometry.prototype.intersectsExtent = function(extent) {};\n\n\n/**\n * Translate the geometry.  This modifies the geometry coordinates in place.  If\n * instead you want a new geometry, first `clone()` this geometry.\n * @abstract\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n */\nGeometry.prototype.translate = function(deltaX, deltaY) {};\n\n\n/**\n * Transform each coordinate of the geometry from one coordinate reference\n * system to another. The geometry is modified in place.\n * For example, a line will be transformed to a line and a circle to a circle.\n * If you do not want the geometry modified in place, first `clone()` it and\n * then use this function on the clone.\n *\n * @param {ol.ProjectionLike} source The current projection.  Can be a\n *     string identifier or a {@link ol.proj.Projection} object.\n * @param {ol.ProjectionLike} destination The desired projection.  Can be a\n *     string identifier or a {@link ol.proj.Projection} object.\n * @return {ol.geom.Geometry} This geometry.  Note that original geometry is\n *     modified in place.\n * @api\n */\nGeometry.prototype.transform = function(source, destination) {\n  const tmpTransform = this.tmpTransform_;\n  source = getProjection(source);\n  const transformFn = source.getUnits() == Units.TILE_PIXELS ?\n    function(inCoordinates, outCoordinates, stride) {\n      const pixelExtent = source.getExtent();\n      const projectedExtent = source.getWorldExtent();\n      const scale = getHeight(projectedExtent) / getHeight(pixelExtent);\n      composeTransform(tmpTransform,\n        projectedExtent[0], projectedExtent[3],\n        scale, -scale, 0,\n        0, 0);\n      transform2D(inCoordinates, 0, inCoordinates.length, stride,\n        tmpTransform, outCoordinates);\n      return getTransform(source, destination)(inCoordinates, outCoordinates, stride);\n    } :\n    getTransform(source, destination);\n  this.applyTransform(transformFn);\n  return this;\n};\nexport default Geometry;\n","/**\n * @module ol/geom/GeometryLayout\n */\n\n/**\n * The coordinate layout for geometries, indicating whether a 3rd or 4th z ('Z')\n * or measure ('M') coordinate is available. Supported values are `'XY'`,\n * `'XYZ'`, `'XYM'`, `'XYZM'`.\n * @enum {string}\n */\nexport default {\n  XY: 'XY',\n  XYZ: 'XYZ',\n  XYM: 'XYM',\n  XYZM: 'XYZM'\n};\n","/**\n * @module ol/geom/GeometryType\n */\n\n/**\n * The geometry type. One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, `'Circle'`.\n * @enum {string}\n */\nexport default {\n  POINT: 'Point',\n  LINE_STRING: 'LineString',\n  LINEAR_RING: 'LinearRing',\n  POLYGON: 'Polygon',\n  MULTI_POINT: 'MultiPoint',\n  MULTI_LINE_STRING: 'MultiLineString',\n  MULTI_POLYGON: 'MultiPolygon',\n  GEOMETRY_COLLECTION: 'GeometryCollection',\n  CIRCLE: 'Circle'\n};\n","/**\n * @module ol/geom/SimpleGeometry\n */\nimport {inherits} from '../index.js';\nimport {FALSE} from '../functions.js';\nimport {createOrUpdateFromFlatCoordinates, getCenter} from '../extent.js';\nimport Geometry from '../geom/Geometry.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport {rotate, scale, translate, transform2D} from '../geom/flat/transform.js';\nimport {clear} from '../obj.js';\n\n/**\n * @classdesc\n * Abstract base class; only used for creating subclasses; do not instantiate\n * in apps, as cannot be rendered.\n *\n * @constructor\n * @abstract\n * @extends {ol.geom.Geometry}\n * @api\n */\nconst SimpleGeometry = function() {\n\n  Geometry.call(this);\n\n  /**\n   * @protected\n   * @type {ol.geom.GeometryLayout}\n   */\n  this.layout = GeometryLayout.XY;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.stride = 2;\n\n  /**\n   * @protected\n   * @type {Array.<number>}\n   */\n  this.flatCoordinates = null;\n\n};\n\ninherits(SimpleGeometry, Geometry);\n\n\n/**\n * @param {number} stride Stride.\n * @return {ol.geom.GeometryLayout} layout Layout.\n */\nfunction getLayoutForStride(stride) {\n  let layout;\n  if (stride == 2) {\n    layout = GeometryLayout.XY;\n  } else if (stride == 3) {\n    layout = GeometryLayout.XYZ;\n  } else if (stride == 4) {\n    layout = GeometryLayout.XYZM;\n  }\n  return /** @type {ol.geom.GeometryLayout} */ (layout);\n}\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @return {number} Stride.\n */\nexport function getStrideForLayout(layout) {\n  let stride;\n  if (layout == GeometryLayout.XY) {\n    stride = 2;\n  } else if (layout == GeometryLayout.XYZ || layout == GeometryLayout.XYM) {\n    stride = 3;\n  } else if (layout == GeometryLayout.XYZM) {\n    stride = 4;\n  }\n  return /** @type {number} */ (stride);\n}\n\n\n/**\n * @inheritDoc\n */\nSimpleGeometry.prototype.containsXY = FALSE;\n\n\n/**\n * @inheritDoc\n */\nSimpleGeometry.prototype.computeExtent = function(extent) {\n  return createOrUpdateFromFlatCoordinates(this.flatCoordinates,\n    0, this.flatCoordinates.length, this.stride, extent);\n};\n\n\n/**\n * @abstract\n * @return {Array} Coordinates.\n */\nSimpleGeometry.prototype.getCoordinates = function() {};\n\n\n/**\n * Return the first coordinate of the geometry.\n * @return {ol.Coordinate} First coordinate.\n * @api\n */\nSimpleGeometry.prototype.getFirstCoordinate = function() {\n  return this.flatCoordinates.slice(0, this.stride);\n};\n\n\n/**\n * @return {Array.<number>} Flat coordinates.\n */\nSimpleGeometry.prototype.getFlatCoordinates = function() {\n  return this.flatCoordinates;\n};\n\n\n/**\n * Return the last coordinate of the geometry.\n * @return {ol.Coordinate} Last point.\n * @api\n */\nSimpleGeometry.prototype.getLastCoordinate = function() {\n  return this.flatCoordinates.slice(this.flatCoordinates.length - this.stride);\n};\n\n\n/**\n * Return the {@link ol.geom.GeometryLayout layout} of the geometry.\n * @return {ol.geom.GeometryLayout} Layout.\n * @api\n */\nSimpleGeometry.prototype.getLayout = function() {\n  return this.layout;\n};\n\n\n/**\n * @inheritDoc\n */\nSimpleGeometry.prototype.getSimplifiedGeometry = function(squaredTolerance) {\n  if (this.simplifiedGeometryRevision != this.getRevision()) {\n    clear(this.simplifiedGeometryCache);\n    this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n    this.simplifiedGeometryRevision = this.getRevision();\n  }\n  // If squaredTolerance is negative or if we know that simplification will not\n  // have any effect then just return this.\n  if (squaredTolerance < 0 ||\n      (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n       squaredTolerance <= this.simplifiedGeometryMaxMinSquaredTolerance)) {\n    return this;\n  }\n  const key = squaredTolerance.toString();\n  if (this.simplifiedGeometryCache.hasOwnProperty(key)) {\n    return this.simplifiedGeometryCache[key];\n  } else {\n    const simplifiedGeometry =\n        this.getSimplifiedGeometryInternal(squaredTolerance);\n    const simplifiedFlatCoordinates = simplifiedGeometry.getFlatCoordinates();\n    if (simplifiedFlatCoordinates.length < this.flatCoordinates.length) {\n      this.simplifiedGeometryCache[key] = simplifiedGeometry;\n      return simplifiedGeometry;\n    } else {\n      // Simplification did not actually remove any coordinates.  We now know\n      // that any calls to getSimplifiedGeometry with a squaredTolerance less\n      // than or equal to the current squaredTolerance will also not have any\n      // effect.  This allows us to short circuit simplification (saving CPU\n      // cycles) and prevents the cache of simplified geometries from filling\n      // up with useless identical copies of this geometry (saving memory).\n      this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n      return this;\n    }\n  }\n};\n\n\n/**\n * @param {number} squaredTolerance Squared tolerance.\n * @return {ol.geom.SimpleGeometry} Simplified geometry.\n * @protected\n */\nSimpleGeometry.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  return this;\n};\n\n\n/**\n * @return {number} Stride.\n */\nSimpleGeometry.prototype.getStride = function() {\n  return this.stride;\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @protected\n */\nSimpleGeometry.prototype.setFlatCoordinatesInternal = function(layout, flatCoordinates) {\n  this.stride = getStrideForLayout(layout);\n  this.layout = layout;\n  this.flatCoordinates = flatCoordinates;\n};\n\n\n/**\n * @abstract\n * @param {Array} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n */\nSimpleGeometry.prototype.setCoordinates = function(coordinates, opt_layout) {};\n\n\n/**\n * @param {ol.geom.GeometryLayout|undefined} layout Layout.\n * @param {Array} coordinates Coordinates.\n * @param {number} nesting Nesting.\n * @protected\n */\nSimpleGeometry.prototype.setLayout = function(layout, coordinates, nesting) {\n  /** @type {number} */\n  let stride;\n  if (layout) {\n    stride = getStrideForLayout(layout);\n  } else {\n    for (let i = 0; i < nesting; ++i) {\n      if (coordinates.length === 0) {\n        this.layout = GeometryLayout.XY;\n        this.stride = 2;\n        return;\n      } else {\n        coordinates = /** @type {Array} */ (coordinates[0]);\n      }\n    }\n    stride = coordinates.length;\n    layout = getLayoutForStride(stride);\n  }\n  this.layout = layout;\n  this.stride = stride;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nSimpleGeometry.prototype.applyTransform = function(transformFn) {\n  if (this.flatCoordinates) {\n    transformFn(this.flatCoordinates, this.flatCoordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nSimpleGeometry.prototype.rotate = function(angle, anchor) {\n  const flatCoordinates = this.getFlatCoordinates();\n  if (flatCoordinates) {\n    const stride = this.getStride();\n    rotate(\n      flatCoordinates, 0, flatCoordinates.length,\n      stride, angle, anchor, flatCoordinates);\n    this.changed();\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nSimpleGeometry.prototype.scale = function(sx, opt_sy, opt_anchor) {\n  let sy = opt_sy;\n  if (sy === undefined) {\n    sy = sx;\n  }\n  let anchor = opt_anchor;\n  if (!anchor) {\n    anchor = getCenter(this.getExtent());\n  }\n  const flatCoordinates = this.getFlatCoordinates();\n  if (flatCoordinates) {\n    const stride = this.getStride();\n    scale(\n      flatCoordinates, 0, flatCoordinates.length,\n      stride, sx, sy, anchor, flatCoordinates);\n    this.changed();\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nSimpleGeometry.prototype.translate = function(deltaX, deltaY) {\n  const flatCoordinates = this.getFlatCoordinates();\n  if (flatCoordinates) {\n    const stride = this.getStride();\n    translate(\n      flatCoordinates, 0, flatCoordinates.length, stride,\n      deltaX, deltaY, flatCoordinates);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.SimpleGeometry} simpleGeometry Simple geometry.\n * @param {ol.Transform} transform Transform.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed flat coordinates.\n */\nexport function transformGeom2D(simpleGeometry, transform, opt_dest) {\n  const flatCoordinates = simpleGeometry.getFlatCoordinates();\n  if (!flatCoordinates) {\n    return null;\n  } else {\n    const stride = simpleGeometry.getStride();\n    return transform2D(\n      flatCoordinates, 0, flatCoordinates.length, stride,\n      transform, opt_dest);\n  }\n}\n\nexport default SimpleGeometry;\n","/**\n * @module ol/geom/flat/deflate\n */\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinate(flatCoordinates, offset, coordinate, stride) {\n  for (let i = 0, ii = coordinate.length; i < ii; ++i) {\n    flatCoordinates[offset++] = coordinate[i];\n  }\n  return offset;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinates(flatCoordinates, offset, coordinates, stride) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    const coordinate = coordinates[i];\n    for (let j = 0; j < stride; ++j) {\n      flatCoordinates[offset++] = coordinate[j];\n    }\n  }\n  return offset;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<ol.Coordinate>>} coordinatess Coordinatess.\n * @param {number} stride Stride.\n * @param {Array.<number>=} opt_ends Ends.\n * @return {Array.<number>} Ends.\n */\nexport function deflateCoordinatesArray(flatCoordinates, offset, coordinatess, stride, opt_ends) {\n  const ends = opt_ends ? opt_ends : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatess.length; j < jj; ++j) {\n    const end = deflateCoordinates(\n      flatCoordinates, offset, coordinatess[j], stride);\n    ends[i++] = end;\n    offset = end;\n  }\n  ends.length = i;\n  return ends;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<Array.<ol.Coordinate>>>} coordinatesss Coordinatesss.\n * @param {number} stride Stride.\n * @param {Array.<Array.<number>>=} opt_endss Endss.\n * @return {Array.<Array.<number>>} Endss.\n */\nexport function deflateMultiCoordinatesArray(flatCoordinates, offset, coordinatesss, stride, opt_endss) {\n  const endss = opt_endss ? opt_endss : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatesss.length; j < jj; ++j) {\n    const ends = deflateCoordinatesArray(\n      flatCoordinates, offset, coordinatesss[j], stride, endss[i]);\n    endss[i++] = ends;\n    offset = ends[ends.length - 1];\n  }\n  endss.length = i;\n  return endss;\n}\n","/**\n * @module ol/geom/flat/transform\n */\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {ol.Transform} transform Transform.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed coordinates.\n */\nexport function transform2D(flatCoordinates, offset, end, stride, transform, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const x = flatCoordinates[j];\n    const y = flatCoordinates[j + 1];\n    dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n    dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} angle Angle.\n * @param {Array.<number>} anchor Rotation anchor point.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed coordinates.\n */\nexport function rotate(flatCoordinates, offset, end, stride, angle, anchor, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + deltaX * cos - deltaY * sin;\n    dest[i++] = anchorY + deltaX * sin + deltaY * cos;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * Scale the coordinates.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} sx Scale factor in the x-direction.\n * @param {number} sy Scale factor in the y-direction.\n * @param {Array.<number>} anchor Scale anchor point.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed coordinates.\n */\nexport function scale(flatCoordinates, offset, end, stride, sx, sy, anchor, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + sx * deltaX;\n    dest[i++] = anchorY + sy * deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed coordinates.\n */\nexport function translate(flatCoordinates, offset, end, stride, deltaX, deltaY, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    dest[i++] = flatCoordinates[j] + deltaX;\n    dest[i++] = flatCoordinates[j + 1] + deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n","/**\n * @module ol/geom/Point\n */\nimport {inherits} from '../index.js';\nimport {createOrUpdateFromCoordinate, containsXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {deflateCoordinate} from '../geom/flat/deflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Point geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {ol.Coordinate} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst Point = function(coordinates, opt_layout) {\n  SimpleGeometry.call(this);\n  this.setCoordinates(coordinates, opt_layout);\n};\n\ninherits(Point, SimpleGeometry);\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.Point} Clone.\n * @override\n * @api\n */\nPoint.prototype.clone = function() {\n  const point = new Point(null);\n  point.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return point;\n};\n\n\n/**\n * @inheritDoc\n */\nPoint.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  const flatCoordinates = this.flatCoordinates;\n  const squaredDistance = squaredDx(x, y, flatCoordinates[0], flatCoordinates[1]);\n  if (squaredDistance < minSquaredDistance) {\n    const stride = this.stride;\n    for (let i = 0; i < stride; ++i) {\n      closestPoint[i] = flatCoordinates[i];\n    }\n    closestPoint.length = stride;\n    return squaredDistance;\n  } else {\n    return minSquaredDistance;\n  }\n};\n\n\n/**\n * Return the coordinate of the point.\n * @return {ol.Coordinate} Coordinates.\n * @override\n * @api\n */\nPoint.prototype.getCoordinates = function() {\n  return !this.flatCoordinates ? [] : this.flatCoordinates.slice();\n};\n\n\n/**\n * @inheritDoc\n */\nPoint.prototype.computeExtent = function(extent) {\n  return createOrUpdateFromCoordinate(this.flatCoordinates, extent);\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nPoint.prototype.getType = function() {\n  return GeometryType.POINT;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nPoint.prototype.intersectsExtent = function(extent) {\n  return containsXY(extent, this.flatCoordinates[0], this.flatCoordinates[1]);\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nPoint.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null);\n  } else {\n    this.setLayout(opt_layout, coordinates, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinate(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\nPoint.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\nexport default Point;\n","/**\n * @module ol/has\n */\n\nconst ua = typeof navigator !== 'undefined' ?\n  navigator.userAgent.toLowerCase() : '';\n\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport const FIREFOX = ua.indexOf('firefox') !== -1;\n\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport const SAFARI = ua.indexOf('safari') !== -1 && ua.indexOf('chrom') == -1;\n\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport const WEBKIT = ua.indexOf('webkit') !== -1 && ua.indexOf('edge') == -1;\n\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport const MAC = ua.indexOf('macintosh') !== -1;\n\n\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport const DEVICE_PIXEL_RATIO = window.devicePixelRatio || 1;\n\n\n/**\n * True if the browser's Canvas implementation implements {get,set}LineDash.\n * @type {boolean}\n */\nexport const CANVAS_LINE_DASH = function() {\n  let has = false;\n  try {\n    has = !!document.createElement('CANVAS').getContext('2d').setLineDash;\n  } catch (e) {\n    // pass\n  }\n  return has;\n}();\n\n\n/**\n * Is HTML5 geolocation supported in the current browser?\n * @const\n * @type {boolean}\n * @api\n */\nexport const GEOLOCATION = 'geolocation' in navigator;\n\n\n/**\n * True if browser supports touch events.\n * @const\n * @type {boolean}\n * @api\n */\nexport const TOUCH = 'ontouchstart' in window;\n\n\n/**\n * True if browser supports pointer events.\n * @const\n * @type {boolean}\n */\nexport const POINTER = 'PointerEvent' in window;\n\n\n/**\n * True if browser supports ms pointer events (IE 10).\n * @const\n * @type {boolean}\n */\nexport const MSPOINTER = !!(navigator.msPointerEnabled);\n","/**\n * @module ol\n */\n\n\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport const VERSION = 'v4.6.4';\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * Usage:\n *\n *     function ParentClass(a, b) { }\n *     ParentClass.prototype.foo = function(a) { }\n *\n *     function ChildClass(a, b, c) {\n *       // Call parent constructor\n *       ParentClass.call(this, a, b);\n *     }\n *     inherits(ChildClass, ParentClass);\n *\n *     var child = new ChildClass('a', 'b', 'see');\n *     child.foo(); // This works.\n *\n * @param {!Function} childCtor Child constructor.\n * @param {!Function} parentCtor Parent constructor.\n * @function\n * @api\n */\nexport function inherits(childCtor, parentCtor) {\n  childCtor.prototype = Object.create(parentCtor.prototype);\n  childCtor.prototype.constructor = childCtor;\n}\n\n\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {number} The unique ID for the object.\n */\nexport function getUid(obj) {\n  return obj.ol_uid || (obj.ol_uid = ++uidCounter_);\n}\n","/**\n * @module ol/math\n */\nimport {assert} from './asserts.js';\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\n\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport const cosh  = (function() {\n  // Wrapped in a iife, to save the overhead of checking for the native\n  // implementation on every invocation.\n  let cosh;\n  if ('cosh' in Math) {\n    // The environment supports the native Math.cosh function, use it…\n    cosh = Math.cosh;\n  } else {\n    // … else, use the reference implementation of MDN:\n    cosh = function(x) {\n      const y = Math.exp(x);\n      return (y + 1 / y) / 2;\n    };\n  }\n  return cosh;\n}());\n\n\n/**\n * @param {number} x X.\n * @return {number} The smallest power of two greater than or equal to x.\n */\nexport function roundUpToPowerOfTwo(x) {\n  assert(0 < x, 29); // `x` must be greater than `0`\n  return Math.pow(2, Math.ceil(Math.log(x) / Math.LN2));\n}\n\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return squaredDistance(x, y, x1, y1);\n}\n\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array.<Array.<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array.<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n  const n = mat.length;\n\n  for (let i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    let maxRow = i;\n    let maxEl = Math.abs(mat[i][i]);\n    for (let r = i + 1; r < n; r++) {\n      const absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    const tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (let j = i + 1; j < n; j++) {\n      const coef = -mat[j][i] / mat[i][i];\n      for (let k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  const x = new Array(n);\n  for (let l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (let m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n}\n\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return angleInRadians * 180 / Math.PI;\n}\n\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return angleInDegrees * Math.PI / 180;\n}\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n  const r = a % b;\n  return r * b < 0 ? r + b : r;\n}\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n  return a + x * (b - a);\n}\n","/**\n * @module ol/obj\n */\n\n\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n *\n * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\nexport const assign = (typeof Object.assign === 'function') ? Object.assign : function(target, var_sources) {\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = Object(target);\n  for (let i = 1, ii = arguments.length; i < ii; ++i) {\n    const source = arguments[i];\n    if (source !== undefined && source !== null) {\n      for (const key in source) {\n        if (source.hasOwnProperty(key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n};\n\n\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n  for (const property in object) {\n    delete object[property];\n  }\n}\n\n\n/**\n * Get an array of property values from an object.\n * @param {Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\nexport function getValues(object) {\n  const values = [];\n  for (const property in object) {\n    values.push(object[property]);\n  }\n  return values;\n}\n\n\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n  let property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\n","/**\n * @module ol/proj\n */\nimport {getDistance} from './sphere.js';\nimport {applyTransform} from './extent.js';\nimport {modulo} from './math.js';\nimport {toEPSG4326, fromEPSG4326, PROJECTIONS as EPSG3857_PROJECTIONS} from './proj/epsg3857.js';\nimport {PROJECTIONS as EPSG4326_PROJECTIONS} from './proj/epsg4326.js';\nimport Projection from './proj/Projection.js';\nimport Units, {METERS_PER_UNIT} from './proj/Units.js';\nimport * as projections from './proj/projections.js';\nimport {add as addTransformFunc, clear as clearTransformFuncs, get as getTransformFunc} from './proj/transforms.js';\n\n\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Object.<ol.proj.Units, number>}\n * @api\n */\nexport {METERS_PER_UNIT};\n\n\n/**\n * @param {Array.<number>} input Input coordinate array.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array.<number>} Output coordinate array (new array, same coordinate\n *     values).\n */\nexport function cloneTransform(input, opt_output, opt_dimension) {\n  let output;\n  if (opt_output !== undefined) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    output = opt_output;\n  } else {\n    output = input.slice();\n  }\n  return output;\n}\n\n\n/**\n * @param {Array.<number>} input Input coordinate array.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array.<number>} Input coordinate array (same array as input).\n */\nexport function identityTransform(input, opt_output, opt_dimension) {\n  if (opt_output !== undefined && input !== opt_output) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    input = opt_output;\n  }\n  return input;\n}\n\n\n/**\n * Add a Projection object to the list of supported projections that can be\n * looked up by their code.\n *\n * @param {ol.proj.Projection} projection Projection instance.\n * @api\n */\nexport function addProjection(projection) {\n  projections.add(projection.getCode(), projection);\n  addTransformFunc(projection, projection, cloneTransform);\n}\n\n\n/**\n * @param {Array.<ol.proj.Projection>} projections Projections.\n */\nexport function addProjections(projections) {\n  projections.forEach(addProjection);\n}\n\n\n/**\n * Fetches a Projection object for the code specified.\n *\n * @param {ol.ProjectionLike} projectionLike Either a code string which is\n *     a combination of authority and identifier such as \"EPSG:4326\", or an\n *     existing projection object, or undefined.\n * @return {ol.proj.Projection} Projection object, or null if not in list.\n * @api\n */\nexport function get(projectionLike) {\n  let projection = null;\n  if (projectionLike instanceof Projection) {\n    projection = projectionLike;\n  } else if (typeof projectionLike === 'string') {\n    const code = projectionLike;\n    projection = projections.get(code);\n  }\n  return projection;\n}\n\n\n/**\n * Get the resolution of the point in degrees or distance units.\n * For projections with degrees as the unit this will simply return the\n * provided resolution. For other projections the point resolution is\n * by default estimated by transforming the 'point' pixel to EPSG:4326,\n * measuring its width and height on the normal sphere,\n * and taking the average of the width and height.\n * A custom function can be provided for a specific projection, either\n * by setting the `getPointResolution` option in the\n * {@link ol.proj.Projection} constructor or by using\n * {@link ol.proj.Projection#setGetPointResolution} to change an existing\n * projection object.\n * @param {ol.ProjectionLike} projection The projection.\n * @param {number} resolution Nominal resolution in projection units.\n * @param {ol.Coordinate} point Point to find adjusted resolution at.\n * @param {ol.proj.Units=} opt_units Units to get the point resolution in.\n * Default is the projection's units.\n * @return {number} Point resolution.\n * @api\n */\nexport function getPointResolution(projection, resolution, point, opt_units) {\n  projection = get(projection);\n  let pointResolution;\n  const getter = projection.getPointResolutionFunc();\n  if (getter) {\n    pointResolution = getter(resolution, point);\n  } else {\n    const units = projection.getUnits();\n    if (units == Units.DEGREES && !opt_units || opt_units == Units.DEGREES) {\n      pointResolution = resolution;\n    } else {\n      // Estimate point resolution by transforming the center pixel to EPSG:4326,\n      // measuring its width and height on the normal sphere, and taking the\n      // average of the width and height.\n      const toEPSG4326 = getTransformFromProjections(projection, get('EPSG:4326'));\n      let vertices = [\n        point[0] - resolution / 2, point[1],\n        point[0] + resolution / 2, point[1],\n        point[0], point[1] - resolution / 2,\n        point[0], point[1] + resolution / 2\n      ];\n      vertices = toEPSG4326(vertices, vertices, 2);\n      const width = getDistance(vertices.slice(0, 2), vertices.slice(2, 4));\n      const height = getDistance(vertices.slice(4, 6), vertices.slice(6, 8));\n      pointResolution = (width + height) / 2;\n      const metersPerUnit = opt_units ?\n        METERS_PER_UNIT[opt_units] :\n        projection.getMetersPerUnit();\n      if (metersPerUnit !== undefined) {\n        pointResolution /= metersPerUnit;\n      }\n    }\n  }\n  return pointResolution;\n}\n\n\n/**\n * Registers transformation functions that don't alter coordinates. Those allow\n * to transform between projections with equal meaning.\n *\n * @param {Array.<ol.proj.Projection>} projections Projections.\n * @api\n */\nexport function addEquivalentProjections(projections) {\n  addProjections(projections);\n  projections.forEach(function(source) {\n    projections.forEach(function(destination) {\n      if (source !== destination) {\n        addTransformFunc(source, destination, cloneTransform);\n      }\n    });\n  });\n}\n\n\n/**\n * Registers transformation functions to convert coordinates in any projection\n * in projection1 to any projection in projection2.\n *\n * @param {Array.<ol.proj.Projection>} projections1 Projections with equal\n *     meaning.\n * @param {Array.<ol.proj.Projection>} projections2 Projections with equal\n *     meaning.\n * @param {ol.TransformFunction} forwardTransform Transformation from any\n *   projection in projection1 to any projection in projection2.\n * @param {ol.TransformFunction} inverseTransform Transform from any projection\n *   in projection2 to any projection in projection1..\n */\nexport function addEquivalentTransforms(projections1, projections2, forwardTransform, inverseTransform) {\n  projections1.forEach(function(projection1) {\n    projections2.forEach(function(projection2) {\n      addTransformFunc(projection1, projection2, forwardTransform);\n      addTransformFunc(projection2, projection1, inverseTransform);\n    });\n  });\n}\n\n\n/**\n * Clear all cached projections and transforms.\n */\nexport function clearAllProjections() {\n  projections.clear();\n  clearTransformFuncs();\n}\n\n\n/**\n * @param {ol.proj.Projection|string|undefined} projection Projection.\n * @param {string} defaultCode Default code.\n * @return {ol.proj.Projection} Projection.\n */\nexport function createProjection(projection, defaultCode) {\n  if (!projection) {\n    return get(defaultCode);\n  } else if (typeof projection === 'string') {\n    return get(projection);\n  } else {\n    return /** @type {ol.proj.Projection} */ (projection);\n  }\n}\n\n\n/**\n * Creates a {@link ol.TransformFunction} from a simple 2D coordinate transform\n * function.\n * @param {function(ol.Coordinate): ol.Coordinate} coordTransform Coordinate\n *     transform.\n * @return {ol.TransformFunction} Transform function.\n */\nexport function createTransformFromCoordinateTransform(coordTransform) {\n  return (\n    /**\n     * @param {Array.<number>} input Input.\n     * @param {Array.<number>=} opt_output Output.\n     * @param {number=} opt_dimension Dimension.\n     * @return {Array.<number>} Output.\n     */\n    function(input, opt_output, opt_dimension) {\n      const length = input.length;\n      const dimension = opt_dimension !== undefined ? opt_dimension : 2;\n      const output = opt_output !== undefined ? opt_output : new Array(length);\n      let point, i, j;\n      for (i = 0; i < length; i += dimension) {\n        point = coordTransform([input[i], input[i + 1]]);\n        output[i] = point[0];\n        output[i + 1] = point[1];\n        for (j = dimension - 1; j >= 2; --j) {\n          output[i + j] = input[i + j];\n        }\n      }\n      return output;\n    });\n}\n\n\n/**\n * Registers coordinate transform functions to convert coordinates between the\n * source projection and the destination projection.\n * The forward and inverse functions convert coordinate pairs; this function\n * converts these into the functions used internally which also handle\n * extents and coordinate arrays.\n *\n * @param {ol.ProjectionLike} source Source projection.\n * @param {ol.ProjectionLike} destination Destination projection.\n * @param {function(ol.Coordinate): ol.Coordinate} forward The forward transform\n *     function (that is, from the source projection to the destination\n *     projection) that takes a {@link ol.Coordinate} as argument and returns\n *     the transformed {@link ol.Coordinate}.\n * @param {function(ol.Coordinate): ol.Coordinate} inverse The inverse transform\n *     function (that is, from the destination projection to the source\n *     projection) that takes a {@link ol.Coordinate} as argument and returns\n *     the transformed {@link ol.Coordinate}.\n * @api\n */\nexport function addCoordinateTransforms(source, destination, forward, inverse) {\n  const sourceProj = get(source);\n  const destProj = get(destination);\n  addTransformFunc(sourceProj, destProj, createTransformFromCoordinateTransform(forward));\n  addTransformFunc(destProj, sourceProj, createTransformFromCoordinateTransform(inverse));\n}\n\n\n/**\n * Transforms a coordinate from longitude/latitude to a different projection.\n * @param {ol.Coordinate} coordinate Coordinate as longitude and latitude, i.e.\n *     an array with longitude as 1st and latitude as 2nd element.\n * @param {ol.ProjectionLike=} opt_projection Target projection. The\n *     default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {ol.Coordinate} Coordinate projected to the target projection.\n * @api\n */\nexport function fromLonLat(coordinate, opt_projection) {\n  return transform(coordinate, 'EPSG:4326',\n    opt_projection !== undefined ? opt_projection : 'EPSG:3857');\n}\n\n\n/**\n * Transforms a coordinate to longitude/latitude.\n * @param {ol.Coordinate} coordinate Projected coordinate.\n * @param {ol.ProjectionLike=} opt_projection Projection of the coordinate.\n *     The default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {ol.Coordinate} Coordinate as longitude and latitude, i.e. an array\n *     with longitude as 1st and latitude as 2nd element.\n * @api\n */\nexport function toLonLat(coordinate, opt_projection) {\n  const lonLat = transform(coordinate,\n    opt_projection !== undefined ? opt_projection : 'EPSG:3857', 'EPSG:4326');\n  const lon = lonLat[0];\n  if (lon < -180 || lon > 180) {\n    lonLat[0] = modulo(lon + 180, 360) - 180;\n  }\n  return lonLat;\n}\n\n\n/**\n * Checks if two projections are the same, that is every coordinate in one\n * projection does represent the same geographic point as the same coordinate in\n * the other projection.\n *\n * @param {ol.proj.Projection} projection1 Projection 1.\n * @param {ol.proj.Projection} projection2 Projection 2.\n * @return {boolean} Equivalent.\n * @api\n */\nexport function equivalent(projection1, projection2) {\n  if (projection1 === projection2) {\n    return true;\n  }\n  const equalUnits = projection1.getUnits() === projection2.getUnits();\n  if (projection1.getCode() === projection2.getCode()) {\n    return equalUnits;\n  } else {\n    const transformFunc = getTransformFromProjections(projection1, projection2);\n    return transformFunc === cloneTransform && equalUnits;\n  }\n}\n\n\n/**\n * Searches in the list of transform functions for the function for converting\n * coordinates from the source projection to the destination projection.\n *\n * @param {ol.proj.Projection} sourceProjection Source Projection object.\n * @param {ol.proj.Projection} destinationProjection Destination Projection\n *     object.\n * @return {ol.TransformFunction} Transform function.\n */\nexport function getTransformFromProjections(sourceProjection, destinationProjection) {\n  const sourceCode = sourceProjection.getCode();\n  const destinationCode = destinationProjection.getCode();\n  let transformFunc = getTransformFunc(sourceCode, destinationCode);\n  if (!transformFunc) {\n    transformFunc = identityTransform;\n  }\n  return transformFunc;\n}\n\n\n/**\n * Given the projection-like objects, searches for a transformation\n * function to convert a coordinates array from the source projection to the\n * destination projection.\n *\n * @param {ol.ProjectionLike} source Source.\n * @param {ol.ProjectionLike} destination Destination.\n * @return {ol.TransformFunction} Transform function.\n * @api\n */\nexport function getTransform(source, destination) {\n  const sourceProjection = get(source);\n  const destinationProjection = get(destination);\n  return getTransformFromProjections(sourceProjection, destinationProjection);\n}\n\n\n/**\n * Transforms a coordinate from source projection to destination projection.\n * This returns a new coordinate (and does not modify the original).\n *\n * See {@link ol.proj.transformExtent} for extent transformation.\n * See the transform method of {@link ol.geom.Geometry} and its subclasses for\n * geometry transforms.\n *\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {ol.ProjectionLike} source Source projection-like.\n * @param {ol.ProjectionLike} destination Destination projection-like.\n * @return {ol.Coordinate} Coordinate.\n * @api\n */\nexport function transform(coordinate, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return transformFunc(coordinate, undefined, coordinate.length);\n}\n\n\n/**\n * Transforms an extent from source projection to destination projection.  This\n * returns a new extent (and does not modify the original).\n *\n * @param {ol.Extent} extent The extent to transform.\n * @param {ol.ProjectionLike} source Source projection-like.\n * @param {ol.ProjectionLike} destination Destination projection-like.\n * @return {ol.Extent} The transformed extent.\n * @api\n */\nexport function transformExtent(extent, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return applyTransform(extent, transformFunc);\n}\n\n\n/**\n * Transforms the given point to the destination projection.\n *\n * @param {ol.Coordinate} point Point.\n * @param {ol.proj.Projection} sourceProjection Source projection.\n * @param {ol.proj.Projection} destinationProjection Destination projection.\n * @return {ol.Coordinate} Point.\n */\nexport function transformWithProjections(point, sourceProjection, destinationProjection) {\n  const transformFunc = getTransformFromProjections(sourceProjection, destinationProjection);\n  return transformFunc(point);\n}\n\n/**\n * Add transforms to and from EPSG:4326 and EPSG:3857.  This function is called\n * by when this module is executed and should only need to be called again after\n * `clearAllProjections()` is called (e.g. in tests).\n */\nexport function addCommon() {\n  // Add transformations that don't alter coordinates to convert within set of\n  // projections with equal meaning.\n  addEquivalentProjections(EPSG3857_PROJECTIONS);\n  addEquivalentProjections(EPSG4326_PROJECTIONS);\n  // Add transformations to convert EPSG:4326 like coordinates to EPSG:3857 like\n  // coordinates and back.\n  addEquivalentTransforms(EPSG4326_PROJECTIONS, EPSG3857_PROJECTIONS, fromEPSG4326, toEPSG4326);\n}\n\naddCommon();\n","/**\n * @module ol/proj/Projection\n */\nimport {METERS_PER_UNIT} from '../proj/Units.js';\n\n/**\n * @classdesc\n * Projection definition class. One of these is created for each projection\n * supported in the application and stored in the {@link ol.proj} namespace.\n * You can use these in applications, but this is not required, as API params\n * and options use {@link ol.ProjectionLike} which means the simple string\n * code will suffice.\n *\n * You can use {@link ol.proj.get} to retrieve the object for a particular\n * projection.\n *\n * The library includes definitions for `EPSG:4326` and `EPSG:3857`, together\n * with the following aliases:\n * * `EPSG:4326`: CRS:84, urn:ogc:def:crs:EPSG:6.6:4326,\n *     urn:ogc:def:crs:OGC:1.3:CRS84, urn:ogc:def:crs:OGC:2:84,\n *     http://www.opengis.net/gml/srs/epsg.xml#4326,\n *     urn:x-ogc:def:crs:EPSG:4326\n * * `EPSG:3857`: EPSG:102100, EPSG:102113, EPSG:900913,\n *     urn:ogc:def:crs:EPSG:6.18:3:3857,\n *     http://www.opengis.net/gml/srs/epsg.xml#3857\n *\n * If you use proj4js, aliases can be added using `proj4.defs()`; see\n * [documentation](https://github.com/proj4js/proj4js). To set an alternative\n * namespace for proj4, use {@link ol.proj.setProj4}.\n *\n * @constructor\n * @param {olx.ProjectionOptions} options Projection options.\n * @struct\n * @api\n */\nconst Projection = function(options) {\n  /**\n   * @private\n   * @type {string}\n   */\n  this.code_ = options.code;\n\n  /**\n   * Units of projected coordinates. When set to `ol.proj.Units.TILE_PIXELS`, a\n   * `this.extent_` and `this.worldExtent_` must be configured properly for each\n   * tile.\n   * @private\n   * @type {ol.proj.Units}\n   */\n  this.units_ = /** @type {ol.proj.Units} */ (options.units);\n\n  /**\n   * Validity extent of the projection in projected coordinates. For projections\n   * with `ol.proj.Units.TILE_PIXELS` units, this is the extent of the tile in\n   * tile pixel space.\n   * @private\n   * @type {ol.Extent}\n   */\n  this.extent_ = options.extent !== undefined ? options.extent : null;\n\n  /**\n   * Extent of the world in EPSG:4326. For projections with\n   * `ol.proj.Units.TILE_PIXELS` units, this is the extent of the tile in\n   * projected coordinate space.\n   * @private\n   * @type {ol.Extent}\n   */\n  this.worldExtent_ = options.worldExtent !== undefined ?\n    options.worldExtent : null;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.axisOrientation_ = options.axisOrientation !== undefined ?\n    options.axisOrientation : 'enu';\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.global_ = options.global !== undefined ? options.global : false;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.canWrapX_ = !!(this.global_ && this.extent_);\n\n  /**\n   * @private\n   * @type {function(number, ol.Coordinate):number|undefined}\n   */\n  this.getPointResolutionFunc_ = options.getPointResolution;\n\n  /**\n   * @private\n   * @type {ol.tilegrid.TileGrid}\n   */\n  this.defaultTileGrid_ = null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.metersPerUnit_ = options.metersPerUnit;\n};\n\n\n/**\n * @return {boolean} The projection is suitable for wrapping the x-axis\n */\nProjection.prototype.canWrapX = function() {\n  return this.canWrapX_;\n};\n\n\n/**\n * Get the code for this projection, e.g. 'EPSG:4326'.\n * @return {string} Code.\n * @api\n */\nProjection.prototype.getCode = function() {\n  return this.code_;\n};\n\n\n/**\n * Get the validity extent for this projection.\n * @return {ol.Extent} Extent.\n * @api\n */\nProjection.prototype.getExtent = function() {\n  return this.extent_;\n};\n\n\n/**\n * Get the units of this projection.\n * @return {ol.proj.Units} Units.\n * @api\n */\nProjection.prototype.getUnits = function() {\n  return this.units_;\n};\n\n\n/**\n * Get the amount of meters per unit of this projection.  If the projection is\n * not configured with `metersPerUnit` or a units identifier, the return is\n * `undefined`.\n * @return {number|undefined} Meters.\n * @api\n */\nProjection.prototype.getMetersPerUnit = function() {\n  return this.metersPerUnit_ || METERS_PER_UNIT[this.units_];\n};\n\n\n/**\n * Get the world extent for this projection.\n * @return {ol.Extent} Extent.\n * @api\n */\nProjection.prototype.getWorldExtent = function() {\n  return this.worldExtent_;\n};\n\n\n/**\n * Get the axis orientation of this projection.\n * Example values are:\n * enu - the default easting, northing, elevation.\n * neu - northing, easting, up - useful for \"lat/long\" geographic coordinates,\n *     or south orientated transverse mercator.\n * wnu - westing, northing, up - some planetary coordinate systems have\n *     \"west positive\" coordinate systems\n * @return {string} Axis orientation.\n * @api\n */\nProjection.prototype.getAxisOrientation = function() {\n  return this.axisOrientation_;\n};\n\n\n/**\n * Is this projection a global projection which spans the whole world?\n * @return {boolean} Whether the projection is global.\n * @api\n */\nProjection.prototype.isGlobal = function() {\n  return this.global_;\n};\n\n\n/**\n* Set if the projection is a global projection which spans the whole world\n* @param {boolean} global Whether the projection is global.\n* @api\n*/\nProjection.prototype.setGlobal = function(global) {\n  this.global_ = global;\n  this.canWrapX_ = !!(global && this.extent_);\n};\n\n\n/**\n * @return {ol.tilegrid.TileGrid} The default tile grid.\n */\nProjection.prototype.getDefaultTileGrid = function() {\n  return this.defaultTileGrid_;\n};\n\n\n/**\n * @param {ol.tilegrid.TileGrid} tileGrid The default tile grid.\n */\nProjection.prototype.setDefaultTileGrid = function(tileGrid) {\n  this.defaultTileGrid_ = tileGrid;\n};\n\n\n/**\n * Set the validity extent for this projection.\n * @param {ol.Extent} extent Extent.\n * @api\n */\nProjection.prototype.setExtent = function(extent) {\n  this.extent_ = extent;\n  this.canWrapX_ = !!(this.global_ && extent);\n};\n\n\n/**\n * Set the world extent for this projection.\n * @param {ol.Extent} worldExtent World extent\n *     [minlon, minlat, maxlon, maxlat].\n * @api\n */\nProjection.prototype.setWorldExtent = function(worldExtent) {\n  this.worldExtent_ = worldExtent;\n};\n\n\n/**\n * Set the getPointResolution function (see {@link ol.proj#getPointResolution}\n * for this projection.\n * @param {function(number, ol.Coordinate):number} func Function\n * @api\n */\nProjection.prototype.setGetPointResolution = function(func) {\n  this.getPointResolutionFunc_ = func;\n};\n\n\n/**\n * Get the custom point resolution function for this projection (if set).\n * @return {function(number, ol.Coordinate):number|undefined} The custom point\n * resolution function (if set).\n */\nProjection.prototype.getPointResolutionFunc = function() {\n  return this.getPointResolutionFunc_;\n};\nexport default Projection;\n","/**\n * @module ol/proj/Units\n */\n\n/**\n * Projection units: `'degrees'`, `'ft'`, `'m'`, `'pixels'`, `'tile-pixels'` or\n * `'us-ft'`.\n * @enum {string}\n */\nconst Units = {\n  DEGREES: 'degrees',\n  FEET: 'ft',\n  METERS: 'm',\n  PIXELS: 'pixels',\n  TILE_PIXELS: 'tile-pixels',\n  USFEET: 'us-ft'\n};\n\n\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Object.<ol.proj.Units, number>}\n * @api\n */\nexport const METERS_PER_UNIT = {};\n// use the radius of the Normal sphere\nMETERS_PER_UNIT[Units.DEGREES] = 2 * Math.PI * 6370997 / 360;\nMETERS_PER_UNIT[Units.FEET] = 0.3048;\nMETERS_PER_UNIT[Units.METERS] = 1;\nMETERS_PER_UNIT[Units.USFEET] = 1200 / 3937;\n\nexport default Units;\n","/**\n * @module ol/proj/epsg3857\n */\nimport {inherits} from '../index.js';\nimport {cosh} from '../math.js';\nimport Projection from '../proj/Projection.js';\nimport Units from '../proj/Units.js';\n\n\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const HALF_SIZE = Math.PI * RADIUS;\n\n\n/**\n * @const\n * @type {ol.Extent}\n */\nexport const EXTENT = [\n  -HALF_SIZE, -HALF_SIZE,\n  HALF_SIZE, HALF_SIZE\n];\n\n\n/**\n * @const\n * @type {ol.Extent}\n */\nexport const WORLD_EXTENT = [-180, -85, 180, 85];\n\n\n/**\n * @classdesc\n * Projection object for web/spherical Mercator (EPSG:3857).\n *\n * @constructor\n * @extends {ol.proj.Projection}\n * @param {string} code Code.\n */\nfunction EPSG3857Projection(code) {\n  Projection.call(this, {\n    code: code,\n    units: Units.METERS,\n    extent: EXTENT,\n    global: true,\n    worldExtent: WORLD_EXTENT,\n    getPointResolution: function(resolution, point) {\n      return resolution / cosh(point[1] / RADIUS);\n    }\n  });\n}\ninherits(EPSG3857Projection, Projection);\n\n\n/**\n * Projections equal to EPSG:3857.\n *\n * @const\n * @type {Array.<ol.proj.Projection>}\n */\nexport const PROJECTIONS = [\n  new EPSG3857Projection('EPSG:3857'),\n  new EPSG3857Projection('EPSG:102100'),\n  new EPSG3857Projection('EPSG:102113'),\n  new EPSG3857Projection('EPSG:900913'),\n  new EPSG3857Projection('urn:ogc:def:crs:EPSG:6.18:3:3857'),\n  new EPSG3857Projection('urn:ogc:def:crs:EPSG::3857'),\n  new EPSG3857Projection('http://www.opengis.net/gml/srs/epsg.xml#3857')\n];\n\n\n/**\n * Transformation from EPSG:4326 to EPSG:3857.\n *\n * @param {Array.<number>} input Input array of coordinate values.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array.<number>} Output array of coordinate values.\n */\nexport function fromEPSG4326(input, opt_output, opt_dimension) {\n  const length = input.length;\n  const dimension = opt_dimension > 1 ? opt_dimension : 2;\n  let output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  const halfSize = HALF_SIZE;\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = halfSize * input[i] / 180;\n    let y = RADIUS *\n        Math.log(Math.tan(Math.PI * (input[i + 1] + 90) / 360));\n    if (y > halfSize) {\n      y = halfSize;\n    } else if (y < -halfSize) {\n      y = -halfSize;\n    }\n    output[i + 1] = y;\n  }\n  return output;\n}\n\n\n/**\n * Transformation from EPSG:3857 to EPSG:4326.\n *\n * @param {Array.<number>} input Input array of coordinate values.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array.<number>} Output array of coordinate values.\n */\nexport function toEPSG4326(input, opt_output, opt_dimension) {\n  const length = input.length;\n  const dimension = opt_dimension > 1 ? opt_dimension : 2;\n  let output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = 180 * input[i] / HALF_SIZE;\n    output[i + 1] = 360 * Math.atan(\n      Math.exp(input[i + 1] / RADIUS)) / Math.PI - 90;\n  }\n  return output;\n}\n","/**\n * @module ol/proj/epsg4326\n */\nimport {inherits} from '../index.js';\nimport Projection from '../proj/Projection.js';\nimport Units from '../proj/Units.js';\n\n\n/**\n * Semi-major radius of the WGS84 ellipsoid.\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n\n/**\n * Extent of the EPSG:4326 projection which is the whole world.\n *\n * @const\n * @type {ol.Extent}\n */\nexport const EXTENT = [-180, -90, 180, 90];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const METERS_PER_UNIT = Math.PI * RADIUS / 180;\n\n\n/**\n * @classdesc\n * Projection object for WGS84 geographic coordinates (EPSG:4326).\n *\n * Note that OpenLayers does not strictly comply with the EPSG definition.\n * The EPSG registry defines 4326 as a CRS for Latitude,Longitude (y,x).\n * OpenLayers treats EPSG:4326 as a pseudo-projection, with x,y coordinates.\n *\n * @constructor\n * @extends {ol.proj.Projection}\n * @param {string} code Code.\n * @param {string=} opt_axisOrientation Axis orientation.\n */\nfunction EPSG4326Projection(code, opt_axisOrientation) {\n  Projection.call(this, {\n    code: code,\n    units: Units.DEGREES,\n    extent: EXTENT,\n    axisOrientation: opt_axisOrientation,\n    global: true,\n    metersPerUnit: METERS_PER_UNIT,\n    worldExtent: EXTENT\n  });\n}\ninherits(EPSG4326Projection, Projection);\n\n\n/**\n * Projections equal to EPSG:4326.\n *\n * @const\n * @type {Array.<ol.proj.Projection>}\n */\nexport const PROJECTIONS = [\n  new EPSG4326Projection('CRS:84'),\n  new EPSG4326Projection('EPSG:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:EPSG::4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:EPSG:6.6:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:1.3:CRS84'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:2:84'),\n  new EPSG4326Projection('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'),\n  new EPSG4326Projection('urn:x-ogc:def:crs:EPSG:4326', 'neu')\n];\n","/**\n * @module ol/proj/projections\n */\n\n\n/**\n * @type {Object.<string, ol.proj.Projection>}\n */\nlet cache = {};\n\n\n/**\n * Clear the projections cache.\n */\nexport function clear() {\n  cache = {};\n}\n\n\n/**\n * Get a cached projection by code.\n * @param {string} code The code for the projection.\n * @return {ol.proj.Projection} The projection (if cached).\n */\nexport function get(code) {\n  return cache[code] || null;\n}\n\n\n/**\n * Add a projection to the cache.\n * @param {string} code The projection code.\n * @param {ol.proj.Projection} projection The projection to cache.\n */\nexport function add(code, projection) {\n  cache[code] = projection;\n}\n","/**\n * @module ol/proj/transforms\n */\nimport {isEmpty} from '../obj.js';\n\n\n/**\n * @private\n * @type {Object.<string, Object.<string, ol.TransformFunction>>}\n */\nlet transforms = {};\n\n\n/**\n * Clear the transform cache.\n */\nexport function clear() {\n  transforms = {};\n}\n\n\n/**\n * Registers a conversion function to convert coordinates from the source\n * projection to the destination projection.\n *\n * @param {ol.proj.Projection} source Source.\n * @param {ol.proj.Projection} destination Destination.\n * @param {ol.TransformFunction} transformFn Transform.\n */\nexport function add(source, destination, transformFn) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  if (!(sourceCode in transforms)) {\n    transforms[sourceCode] = {};\n  }\n  transforms[sourceCode][destinationCode] = transformFn;\n}\n\n\n/**\n * Unregisters the conversion function to convert coordinates from the source\n * projection to the destination projection.  This method is used to clean up\n * cached transforms during testing.\n *\n * @param {ol.proj.Projection} source Source projection.\n * @param {ol.proj.Projection} destination Destination projection.\n * @return {ol.TransformFunction} transformFn The unregistered transform.\n */\nexport function remove(source, destination) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  const transform = transforms[sourceCode][destinationCode];\n  delete transforms[sourceCode][destinationCode];\n  if (isEmpty(transforms[sourceCode])) {\n    delete transforms[sourceCode];\n  }\n  return transform;\n}\n\n\n/**\n * Get a transform given a source code and a destination code.\n * @param {string} sourceCode The code for the source projection.\n * @param {string} destinationCode The code for the destination projection.\n * @return {ol.TransformFunction|undefined} The transform function (if found).\n */\nexport function get(sourceCode, destinationCode) {\n  let transform;\n  if (sourceCode in transforms && destinationCode in transforms[sourceCode]) {\n    transform = transforms[sourceCode][destinationCode];\n  }\n  return transform;\n}\n","/**\n * @module ol/render/canvas\n */\nimport {getFontFamilies} from '../css.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {clear} from '../obj.js';\nimport LRUCache from '../structs/LRUCache.js';\nimport {create as createTransform} from '../transform.js';\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultFont = '10px sans-serif';\n\n\n/**\n * @const\n * @type {ol.Color}\n */\nexport const defaultFillStyle = [0, 0, 0, 1];\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultLineCap = 'round';\n\n\n/**\n * @const\n * @type {Array.<number>}\n */\nexport const defaultLineDash = [];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineDashOffset = 0;\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultLineJoin = 'round';\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultMiterLimit = 10;\n\n\n/**\n * @const\n * @type {ol.Color}\n */\nexport const defaultStrokeStyle = [0, 0, 0, 1];\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultTextAlign = 'center';\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultTextBaseline = 'middle';\n\n\n/**\n * @const\n * @type {Array.<number>}\n */\nexport const defaultPadding = [0, 0, 0, 0];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineWidth = 1;\n\n\n/**\n * The label cache for text rendering. To change the default cache size of 2048\n * entries, use {@link ol.structs.LRUCache#setSize}.\n * @type {ol.structs.LRUCache.<HTMLCanvasElement>}\n * @api\n */\nexport const labelCache = new LRUCache();\n\n\n/**\n * @type {!Object.<string, number>}\n */\nexport const checkedFonts = {};\n\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet measureContext = null;\n\n\n/**\n * @type {!Object.<string, number>}\n */\nexport const textHeights = {};\n\n\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\nexport const checkFont = (function() {\n  const retries = 60;\n  const checked = checkedFonts;\n  const size = '32px ';\n  const referenceFonts = ['monospace', 'serif'];\n  const len = referenceFonts.length;\n  const text = 'wmytzilWMYTZIL@#/&?$%10\\uF013';\n  let interval, referenceWidth;\n\n  function isAvailable(font) {\n    const context = getMeasureContext();\n    let available = true;\n    for (let i = 0; i < len; ++i) {\n      const referenceFont = referenceFonts[i];\n      context.font = size + referenceFont;\n      referenceWidth = context.measureText(text).width;\n      if (font != referenceFont) {\n        context.font = size + font + ',' + referenceFont;\n        const width = context.measureText(text).width;\n        // If width and referenceWidth are the same, then the fallback was used\n        // instead of the font we wanted, so the font is not available.\n        available = available && width != referenceWidth;\n      }\n    }\n    return available;\n  }\n\n  function check() {\n    let done = true;\n    for (const font in checked) {\n      if (checked[font] < retries) {\n        if (isAvailable(font)) {\n          checked[font] = retries;\n          clear(textHeights);\n          // Make sure that loaded fonts are picked up by Safari\n          measureContext = null;\n          labelCache.clear();\n        } else {\n          ++checked[font];\n          done = false;\n        }\n      }\n    }\n    if (done) {\n      clearInterval(interval);\n      interval = undefined;\n    }\n  }\n\n  return function(fontSpec) {\n    const fontFamilies = getFontFamilies(fontSpec);\n    if (!fontFamilies) {\n      return;\n    }\n    for (let i = 0, ii = fontFamilies.length; i < ii; ++i) {\n      const fontFamily = fontFamilies[i];\n      if (!(fontFamily in checked)) {\n        checked[fontFamily] = retries;\n        if (!isAvailable(fontFamily)) {\n          checked[fontFamily] = 0;\n          if (interval === undefined) {\n            interval = setInterval(check, 32);\n          }\n        }\n      }\n    }\n  };\n})();\n\n\n/**\n * @return {CanvasRenderingContext2D} Measure context.\n */\nfunction getMeasureContext() {\n  if (!measureContext) {\n    measureContext = createCanvasContext2D(1, 1);\n  }\n  return measureContext;\n}\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @return {ol.Size} Measurement.\n */\nexport const measureTextHeight = (function() {\n  let span;\n  const heights = textHeights;\n  return function(font) {\n    let height = heights[font];\n    if (height == undefined) {\n      if (!span) {\n        span = document.createElement('span');\n        span.textContent = 'M';\n        span.style.margin = span.style.padding = '0 !important';\n        span.style.position = 'absolute !important';\n        span.style.left = '-99999px !important';\n      }\n      span.style.font = font;\n      document.body.appendChild(span);\n      height = heights[font] = span.offsetHeight;\n      document.body.removeChild(span);\n    }\n    return height;\n  };\n})();\n\n\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\nexport function measureTextWidth(font, text) {\n  const measureContext = getMeasureContext();\n  if (font != measureContext.font) {\n    measureContext.font = font;\n  }\n  return measureContext.measureText(text).width;\n}\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\nexport function rotateAtOffset(context, rotation, offsetX, offsetY) {\n  if (rotation !== 0) {\n    context.translate(offsetX, offsetY);\n    context.rotate(rotation);\n    context.translate(-offsetX, -offsetY);\n  }\n}\n\n\nexport const resetTransform = createTransform();\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {ol.Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} scale Scale.\n */\nexport function drawImage(context,\n  transform, opacity, image, originX, originY, w, h, x, y, scale) {\n  let alpha;\n  if (opacity != 1) {\n    alpha = context.globalAlpha;\n    context.globalAlpha = alpha * opacity;\n  }\n  if (transform) {\n    context.setTransform.apply(context, transform);\n  }\n\n  context.drawImage(image, originX, originY, w, h, x, y, w * scale, h * scale);\n\n  if (alpha) {\n    context.globalAlpha = alpha;\n  }\n  if (transform) {\n    context.setTransform.apply(context, resetTransform);\n  }\n}\n","/**\n* @license\n* Latitude/longitude spherical geodesy formulae taken from\n* http://www.movable-type.co.uk/scripts/latlong.html\n* Licensed under CC-BY-3.0.\n*/\n\n/**\n * @module ol/sphere\n */\nimport {toRadians, toDegrees} from './math.js';\nimport GeometryType from './geom/GeometryType.js';\n\n\n/**\n * Object literal with options for the {@link getLength} or\n * {@link getArea} functions.\n * @typedef {{projection: (ol.ProjectionLike|undefined),\n *    radius: (number|undefined)}}\n */\nexport let SphereMetricOptions;\n\n\n/**\n * The mean Earth radius (1/3 * (2a + b)) for the WGS84 ellipsoid.\n * https://en.wikipedia.org/wiki/Earth_radius#Mean_radius\n * @type {number}\n */\nexport const DEFAULT_RADIUS = 6371008.8;\n\n\n/**\n * Get the great circle distance (in meters) between two geographic coordinates.\n * @param {Array} c1 Starting coordinate.\n * @param {Array} c2 Ending coordinate.\n * @param {number=} opt_radius The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {number} The great circle distance between the points (in meters).\n * @api\n */\nexport function getDistance(c1, c2, opt_radius) {\n  const radius = opt_radius || DEFAULT_RADIUS;\n  const lat1 = toRadians(c1[1]);\n  const lat2 = toRadians(c2[1]);\n  const deltaLatBy2 = (lat2 - lat1) / 2;\n  const deltaLonBy2 = toRadians(c2[0] - c1[0]) / 2;\n  const a = Math.sin(deltaLatBy2) * Math.sin(deltaLatBy2) +\n      Math.sin(deltaLonBy2) * Math.sin(deltaLonBy2) *\n      Math.cos(lat1) * Math.cos(lat2);\n  return 2 * radius * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n}\n\n\n/**\n * Get the cumulative great circle length of linestring coordinates (geographic).\n * @param {Array} coordinates Linestring coordinates.\n * @param {number} radius The sphere radius to use.\n * @return {number} The length (in meters).\n */\nfunction getLengthInternal(coordinates, radius) {\n  let length = 0;\n  for (let i = 0, ii = coordinates.length; i < ii - 1; ++i) {\n    length += getDistance(coordinates[i], coordinates[i + 1], radius);\n  }\n  return length;\n}\n\n\n/**\n * Get the spherical length of a geometry.  This length is the sum of the\n * great circle distances between coordinates.  For polygons, the length is\n * the sum of all rings.  For points, the length is zero.  For multi-part\n * geometries, the length is the sum of the length of each part.\n * @param {ol.geom.Geometry} geometry A geometry.\n * @param {SphereMetricOptions=} opt_options Options for the length\n *     calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n *     You can change this by providing a `projection` option.\n * @param {(ol.ProjectionLike|undefined)} opt_options.projection Projection of\n *     the geometry.  By default, the geometry is assumed to be in EPSG:3857\n *     (Web Mercator).\n * @param {(number|undefined)} opt_options.radius Sphere radius.  Defaults to\n *     the Earth's mean radius using the WGS84 ellipsoid.\n * @return {number} The spherical length (in meters).\n * @api\n */\nexport function getLength(geometry, opt_options) {\n  const options = opt_options || {};\n  const radius = options.radius || DEFAULT_RADIUS;\n  const projection = options.projection || 'EPSG:3857';\n  const type = geometry.getType();\n  if (type !== GeometryType.GEOMETRY_COLLECTION) {\n    geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  }\n  let length = 0;\n  let coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case GeometryType.POINT:\n    case GeometryType.MULTI_POINT: {\n      break;\n    }\n    case GeometryType.LINE_STRING:\n    case GeometryType.LINEAR_RING: {\n      coordinates = /** @type {ol.geom.SimpleGeometry} */ (geometry).getCoordinates();\n      length = getLengthInternal(coordinates, radius);\n      break;\n    }\n    case GeometryType.MULTI_LINE_STRING:\n    case GeometryType.POLYGON: {\n      coordinates = /** @type {ol.geom.SimpleGeometry} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        length += getLengthInternal(coordinates[i], radius);\n      }\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      coordinates = /** @type {ol.geom.SimpleGeometry} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        for (j = 0, jj = coords.length; j < jj; ++j) {\n          length += getLengthInternal(coords[j], radius);\n        }\n      }\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      const geometries = /** @type {ol.geom.GeometryCollection} */ (geometry).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        length += getLength(geometries[i], opt_options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return length;\n}\n\n\n/**\n * Returns the spherical area for a list of coordinates.\n *\n * [Reference](https://trs-new.jpl.nasa.gov/handle/2014/40409)\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n * Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n * Laboratory, Pasadena, CA, June 2007\n *\n * @param {Array.<ol.Coordinate>} coordinates List of coordinates of a linear\n * ring. If the ring is oriented clockwise, the area will be positive,\n * otherwise it will be negative.\n * @param {number} radius The sphere radius.\n * @return {number} Area (in square meters).\n */\nfunction getAreaInternal(coordinates, radius) {\n  let area = 0;\n  const len = coordinates.length;\n  let x1 = coordinates[len - 1][0];\n  let y1 = coordinates[len - 1][1];\n  for (let i = 0; i < len; i++) {\n    const x2 = coordinates[i][0];\n    const y2 = coordinates[i][1];\n    area += toRadians(x2 - x1) *\n        (2 + Math.sin(toRadians(y1)) +\n        Math.sin(toRadians(y2)));\n    x1 = x2;\n    y1 = y2;\n  }\n  return area * radius * radius / 2.0;\n}\n\n\n/**\n * Get the spherical area of a geometry.  This is the area (in meters) assuming\n * that polygon edges are segments of great circles on a sphere.\n * @param {ol.geom.Geometry} geometry A geometry.\n * @param {SphereMetricOptions=} opt_options Options for the area\n *     calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n *     You can change this by providing a `projection` option.\n * @return {number} The spherical area (in square meters).\n * @api\n */\nexport function getArea(geometry, opt_options) {\n  const options = opt_options || {};\n  const radius = options.radius || DEFAULT_RADIUS;\n  const projection = options.projection || 'EPSG:3857';\n  const type = geometry.getType();\n  if (type !== GeometryType.GEOMETRY_COLLECTION) {\n    geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  }\n  let area = 0;\n  let coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case GeometryType.POINT:\n    case GeometryType.MULTI_POINT:\n    case GeometryType.LINE_STRING:\n    case GeometryType.MULTI_LINE_STRING:\n    case GeometryType.LINEAR_RING: {\n      break;\n    }\n    case GeometryType.POLYGON: {\n      coordinates = /** @type {ol.geom.Polygon} */ (geometry).getCoordinates();\n      area = Math.abs(getAreaInternal(coordinates[0], radius));\n      for (i = 1, ii = coordinates.length; i < ii; ++i) {\n        area -= Math.abs(getAreaInternal(coordinates[i], radius));\n      }\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      coordinates = /** @type {ol.geom.SimpleGeometry} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        area += Math.abs(getAreaInternal(coords[0], radius));\n        for (j = 1, jj = coords.length; j < jj; ++j) {\n          area -= Math.abs(getAreaInternal(coords[j], radius));\n        }\n      }\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      const geometries = /** @type {ol.geom.GeometryCollection} */ (geometry).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        area += getArea(geometries[i], opt_options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return area;\n}\n\n\n/**\n * Returns the coordinate at the given distance and bearing from `c1`.\n *\n * @param {ol.Coordinate} c1 The origin point (`[lon, lat]` in degrees).\n * @param {number} distance The great-circle distance between the origin\n *     point and the target point.\n * @param {number} bearing The bearing (in radians).\n * @param {number=} opt_radius The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {ol.Coordinate} The target point.\n */\nexport function offset(c1, distance, bearing, opt_radius) {\n  const radius = opt_radius || DEFAULT_RADIUS;\n  const lat1 = toRadians(c1[1]);\n  const lon1 = toRadians(c1[0]);\n  const dByR = distance / radius;\n  const lat = Math.asin(\n    Math.sin(lat1) * Math.cos(dByR) +\n      Math.cos(lat1) * Math.sin(dByR) * Math.cos(bearing));\n  const lon = lon1 + Math.atan2(\n    Math.sin(bearing) * Math.sin(dByR) * Math.cos(lat1),\n    Math.cos(dByR) - Math.sin(lat1) * Math.sin(lat));\n  return [toDegrees(lon), toDegrees(lat)];\n}\n","/**\n * @module ol/structs/LRUCache\n */\nimport {inherits} from '../index.js';\nimport {assert} from '../asserts.js';\nimport EventTarget from '../events/EventTarget.js';\nimport EventType from '../events/EventType.js';\n\n/**\n * Implements a Least-Recently-Used cache where the keys do not conflict with\n * Object's properties (e.g. 'hasOwnProperty' is not allowed as a key). Expiring\n * items from the cache is the responsibility of the user.\n * @constructor\n * @extends {ol.events.EventTarget}\n * @fires ol.events.Event\n * @struct\n * @template T\n * @param {number=} opt_highWaterMark High water mark.\n */\nconst LRUCache = function(opt_highWaterMark) {\n\n  EventTarget.call(this);\n\n  /**\n   * @type {number}\n   */\n  this.highWaterMark = opt_highWaterMark !== undefined ? opt_highWaterMark : 2048;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.count_ = 0;\n\n  /**\n   * @private\n   * @type {!Object.<string, ol.LRUCacheEntry>}\n   */\n  this.entries_ = {};\n\n  /**\n   * @private\n   * @type {?ol.LRUCacheEntry}\n   */\n  this.oldest_ = null;\n\n  /**\n   * @private\n   * @type {?ol.LRUCacheEntry}\n   */\n  this.newest_ = null;\n\n};\n\ninherits(LRUCache, EventTarget);\n\n\n/**\n * @return {boolean} Can expire cache.\n */\nLRUCache.prototype.canExpireCache = function() {\n  return this.getCount() > this.highWaterMark;\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\nLRUCache.prototype.clear = function() {\n  this.count_ = 0;\n  this.entries_ = {};\n  this.oldest_ = null;\n  this.newest_ = null;\n  this.dispatchEvent(EventType.CLEAR);\n};\n\n\n/**\n * @param {string} key Key.\n * @return {boolean} Contains key.\n */\nLRUCache.prototype.containsKey = function(key) {\n  return this.entries_.hasOwnProperty(key);\n};\n\n\n/**\n * @param {function(this: S, T, string, ol.structs.LRUCache): ?} f The function\n *     to call for every entry from the oldest to the newer. This function takes\n *     3 arguments (the entry value, the entry key and the LRUCache object).\n *     The return value is ignored.\n * @param {S=} opt_this The object to use as `this` in `f`.\n * @template S\n */\nLRUCache.prototype.forEach = function(f, opt_this) {\n  let entry = this.oldest_;\n  while (entry) {\n    f.call(opt_this, entry.value_, entry.key_, this);\n    entry = entry.newer;\n  }\n};\n\n\n/**\n * @param {string} key Key.\n * @return {T} Value.\n */\nLRUCache.prototype.get = function(key) {\n  const entry = this.entries_[key];\n  assert(entry !== undefined,\n    15); // Tried to get a value for a key that does not exist in the cache\n  if (entry === this.newest_) {\n    return entry.value_;\n  } else if (entry === this.oldest_) {\n    this.oldest_ = /** @type {ol.LRUCacheEntry} */ (this.oldest_.newer);\n    this.oldest_.older = null;\n  } else {\n    entry.newer.older = entry.older;\n    entry.older.newer = entry.newer;\n  }\n  entry.newer = null;\n  entry.older = this.newest_;\n  this.newest_.newer = entry;\n  this.newest_ = entry;\n  return entry.value_;\n};\n\n\n/**\n * Remove an entry from the cache.\n * @param {string} key The entry key.\n * @return {T} The removed entry.\n */\nLRUCache.prototype.remove = function(key) {\n  const entry = this.entries_[key];\n  assert(entry !== undefined, 15); // Tried to get a value for a key that does not exist in the cache\n  if (entry === this.newest_) {\n    this.newest_ = /** @type {ol.LRUCacheEntry} */ (entry.older);\n    if (this.newest_) {\n      this.newest_.newer = null;\n    }\n  } else if (entry === this.oldest_) {\n    this.oldest_ = /** @type {ol.LRUCacheEntry} */ (entry.newer);\n    if (this.oldest_) {\n      this.oldest_.older = null;\n    }\n  } else {\n    entry.newer.older = entry.older;\n    entry.older.newer = entry.newer;\n  }\n  delete this.entries_[key];\n  --this.count_;\n  return entry.value_;\n};\n\n\n/**\n * @return {number} Count.\n */\nLRUCache.prototype.getCount = function() {\n  return this.count_;\n};\n\n\n/**\n * @return {Array.<string>} Keys.\n */\nLRUCache.prototype.getKeys = function() {\n  const keys = new Array(this.count_);\n  let i = 0;\n  let entry;\n  for (entry = this.newest_; entry; entry = entry.older) {\n    keys[i++] = entry.key_;\n  }\n  return keys;\n};\n\n\n/**\n * @return {Array.<T>} Values.\n */\nLRUCache.prototype.getValues = function() {\n  const values = new Array(this.count_);\n  let i = 0;\n  let entry;\n  for (entry = this.newest_; entry; entry = entry.older) {\n    values[i++] = entry.value_;\n  }\n  return values;\n};\n\n\n/**\n * @return {T} Last value.\n */\nLRUCache.prototype.peekLast = function() {\n  return this.oldest_.value_;\n};\n\n\n/**\n * @return {string} Last key.\n */\nLRUCache.prototype.peekLastKey = function() {\n  return this.oldest_.key_;\n};\n\n\n/**\n * Get the key of the newest item in the cache.  Throws if the cache is empty.\n * @return {string} The newest key.\n */\nLRUCache.prototype.peekFirstKey = function() {\n  return this.newest_.key_;\n};\n\n\n/**\n * @return {T} value Value.\n */\nLRUCache.prototype.pop = function() {\n  const entry = this.oldest_;\n  delete this.entries_[entry.key_];\n  if (entry.newer) {\n    entry.newer.older = null;\n  }\n  this.oldest_ = /** @type {ol.LRUCacheEntry} */ (entry.newer);\n  if (!this.oldest_) {\n    this.newest_ = null;\n  }\n  --this.count_;\n  return entry.value_;\n};\n\n\n/**\n * @param {string} key Key.\n * @param {T} value Value.\n */\nLRUCache.prototype.replace = function(key, value) {\n  this.get(key);  // update `newest_`\n  this.entries_[key].value_ = value;\n};\n\n\n/**\n * @param {string} key Key.\n * @param {T} value Value.\n */\nLRUCache.prototype.set = function(key, value) {\n  assert(!(key in this.entries_),\n    16); // Tried to set a value for a key that is used already\n  const entry = /** @type {ol.LRUCacheEntry} */ ({\n    key_: key,\n    newer: null,\n    older: this.newest_,\n    value_: value\n  });\n  if (!this.newest_) {\n    this.oldest_ = entry;\n  } else {\n    this.newest_.newer = entry;\n  }\n  this.newest_ = entry;\n  this.entries_[key] = entry;\n  ++this.count_;\n};\n\n\n/**\n * Set a maximum number of entries for the cache.\n * @param {number} size Cache size.\n * @api\n */\nLRUCache.prototype.setSize = function(size) {\n  this.highWaterMark = size;\n};\n\n\n/**\n * Prune the cache.\n */\nLRUCache.prototype.prune = function() {\n  while (this.canExpireCache()) {\n    this.pop();\n  }\n};\nexport default LRUCache;\n","/**\n * @module ol/style\n */\nimport IconImageCache from './style/IconImageCache.js';\n\n/**\n * The {@link ol.style.IconImageCache} for {@link ol.style.Icon} images.\n * @api\n */\nexport const iconImageCache = new IconImageCache();\n","/**\n * @module ol/style/Circle\n */\nimport {inherits} from '../index.js';\nimport RegularShape from '../style/RegularShape.js';\n\n/**\n * @classdesc\n * Set circle style for vector features.\n *\n * @constructor\n * @param {olx.style.CircleOptions=} opt_options Options.\n * @extends {ol.style.RegularShape}\n * @api\n */\nconst CircleStyle = function(opt_options) {\n\n  const options = opt_options || {};\n\n  RegularShape.call(this, {\n    points: Infinity,\n    fill: options.fill,\n    radius: options.radius,\n    snapToPixel: options.snapToPixel,\n    stroke: options.stroke,\n    atlasManager: options.atlasManager\n  });\n\n};\n\ninherits(CircleStyle, RegularShape);\n\n\n/**\n * Clones the style.  If an atlasmanager was provided to the original style it will be used in the cloned style, too.\n * @return {ol.style.Circle} The cloned style.\n * @override\n * @api\n */\nCircleStyle.prototype.clone = function() {\n  const style = new CircleStyle({\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n    radius: this.getRadius(),\n    snapToPixel: this.getSnapToPixel(),\n    atlasManager: this.atlasManager_\n  });\n  style.setOpacity(this.getOpacity());\n  style.setScale(this.getScale());\n  return style;\n};\n\n\n/**\n * Set the circle radius.\n *\n * @param {number} radius Circle radius.\n * @api\n */\nCircleStyle.prototype.setRadius = function(radius) {\n  this.radius_ = radius;\n  this.render_(this.atlasManager_);\n};\nexport default CircleStyle;\n","/**\n * @module ol/style/Fill\n */\nimport {getUid} from '../index.js';\nimport {asString} from '../color.js';\n\n/**\n * @classdesc\n * Set fill style for vector features.\n *\n * @constructor\n * @param {olx.style.FillOptions=} opt_options Options.\n * @api\n */\nconst Fill = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {ol.Color|ol.ColorLike}\n   */\n  this.color_ = options.color !== undefined ? options.color : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Clones the style. The color is not cloned if it is an {@link ol.ColorLike}.\n * @return {ol.style.Fill} The cloned style.\n * @api\n */\nFill.prototype.clone = function() {\n  const color = this.getColor();\n  return new Fill({\n    color: (color && color.slice) ? color.slice() : color || undefined\n  });\n};\n\n\n/**\n * Get the fill color.\n * @return {ol.Color|ol.ColorLike} Color.\n * @api\n */\nFill.prototype.getColor = function() {\n  return this.color_;\n};\n\n\n/**\n * Set the color.\n *\n * @param {ol.Color|ol.ColorLike} color Color.\n * @api\n */\nFill.prototype.setColor = function(color) {\n  this.color_ = color;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * @return {string} The checksum.\n */\nFill.prototype.getChecksum = function() {\n  if (this.checksum_ === undefined) {\n    if (\n      this.color_ instanceof CanvasPattern ||\n        this.color_ instanceof CanvasGradient\n    ) {\n      this.checksum_ = getUid(this.color_).toString();\n    } else {\n      this.checksum_ = 'f' + (this.color_ ? asString(this.color_) : '-');\n    }\n  }\n\n  return this.checksum_;\n};\nexport default Fill;\n","/**\n * @module ol/style/IconAnchorUnits\n */\n\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n  FRACTION: 'fraction',\n  PIXELS: 'pixels'\n};\n","/**\n * @module ol/style/IconImage\n */\nimport {inherits} from '../index.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {listenOnce, unlistenByKey} from '../events.js';\nimport EventTarget from '../events/EventTarget.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport {iconImageCache} from '../style.js';\n\n/**\n * @constructor\n * @param {Image|HTMLCanvasElement} image Image.\n * @param {string|undefined} src Src.\n * @param {ol.Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {ol.ImageState} imageState Image state.\n * @param {ol.Color} color Color.\n * @extends {ol.events.EventTarget}\n */\nconst IconImage = function(image, src, size, crossOrigin, imageState, color) {\n\n  EventTarget.call(this);\n\n  /**\n   * @private\n   * @type {Image|HTMLCanvasElement}\n   */\n  this.hitDetectionImage_ = null;\n\n  /**\n   * @private\n   * @type {Image|HTMLCanvasElement}\n   */\n  this.image_ = !image ? new Image() : image;\n\n  if (crossOrigin !== null) {\n    this.image_.crossOrigin = crossOrigin;\n  }\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = color ?\n    /** @type {HTMLCanvasElement} */ (document.createElement('CANVAS')) :\n    null;\n\n  /**\n   * @private\n   * @type {ol.Color}\n   */\n  this.color_ = color;\n\n  /**\n   * @private\n   * @type {Array.<ol.EventsKey>}\n   */\n  this.imageListenerKeys_ = null;\n\n  /**\n   * @private\n   * @type {ol.ImageState}\n   */\n  this.imageState_ = imageState;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.size_ = size;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.src_ = src;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.tainting_ = false;\n  if (this.imageState_ == ImageState.LOADED) {\n    this.determineTainting_();\n  }\n\n};\n\ninherits(IconImage, EventTarget);\n\n\n/**\n * @param {Image|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {ol.Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {ol.ImageState} imageState Image state.\n * @param {ol.Color} color Color.\n * @return {ol.style.IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n  let iconImage = iconImageCache.get(src, crossOrigin, color);\n  if (!iconImage) {\n    iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n    iconImageCache.set(src, crossOrigin, color, iconImage);\n  }\n  return iconImage;\n}\n\n\n/**\n * @private\n */\nIconImage.prototype.determineTainting_ = function() {\n  const context = createCanvasContext2D(1, 1);\n  try {\n    context.drawImage(this.image_, 0, 0);\n    context.getImageData(0, 0, 1, 1);\n  } catch (e) {\n    this.tainting_ = true;\n  }\n};\n\n\n/**\n * @private\n */\nIconImage.prototype.dispatchChangeEvent_ = function() {\n  this.dispatchEvent(EventType.CHANGE);\n};\n\n\n/**\n * @private\n */\nIconImage.prototype.handleImageError_ = function() {\n  this.imageState_ = ImageState.ERROR;\n  this.unlistenImage_();\n  this.dispatchChangeEvent_();\n};\n\n\n/**\n * @private\n */\nIconImage.prototype.handleImageLoad_ = function() {\n  this.imageState_ = ImageState.LOADED;\n  if (this.size_) {\n    this.image_.width = this.size_[0];\n    this.image_.height = this.size_[1];\n  }\n  this.size_ = [this.image_.width, this.image_.height];\n  this.unlistenImage_();\n  this.determineTainting_();\n  this.replaceColor_();\n  this.dispatchChangeEvent_();\n};\n\n\n/**\n * @param {number} pixelRatio Pixel ratio.\n * @return {Image|HTMLCanvasElement} Image or Canvas element.\n */\nIconImage.prototype.getImage = function(pixelRatio) {\n  return this.canvas_ ? this.canvas_ : this.image_;\n};\n\n\n/**\n * @return {ol.ImageState} Image state.\n */\nIconImage.prototype.getImageState = function() {\n  return this.imageState_;\n};\n\n\n/**\n * @param {number} pixelRatio Pixel ratio.\n * @return {Image|HTMLCanvasElement} Image element.\n */\nIconImage.prototype.getHitDetectionImage = function(pixelRatio) {\n  if (!this.hitDetectionImage_) {\n    if (this.tainting_) {\n      const width = this.size_[0];\n      const height = this.size_[1];\n      const context = createCanvasContext2D(width, height);\n      context.fillRect(0, 0, width, height);\n      this.hitDetectionImage_ = context.canvas;\n    } else {\n      this.hitDetectionImage_ = this.image_;\n    }\n  }\n  return this.hitDetectionImage_;\n};\n\n\n/**\n * @return {ol.Size} Image size.\n */\nIconImage.prototype.getSize = function() {\n  return this.size_;\n};\n\n\n/**\n * @return {string|undefined} Image src.\n */\nIconImage.prototype.getSrc = function() {\n  return this.src_;\n};\n\n\n/**\n * Load not yet loaded URI.\n */\nIconImage.prototype.load = function() {\n  if (this.imageState_ == ImageState.IDLE) {\n    this.imageState_ = ImageState.LOADING;\n    this.imageListenerKeys_ = [\n      listenOnce(this.image_, EventType.ERROR,\n        this.handleImageError_, this),\n      listenOnce(this.image_, EventType.LOAD,\n        this.handleImageLoad_, this)\n    ];\n    try {\n      this.image_.src = this.src_;\n    } catch (e) {\n      this.handleImageError_();\n    }\n  }\n};\n\n\n/**\n * @private\n */\nIconImage.prototype.replaceColor_ = function() {\n  if (this.tainting_ || this.color_ === null) {\n    return;\n  }\n\n  this.canvas_.width = this.image_.width;\n  this.canvas_.height = this.image_.height;\n\n  const ctx = this.canvas_.getContext('2d');\n  ctx.drawImage(this.image_, 0, 0);\n\n  const imgData = ctx.getImageData(0, 0, this.image_.width, this.image_.height);\n  const data = imgData.data;\n  const r = this.color_[0] / 255.0;\n  const g = this.color_[1] / 255.0;\n  const b = this.color_[2] / 255.0;\n\n  for (let i = 0, ii = data.length; i < ii; i += 4) {\n    data[i] *= r;\n    data[i + 1] *= g;\n    data[i + 2] *= b;\n  }\n  ctx.putImageData(imgData, 0, 0);\n};\n\n\n/**\n * Discards event handlers which listen for load completion or errors.\n *\n * @private\n */\nIconImage.prototype.unlistenImage_ = function() {\n  this.imageListenerKeys_.forEach(unlistenByKey);\n  this.imageListenerKeys_ = null;\n};\nexport default IconImage;\n","/**\n * @module ol/style/IconImageCache\n */\nimport {asString} from '../color.js';\n\n/**\n * Singleton class. Available through {@link ol.style.iconImageCache}.\n * @constructor\n */\nconst IconImageCache = function() {\n\n  /**\n   * @type {Object.<string, ol.style.IconImage>}\n   * @private\n   */\n  this.cache_ = {};\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.cacheSize_ = 0;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.maxCacheSize_ = 32;\n};\n\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {ol.Color} color Color.\n * @return {string} Cache key.\n */\nfunction getKey(src, crossOrigin, color) {\n  const colorString = color ? asString(color) : 'null';\n  return crossOrigin + ':' + src + ':' + colorString;\n}\n\n\n/**\n * FIXME empty description for jsdoc\n */\nIconImageCache.prototype.clear = function() {\n  this.cache_ = {};\n  this.cacheSize_ = 0;\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\nIconImageCache.prototype.expire = function() {\n  if (this.cacheSize_ > this.maxCacheSize_) {\n    let i = 0;\n    for (const key in this.cache_) {\n      const iconImage = this.cache_[key];\n      if ((i++ & 3) === 0 && !iconImage.hasListener()) {\n        delete this.cache_[key];\n        --this.cacheSize_;\n      }\n    }\n  }\n};\n\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {ol.Color} color Color.\n * @return {ol.style.IconImage} Icon image.\n */\nIconImageCache.prototype.get = function(src, crossOrigin, color) {\n  const key = getKey(src, crossOrigin, color);\n  return key in this.cache_ ? this.cache_[key] : null;\n};\n\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {ol.Color} color Color.\n * @param {ol.style.IconImage} iconImage Icon image.\n */\nIconImageCache.prototype.set = function(src, crossOrigin, color, iconImage) {\n  const key = getKey(src, crossOrigin, color);\n  this.cache_[key] = iconImage;\n  ++this.cacheSize_;\n};\n\n\n/**\n * Set the cache size of the icon cache. Default is `32`. Change this value when\n * your map uses more than 32 different icon images and you are not caching icon\n * styles on the application level.\n * @param {number} maxCacheSize Cache max size.\n * @api\n */\nIconImageCache.prototype.setSize = function(maxCacheSize) {\n  this.maxCacheSize_ = maxCacheSize;\n  this.expire();\n};\nexport default IconImageCache;\n","/**\n * @module ol/style/IconOrigin\n */\n\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/style/Image\n */\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link ol.style.Icon}, {@link ol.style.Circle} and\n * {@link ol.style.RegularShape}.\n *\n * @constructor\n * @abstract\n * @param {ol.StyleImageOptions} options Options.\n * @api\n */\nconst ImageStyle = function(options) {\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.opacity_ = options.opacity;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.rotateWithView_ = options.rotateWithView;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.rotation_ = options.rotation;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.scale_ = options.scale;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.snapToPixel_ = options.snapToPixel;\n\n};\n\n\n/**\n * Get the symbolizer opacity.\n * @return {number} Opacity.\n * @api\n */\nImageStyle.prototype.getOpacity = function() {\n  return this.opacity_;\n};\n\n\n/**\n * Determine whether the symbolizer rotates with the map.\n * @return {boolean} Rotate with map.\n * @api\n */\nImageStyle.prototype.getRotateWithView = function() {\n  return this.rotateWithView_;\n};\n\n\n/**\n * Get the symoblizer rotation.\n * @return {number} Rotation.\n * @api\n */\nImageStyle.prototype.getRotation = function() {\n  return this.rotation_;\n};\n\n\n/**\n * Get the symbolizer scale.\n * @return {number} Scale.\n * @api\n */\nImageStyle.prototype.getScale = function() {\n  return this.scale_;\n};\n\n\n/**\n * Determine whether the symbolizer should be snapped to a pixel.\n * @return {boolean} The symbolizer should snap to a pixel.\n * @api\n */\nImageStyle.prototype.getSnapToPixel = function() {\n  return this.snapToPixel_;\n};\n\n\n/**\n * Get the anchor point in pixels. The anchor determines the center point for the\n * symbolizer.\n * @abstract\n * @return {Array.<number>} Anchor.\n */\nImageStyle.prototype.getAnchor = function() {};\n\n\n/**\n * Get the image element for the symbolizer.\n * @abstract\n * @param {number} pixelRatio Pixel ratio.\n * @return {HTMLCanvasElement|HTMLVideoElement|Image} Image element.\n */\nImageStyle.prototype.getImage = function(pixelRatio) {};\n\n\n/**\n * @abstract\n * @param {number} pixelRatio Pixel ratio.\n * @return {HTMLCanvasElement|HTMLVideoElement|Image} Image element.\n */\nImageStyle.prototype.getHitDetectionImage = function(pixelRatio) {};\n\n\n/**\n * @abstract\n * @return {ol.ImageState} Image state.\n */\nImageStyle.prototype.getImageState = function() {};\n\n\n/**\n * @abstract\n * @return {ol.Size} Image size.\n */\nImageStyle.prototype.getImageSize = function() {};\n\n\n/**\n * @abstract\n * @return {ol.Size} Size of the hit-detection image.\n */\nImageStyle.prototype.getHitDetectionImageSize = function() {};\n\n\n/**\n * Get the origin of the symbolizer.\n * @abstract\n * @return {Array.<number>} Origin.\n */\nImageStyle.prototype.getOrigin = function() {};\n\n\n/**\n * Get the size of the symbolizer (in pixels).\n * @abstract\n * @return {ol.Size} Size.\n */\nImageStyle.prototype.getSize = function() {};\n\n\n/**\n * Set the opacity.\n *\n * @param {number} opacity Opacity.\n * @api\n */\nImageStyle.prototype.setOpacity = function(opacity) {\n  this.opacity_ = opacity;\n};\n\n\n/**\n * Set whether to rotate the style with the view.\n *\n * @param {boolean} rotateWithView Rotate with map.\n */\nImageStyle.prototype.setRotateWithView = function(rotateWithView) {\n  this.rotateWithView_ = rotateWithView;\n};\n\n\n/**\n * Set the rotation.\n *\n * @param {number} rotation Rotation.\n * @api\n */\nImageStyle.prototype.setRotation = function(rotation) {\n  this.rotation_ = rotation;\n};\n\n\n/**\n * Set the scale.\n *\n * @param {number} scale Scale.\n * @api\n */\nImageStyle.prototype.setScale = function(scale) {\n  this.scale_ = scale;\n};\n\n\n/**\n * Set whether to snap the image to the closest pixel.\n *\n * @param {boolean} snapToPixel Snap to pixel?\n */\nImageStyle.prototype.setSnapToPixel = function(snapToPixel) {\n  this.snapToPixel_ = snapToPixel;\n};\n\n\n/**\n * @abstract\n * @param {function(this: T, ol.events.Event)} listener Listener function.\n * @param {T} thisArg Value to use as `this` when executing `listener`.\n * @return {ol.EventsKey|undefined} Listener key.\n * @template T\n */\nImageStyle.prototype.listenImageChange = function(listener, thisArg) {};\n\n\n/**\n * Load not yet loaded URI.\n * @abstract\n */\nImageStyle.prototype.load = function() {};\n\n\n/**\n * @abstract\n * @param {function(this: T, ol.events.Event)} listener Listener function.\n * @param {T} thisArg Value to use as `this` when executing `listener`.\n * @template T\n */\nImageStyle.prototype.unlistenImageChange = function(listener, thisArg) {};\nexport default ImageStyle;\n","/**\n * @module ol/style/RegularShape\n */\nimport {inherits} from '../index.js';\nimport {asColorLike} from '../colorlike.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {CANVAS_LINE_DASH} from '../has.js';\nimport ImageState from '../ImageState.js';\nimport {defaultStrokeStyle, defaultFillStyle, defaultLineCap, defaultLineWidth, defaultLineJoin, defaultMiterLimit} from '../render/canvas.js';\nimport ImageStyle from '../style/Image.js';\n\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n *\n * @constructor\n * @param {olx.style.RegularShapeOptions} options Options.\n * @extends {ol.style.Image}\n * @api\n */\nconst RegularShape = function(options) {\n  /**\n   * @private\n   * @type {Array.<string>}\n   */\n  this.checksums_ = null;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = null;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.hitDetectionCanvas_ = null;\n\n  /**\n   * @private\n   * @type {ol.style.Fill}\n   */\n  this.fill_ = options.fill !== undefined ? options.fill : null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.origin_ = [0, 0];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.points_ = options.points;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.radius_ = /** @type {number} */ (options.radius !== undefined ?\n    options.radius : options.radius1);\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.radius2_ = options.radius2;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.angle_ = options.angle !== undefined ? options.angle : 0;\n\n  /**\n   * @private\n   * @type {ol.style.Stroke}\n   */\n  this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.anchor_ = null;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.size_ = null;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.imageSize_ = null;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.hitDetectionImageSize_ = null;\n\n  /**\n   * @protected\n   * @type {ol.style.AtlasManager|undefined}\n   */\n  this.atlasManager_ = options.atlasManager;\n\n  this.render_(this.atlasManager_);\n\n  /**\n   * @type {boolean}\n   */\n  const snapToPixel = options.snapToPixel !== undefined ?\n    options.snapToPixel : true;\n\n  /**\n   * @type {boolean}\n   */\n  const rotateWithView = options.rotateWithView !== undefined ?\n    options.rotateWithView : false;\n\n  ImageStyle.call(this, {\n    opacity: 1,\n    rotateWithView: rotateWithView,\n    rotation: options.rotation !== undefined ? options.rotation : 0,\n    scale: 1,\n    snapToPixel: snapToPixel\n  });\n};\n\ninherits(RegularShape, ImageStyle);\n\n\n/**\n * Clones the style. If an atlasmanager was provided to the original style it will be used in the cloned style, too.\n * @return {ol.style.RegularShape} The cloned style.\n * @api\n */\nRegularShape.prototype.clone = function() {\n  const style = new RegularShape({\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    points: this.getPoints(),\n    radius: this.getRadius(),\n    radius2: this.getRadius2(),\n    angle: this.getAngle(),\n    snapToPixel: this.getSnapToPixel(),\n    stroke: this.getStroke() ?  this.getStroke().clone() : undefined,\n    rotation: this.getRotation(),\n    rotateWithView: this.getRotateWithView(),\n    atlasManager: this.atlasManager_\n  });\n  style.setOpacity(this.getOpacity());\n  style.setScale(this.getScale());\n  return style;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nRegularShape.prototype.getAnchor = function() {\n  return this.anchor_;\n};\n\n\n/**\n * Get the angle used in generating the shape.\n * @return {number} Shape's rotation in radians.\n * @api\n */\nRegularShape.prototype.getAngle = function() {\n  return this.angle_;\n};\n\n\n/**\n * Get the fill style for the shape.\n * @return {ol.style.Fill} Fill style.\n * @api\n */\nRegularShape.prototype.getFill = function() {\n  return this.fill_;\n};\n\n\n/**\n * @inheritDoc\n */\nRegularShape.prototype.getHitDetectionImage = function(pixelRatio) {\n  return this.hitDetectionCanvas_;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nRegularShape.prototype.getImage = function(pixelRatio) {\n  return this.canvas_;\n};\n\n\n/**\n * @inheritDoc\n */\nRegularShape.prototype.getImageSize = function() {\n  return this.imageSize_;\n};\n\n\n/**\n * @inheritDoc\n */\nRegularShape.prototype.getHitDetectionImageSize = function() {\n  return this.hitDetectionImageSize_;\n};\n\n\n/**\n * @inheritDoc\n */\nRegularShape.prototype.getImageState = function() {\n  return ImageState.LOADED;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nRegularShape.prototype.getOrigin = function() {\n  return this.origin_;\n};\n\n\n/**\n * Get the number of points for generating the shape.\n * @return {number} Number of points for stars and regular polygons.\n * @api\n */\nRegularShape.prototype.getPoints = function() {\n  return this.points_;\n};\n\n\n/**\n * Get the (primary) radius for the shape.\n * @return {number} Radius.\n * @api\n */\nRegularShape.prototype.getRadius = function() {\n  return this.radius_;\n};\n\n\n/**\n * Get the secondary radius for the shape.\n * @return {number|undefined} Radius2.\n * @api\n */\nRegularShape.prototype.getRadius2 = function() {\n  return this.radius2_;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nRegularShape.prototype.getSize = function() {\n  return this.size_;\n};\n\n\n/**\n * Get the stroke style for the shape.\n * @return {ol.style.Stroke} Stroke style.\n * @api\n */\nRegularShape.prototype.getStroke = function() {\n  return this.stroke_;\n};\n\n\n/**\n * @inheritDoc\n */\nRegularShape.prototype.listenImageChange = function(listener, thisArg) {};\n\n\n/**\n * @inheritDoc\n */\nRegularShape.prototype.load = function() {};\n\n\n/**\n * @inheritDoc\n */\nRegularShape.prototype.unlistenImageChange = function(listener, thisArg) {};\n\n\n/**\n * @protected\n * @param {ol.style.AtlasManager|undefined} atlasManager An atlas manager.\n */\nRegularShape.prototype.render_ = function(atlasManager) {\n  let imageSize;\n  let lineCap = '';\n  let lineJoin = '';\n  let miterLimit = 0;\n  let lineDash = null;\n  let lineDashOffset = 0;\n  let strokeStyle;\n  let strokeWidth = 0;\n\n  if (this.stroke_) {\n    strokeStyle = this.stroke_.getColor();\n    if (strokeStyle === null) {\n      strokeStyle = defaultStrokeStyle;\n    }\n    strokeStyle = asColorLike(strokeStyle);\n    strokeWidth = this.stroke_.getWidth();\n    if (strokeWidth === undefined) {\n      strokeWidth = defaultLineWidth;\n    }\n    lineDash = this.stroke_.getLineDash();\n    lineDashOffset = this.stroke_.getLineDashOffset();\n    if (!CANVAS_LINE_DASH) {\n      lineDash = null;\n      lineDashOffset = 0;\n    }\n    lineJoin = this.stroke_.getLineJoin();\n    if (lineJoin === undefined) {\n      lineJoin = defaultLineJoin;\n    }\n    lineCap = this.stroke_.getLineCap();\n    if (lineCap === undefined) {\n      lineCap = defaultLineCap;\n    }\n    miterLimit = this.stroke_.getMiterLimit();\n    if (miterLimit === undefined) {\n      miterLimit = defaultMiterLimit;\n    }\n  }\n\n  let size = 2 * (this.radius_ + strokeWidth) + 1;\n\n  /** @type {ol.RegularShapeRenderOptions} */\n  const renderOptions = {\n    strokeStyle: strokeStyle,\n    strokeWidth: strokeWidth,\n    size: size,\n    lineCap: lineCap,\n    lineDash: lineDash,\n    lineDashOffset: lineDashOffset,\n    lineJoin: lineJoin,\n    miterLimit: miterLimit\n  };\n\n  if (atlasManager === undefined) {\n    // no atlas manager is used, create a new canvas\n    const context = createCanvasContext2D(size, size);\n    this.canvas_ = context.canvas;\n\n    // canvas.width and height are rounded to the closest integer\n    size = this.canvas_.width;\n    imageSize = size;\n\n    this.draw_(renderOptions, context, 0, 0);\n\n    this.createHitDetectionCanvas_(renderOptions);\n  } else {\n    // an atlas manager is used, add the symbol to an atlas\n    size = Math.round(size);\n\n    const hasCustomHitDetectionImage = !this.fill_;\n    let renderHitDetectionCallback;\n    if (hasCustomHitDetectionImage) {\n      // render the hit-detection image into a separate atlas image\n      renderHitDetectionCallback =\n          this.drawHitDetectionCanvas_.bind(this, renderOptions);\n    }\n\n    const id = this.getChecksum();\n    const info = atlasManager.add(\n      id, size, size, this.draw_.bind(this, renderOptions),\n      renderHitDetectionCallback);\n\n    this.canvas_ = info.image;\n    this.origin_ = [info.offsetX, info.offsetY];\n    imageSize = info.image.width;\n\n    if (hasCustomHitDetectionImage) {\n      this.hitDetectionCanvas_ = info.hitImage;\n      this.hitDetectionImageSize_ =\n          [info.hitImage.width, info.hitImage.height];\n    } else {\n      this.hitDetectionCanvas_ = this.canvas_;\n      this.hitDetectionImageSize_ = [imageSize, imageSize];\n    }\n  }\n\n  this.anchor_ = [size / 2, size / 2];\n  this.size_ = [size, size];\n  this.imageSize_ = [imageSize, imageSize];\n};\n\n\n/**\n * @private\n * @param {ol.RegularShapeRenderOptions} renderOptions Render options.\n * @param {CanvasRenderingContext2D} context The rendering context.\n * @param {number} x The origin for the symbol (x).\n * @param {number} y The origin for the symbol (y).\n */\nRegularShape.prototype.draw_ = function(renderOptions, context, x, y) {\n  let i, angle0, radiusC;\n  // reset transform\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // then move to (x, y)\n  context.translate(x, y);\n\n  context.beginPath();\n\n  let points = this.points_;\n  if (points === Infinity) {\n    context.arc(\n      renderOptions.size / 2, renderOptions.size / 2,\n      this.radius_, 0, 2 * Math.PI, true);\n  } else {\n    const radius2 = (this.radius2_ !== undefined) ? this.radius2_\n      : this.radius_;\n    if (radius2 !== this.radius_) {\n      points = 2 * points;\n    }\n    for (i = 0; i <= points; i++) {\n      angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n      radiusC = i % 2 === 0 ? this.radius_ : radius2;\n      context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0),\n        renderOptions.size / 2 + radiusC * Math.sin(angle0));\n    }\n  }\n\n\n  if (this.fill_) {\n    let color = this.fill_.getColor();\n    if (color === null) {\n      color = defaultFillStyle;\n    }\n    context.fillStyle = asColorLike(color);\n    context.fill();\n  }\n  if (this.stroke_) {\n    context.strokeStyle = renderOptions.strokeStyle;\n    context.lineWidth = renderOptions.strokeWidth;\n    if (renderOptions.lineDash) {\n      context.setLineDash(renderOptions.lineDash);\n      context.lineDashOffset = renderOptions.lineDashOffset;\n    }\n    context.lineCap = renderOptions.lineCap;\n    context.lineJoin = renderOptions.lineJoin;\n    context.miterLimit = renderOptions.miterLimit;\n    context.stroke();\n  }\n  context.closePath();\n};\n\n\n/**\n * @private\n * @param {ol.RegularShapeRenderOptions} renderOptions Render options.\n */\nRegularShape.prototype.createHitDetectionCanvas_ = function(renderOptions) {\n  this.hitDetectionImageSize_ = [renderOptions.size, renderOptions.size];\n  if (this.fill_) {\n    this.hitDetectionCanvas_ = this.canvas_;\n    return;\n  }\n\n  // if no fill style is set, create an extra hit-detection image with a\n  // default fill style\n  const context = createCanvasContext2D(renderOptions.size, renderOptions.size);\n  this.hitDetectionCanvas_ = context.canvas;\n\n  this.drawHitDetectionCanvas_(renderOptions, context, 0, 0);\n};\n\n\n/**\n * @private\n * @param {ol.RegularShapeRenderOptions} renderOptions Render options.\n * @param {CanvasRenderingContext2D} context The context.\n * @param {number} x The origin for the symbol (x).\n * @param {number} y The origin for the symbol (y).\n */\nRegularShape.prototype.drawHitDetectionCanvas_ = function(renderOptions, context, x, y) {\n  // reset transform\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // then move to (x, y)\n  context.translate(x, y);\n\n  context.beginPath();\n\n  let points = this.points_;\n  if (points === Infinity) {\n    context.arc(\n      renderOptions.size / 2, renderOptions.size / 2,\n      this.radius_, 0, 2 * Math.PI, true);\n  } else {\n    const radius2 = (this.radius2_ !== undefined) ? this.radius2_\n      : this.radius_;\n    if (radius2 !== this.radius_) {\n      points = 2 * points;\n    }\n    let i, radiusC, angle0;\n    for (i = 0; i <= points; i++) {\n      angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n      radiusC = i % 2 === 0 ? this.radius_ : radius2;\n      context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0),\n        renderOptions.size / 2 + radiusC * Math.sin(angle0));\n    }\n  }\n\n  context.fillStyle = defaultFillStyle;\n  context.fill();\n  if (this.stroke_) {\n    context.strokeStyle = renderOptions.strokeStyle;\n    context.lineWidth = renderOptions.strokeWidth;\n    if (renderOptions.lineDash) {\n      context.setLineDash(renderOptions.lineDash);\n      context.lineDashOffset = renderOptions.lineDashOffset;\n    }\n    context.stroke();\n  }\n  context.closePath();\n};\n\n\n/**\n * @return {string} The checksum.\n */\nRegularShape.prototype.getChecksum = function() {\n  const strokeChecksum = this.stroke_ ?\n    this.stroke_.getChecksum() : '-';\n  const fillChecksum = this.fill_ ?\n    this.fill_.getChecksum() : '-';\n\n  const recalculate = !this.checksums_ ||\n      (strokeChecksum != this.checksums_[1] ||\n      fillChecksum != this.checksums_[2] ||\n      this.radius_ != this.checksums_[3] ||\n      this.radius2_ != this.checksums_[4] ||\n      this.angle_ != this.checksums_[5] ||\n      this.points_ != this.checksums_[6]);\n\n  if (recalculate) {\n    const checksum = 'r' + strokeChecksum + fillChecksum +\n        (this.radius_ !== undefined ? this.radius_.toString() : '-') +\n        (this.radius2_ !== undefined ? this.radius2_.toString() : '-') +\n        (this.angle_ !== undefined ? this.angle_.toString() : '-') +\n        (this.points_ !== undefined ? this.points_.toString() : '-');\n    this.checksums_ = [checksum, strokeChecksum, fillChecksum,\n      this.radius_, this.radius2_, this.angle_, this.points_];\n  }\n\n  return this.checksums_[0];\n};\nexport default RegularShape;\n","/**\n * @module ol/style/Stroke\n */\nimport {getUid} from '../index.js';\n\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n *\n * @constructor\n * @param {olx.style.StrokeOptions=} opt_options Options.\n * @api\n */\nconst Stroke = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {ol.Color|ol.ColorLike}\n   */\n  this.color_ = options.color !== undefined ? options.color : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.lineCap_ = options.lineCap;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.lineDashOffset_ = options.lineDashOffset;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.lineJoin_ = options.lineJoin;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.miterLimit_ = options.miterLimit;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.width_ = options.width;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Clones the style.\n * @return {ol.style.Stroke} The cloned style.\n * @api\n */\nStroke.prototype.clone = function() {\n  const color = this.getColor();\n  return new Stroke({\n    color: (color && color.slice) ? color.slice() : color || undefined,\n    lineCap: this.getLineCap(),\n    lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n    lineDashOffset: this.getLineDashOffset(),\n    lineJoin: this.getLineJoin(),\n    miterLimit: this.getMiterLimit(),\n    width: this.getWidth()\n  });\n};\n\n\n/**\n * Get the stroke color.\n * @return {ol.Color|ol.ColorLike} Color.\n * @api\n */\nStroke.prototype.getColor = function() {\n  return this.color_;\n};\n\n\n/**\n * Get the line cap type for the stroke.\n * @return {string|undefined} Line cap.\n * @api\n */\nStroke.prototype.getLineCap = function() {\n  return this.lineCap_;\n};\n\n\n/**\n * Get the line dash style for the stroke.\n * @return {Array.<number>} Line dash.\n * @api\n */\nStroke.prototype.getLineDash = function() {\n  return this.lineDash_;\n};\n\n\n/**\n * Get the line dash offset for the stroke.\n * @return {number|undefined} Line dash offset.\n * @api\n */\nStroke.prototype.getLineDashOffset = function() {\n  return this.lineDashOffset_;\n};\n\n\n/**\n * Get the line join type for the stroke.\n * @return {string|undefined} Line join.\n * @api\n */\nStroke.prototype.getLineJoin = function() {\n  return this.lineJoin_;\n};\n\n\n/**\n * Get the miter limit for the stroke.\n * @return {number|undefined} Miter limit.\n * @api\n */\nStroke.prototype.getMiterLimit = function() {\n  return this.miterLimit_;\n};\n\n\n/**\n * Get the stroke width.\n * @return {number|undefined} Width.\n * @api\n */\nStroke.prototype.getWidth = function() {\n  return this.width_;\n};\n\n\n/**\n * Set the color.\n *\n * @param {ol.Color|ol.ColorLike} color Color.\n * @api\n */\nStroke.prototype.setColor = function(color) {\n  this.color_ = color;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line cap.\n *\n * @param {string|undefined} lineCap Line cap.\n * @api\n */\nStroke.prototype.setLineCap = function(lineCap) {\n  this.lineCap_ = lineCap;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line dash.\n *\n * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n * property will have no visual effect in these browsers.\n *\n * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n *\n * @param {Array.<number>} lineDash Line dash.\n * @api\n */\nStroke.prototype.setLineDash = function(lineDash) {\n  this.lineDash_ = lineDash;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line dash offset.\n *\n * @param {number|undefined} lineDashOffset Line dash offset.\n * @api\n */\nStroke.prototype.setLineDashOffset = function(lineDashOffset) {\n  this.lineDashOffset_ = lineDashOffset;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line join.\n *\n * @param {string|undefined} lineJoin Line join.\n * @api\n */\nStroke.prototype.setLineJoin = function(lineJoin) {\n  this.lineJoin_ = lineJoin;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the miter limit.\n *\n * @param {number|undefined} miterLimit Miter limit.\n * @api\n */\nStroke.prototype.setMiterLimit = function(miterLimit) {\n  this.miterLimit_ = miterLimit;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the width.\n *\n * @param {number|undefined} width Width.\n * @api\n */\nStroke.prototype.setWidth = function(width) {\n  this.width_ = width;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * @return {string} The checksum.\n */\nStroke.prototype.getChecksum = function() {\n  if (this.checksum_ === undefined) {\n    this.checksum_ = 's';\n    if (this.color_) {\n      if (typeof this.color_ === 'string') {\n        this.checksum_ += this.color_;\n      } else {\n        this.checksum_ += getUid(this.color_).toString();\n      }\n    } else {\n      this.checksum_ += '-';\n    }\n    this.checksum_ += ',' +\n        (this.lineCap_ !== undefined ?\n          this.lineCap_.toString() : '-') + ',' +\n        (this.lineDash_ ?\n          this.lineDash_.toString() : '-') + ',' +\n        (this.lineDashOffset_ !== undefined ?\n          this.lineDashOffset_ : '-') + ',' +\n        (this.lineJoin_ !== undefined ?\n          this.lineJoin_ : '-') + ',' +\n        (this.miterLimit_ !== undefined ?\n          this.miterLimit_.toString() : '-') + ',' +\n        (this.width_ !== undefined ?\n          this.width_.toString() : '-');\n  }\n\n  return this.checksum_;\n};\nexport default Stroke;\n","/**\n * @module ol/style/TextPlacement\n */\n\n/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link ol.geom.LineString},\n * {@link ol.geom.Polygon}, {@link ol.geom.MultiLineString} or\n * {@link ol.geom.MultiPolygon}.\n * @enum {string}\n */\nexport default {\n  POINT: 'point',\n  LINE: 'line'\n};\n","/**\n * @module ol/style/Circle\n */\nimport {inherits} from '../index.js';\nimport RegularShape from '../style/RegularShape.js';\n\n/**\n * @classdesc\n * Set circle style for vector features.\n *\n * @constructor\n * @param {olx.style.CircleOptions=} opt_options Options.\n * @extends {ol.style.RegularShape}\n * @api\n */\nconst CircleStyle = function(opt_options) {\n\n  const options = opt_options || {};\n\n  RegularShape.call(this, {\n    points: Infinity,\n    fill: options.fill,\n    radius: options.radius,\n    snapToPixel: options.snapToPixel,\n    stroke: options.stroke,\n    atlasManager: options.atlasManager\n  });\n\n};\n\ninherits(CircleStyle, RegularShape);\n\n\n/**\n * Clones the style.  If an atlasmanager was provided to the original style it will be used in the cloned style, too.\n * @return {ol.style.Circle} The cloned style.\n * @override\n * @api\n */\nCircleStyle.prototype.clone = function() {\n  const style = new CircleStyle({\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n    radius: this.getRadius(),\n    snapToPixel: this.getSnapToPixel(),\n    atlasManager: this.atlasManager_\n  });\n  style.setOpacity(this.getOpacity());\n  style.setScale(this.getScale());\n  return style;\n};\n\n\n/**\n * Set the circle radius.\n *\n * @param {number} radius Circle radius.\n * @api\n */\nCircleStyle.prototype.setRadius = function(radius) {\n  this.radius_ = radius;\n  this.render_(this.atlasManager_);\n};\nexport default CircleStyle;\n","/**\n * @module ol/style/Fill\n */\nimport {getUid} from '../index.js';\nimport {asString} from '../color.js';\n\n/**\n * @classdesc\n * Set fill style for vector features.\n *\n * @constructor\n * @param {olx.style.FillOptions=} opt_options Options.\n * @api\n */\nconst Fill = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {ol.Color|ol.ColorLike}\n   */\n  this.color_ = options.color !== undefined ? options.color : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Clones the style. The color is not cloned if it is an {@link ol.ColorLike}.\n * @return {ol.style.Fill} The cloned style.\n * @api\n */\nFill.prototype.clone = function() {\n  const color = this.getColor();\n  return new Fill({\n    color: (color && color.slice) ? color.slice() : color || undefined\n  });\n};\n\n\n/**\n * Get the fill color.\n * @return {ol.Color|ol.ColorLike} Color.\n * @api\n */\nFill.prototype.getColor = function() {\n  return this.color_;\n};\n\n\n/**\n * Set the color.\n *\n * @param {ol.Color|ol.ColorLike} color Color.\n * @api\n */\nFill.prototype.setColor = function(color) {\n  this.color_ = color;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * @return {string} The checksum.\n */\nFill.prototype.getChecksum = function() {\n  if (this.checksum_ === undefined) {\n    if (\n      this.color_ instanceof CanvasPattern ||\n        this.color_ instanceof CanvasGradient\n    ) {\n      this.checksum_ = getUid(this.color_).toString();\n    } else {\n      this.checksum_ = 'f' + (this.color_ ? asString(this.color_) : '-');\n    }\n  }\n\n  return this.checksum_;\n};\nexport default Fill;\n","/**\n * @module ol/style/Icon\n */\nimport {getUid, inherits} from '../index.js';\nimport ImageState from '../ImageState.js';\nimport {assert} from '../asserts.js';\nimport {asArray} from '../color.js';\nimport {listen, unlisten} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport IconAnchorUnits from '../style/IconAnchorUnits.js';\nimport {get as getIconImage} from '../style/IconImage.js';\nimport IconOrigin from '../style/IconOrigin.js';\nimport ImageStyle from '../style/Image.js';\n\n/**\n * @classdesc\n * Set icon style for vector features.\n *\n * @constructor\n * @param {olx.style.IconOptions=} opt_options Options.\n * @extends {ol.style.Image}\n * @api\n */\nconst Icon = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.normalizedAnchor_ = null;\n\n  /**\n   * @private\n   * @type {ol.style.IconOrigin}\n   */\n  this.anchorOrigin_ = options.anchorOrigin !== undefined ?\n    options.anchorOrigin : IconOrigin.TOP_LEFT;\n\n  /**\n   * @private\n   * @type {ol.style.IconAnchorUnits}\n   */\n  this.anchorXUnits_ = options.anchorXUnits !== undefined ?\n    options.anchorXUnits : IconAnchorUnits.FRACTION;\n\n  /**\n   * @private\n   * @type {ol.style.IconAnchorUnits}\n   */\n  this.anchorYUnits_ = options.anchorYUnits !== undefined ?\n    options.anchorYUnits : IconAnchorUnits.FRACTION;\n\n  /**\n   * @private\n   * @type {?string}\n   */\n  this.crossOrigin_ =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n  /**\n   * @type {Image|HTMLCanvasElement}\n   */\n  const image = options.img !== undefined ? options.img : null;\n\n  /**\n   * @type {ol.Size}\n   */\n  const imgSize = options.imgSize !== undefined ? options.imgSize : null;\n\n  /**\n   * @type {string|undefined}\n   */\n  let src = options.src;\n\n  assert(!(src !== undefined && image),\n    4); // `image` and `src` cannot be provided at the same time\n  assert(!image || (image && imgSize),\n    5); // `imgSize` must be set when `image` is provided\n\n  if ((src === undefined || src.length === 0) && image) {\n    src = image.src || getUid(image).toString();\n  }\n  assert(src !== undefined && src.length > 0,\n    6); // A defined and non-empty `src` or `image` must be provided\n\n  /**\n   * @type {ol.ImageState}\n   */\n  const imageState = options.src !== undefined ?\n    ImageState.IDLE : ImageState.LOADED;\n\n  /**\n   * @private\n   * @type {ol.Color}\n   */\n  this.color_ = options.color !== undefined ? asArray(options.color) : null;\n\n  /**\n   * @private\n   * @type {ol.style.IconImage}\n   */\n  this.iconImage_ = getIconImage(\n    image, /** @type {string} */ (src), imgSize, this.crossOrigin_, imageState, this.color_);\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n\n  /**\n   * @private\n   * @type {ol.style.IconOrigin}\n   */\n  this.offsetOrigin_ = options.offsetOrigin !== undefined ?\n    options.offsetOrigin : IconOrigin.TOP_LEFT;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.origin_ = null;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.size_ = options.size !== undefined ? options.size : null;\n\n  /**\n   * @type {number}\n   */\n  const opacity = options.opacity !== undefined ? options.opacity : 1;\n\n  /**\n   * @type {boolean}\n   */\n  const rotateWithView = options.rotateWithView !== undefined ?\n    options.rotateWithView : false;\n\n  /**\n   * @type {number}\n   */\n  const rotation = options.rotation !== undefined ? options.rotation : 0;\n\n  /**\n   * @type {number}\n   */\n  const scale = options.scale !== undefined ? options.scale : 1;\n\n  /**\n   * @type {boolean}\n   */\n  const snapToPixel = options.snapToPixel !== undefined ?\n    options.snapToPixel : true;\n\n  ImageStyle.call(this, {\n    opacity: opacity,\n    rotation: rotation,\n    scale: scale,\n    snapToPixel: snapToPixel,\n    rotateWithView: rotateWithView\n  });\n\n};\n\ninherits(Icon, ImageStyle);\n\n\n/**\n * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n * @return {ol.style.Icon} The cloned style.\n * @api\n */\nIcon.prototype.clone = function() {\n  return new Icon({\n    anchor: this.anchor_.slice(),\n    anchorOrigin: this.anchorOrigin_,\n    anchorXUnits: this.anchorXUnits_,\n    anchorYUnits: this.anchorYUnits_,\n    crossOrigin: this.crossOrigin_,\n    color: (this.color_ && this.color_.slice) ? this.color_.slice() : this.color_ || undefined,\n    src: this.getSrc(),\n    offset: this.offset_.slice(),\n    offsetOrigin: this.offsetOrigin_,\n    size: this.size_ !== null ? this.size_.slice() : undefined,\n    opacity: this.getOpacity(),\n    scale: this.getScale(),\n    snapToPixel: this.getSnapToPixel(),\n    rotation: this.getRotation(),\n    rotateWithView: this.getRotateWithView()\n  });\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nIcon.prototype.getAnchor = function() {\n  if (this.normalizedAnchor_) {\n    return this.normalizedAnchor_;\n  }\n  let anchor = this.anchor_;\n  const size = this.getSize();\n  if (this.anchorXUnits_ == IconAnchorUnits.FRACTION ||\n      this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n    if (!size) {\n      return null;\n    }\n    anchor = this.anchor_.slice();\n    if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\n      anchor[0] *= size[0];\n    }\n    if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n      anchor[1] *= size[1];\n    }\n  }\n\n  if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\n    if (!size) {\n      return null;\n    }\n    if (anchor === this.anchor_) {\n      anchor = this.anchor_.slice();\n    }\n    if (this.anchorOrigin_ == IconOrigin.TOP_RIGHT ||\n        this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n      anchor[0] = -anchor[0] + size[0];\n    }\n    if (this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT ||\n        this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n      anchor[1] = -anchor[1] + size[1];\n    }\n  }\n  this.normalizedAnchor_ = anchor;\n  return this.normalizedAnchor_;\n};\n\n\n/**\n * Get the icon color.\n * @return {ol.Color} Color.\n * @api\n */\nIcon.prototype.getColor = function() {\n  return this.color_;\n};\n\n\n/**\n * Get the image icon.\n * @param {number} pixelRatio Pixel ratio.\n * @return {Image|HTMLCanvasElement} Image or Canvas element.\n * @override\n * @api\n */\nIcon.prototype.getImage = function(pixelRatio) {\n  return this.iconImage_.getImage(pixelRatio);\n};\n\n\n/**\n * @override\n */\nIcon.prototype.getImageSize = function() {\n  return this.iconImage_.getSize();\n};\n\n\n/**\n * @override\n */\nIcon.prototype.getHitDetectionImageSize = function() {\n  return this.getImageSize();\n};\n\n\n/**\n * @override\n */\nIcon.prototype.getImageState = function() {\n  return this.iconImage_.getImageState();\n};\n\n\n/**\n * @override\n */\nIcon.prototype.getHitDetectionImage = function(pixelRatio) {\n  return this.iconImage_.getHitDetectionImage(pixelRatio);\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nIcon.prototype.getOrigin = function() {\n  if (this.origin_) {\n    return this.origin_;\n  }\n  let offset = this.offset_;\n\n  if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\n    const size = this.getSize();\n    const iconImageSize = this.iconImage_.getSize();\n    if (!size || !iconImageSize) {\n      return null;\n    }\n    offset = offset.slice();\n    if (this.offsetOrigin_ == IconOrigin.TOP_RIGHT ||\n        this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n      offset[0] = iconImageSize[0] - size[0] - offset[0];\n    }\n    if (this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT ||\n        this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n      offset[1] = iconImageSize[1] - size[1] - offset[1];\n    }\n  }\n  this.origin_ = offset;\n  return this.origin_;\n};\n\n\n/**\n * Get the image URL.\n * @return {string|undefined} Image src.\n * @api\n */\nIcon.prototype.getSrc = function() {\n  return this.iconImage_.getSrc();\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nIcon.prototype.getSize = function() {\n  return !this.size_ ? this.iconImage_.getSize() : this.size_;\n};\n\n\n/**\n * @override\n */\nIcon.prototype.listenImageChange = function(listener, thisArg) {\n  return listen(this.iconImage_, EventType.CHANGE,\n    listener, thisArg);\n};\n\n\n/**\n * Load not yet loaded URI.\n * When rendering a feature with an icon style, the vector renderer will\n * automatically call this method. However, you might want to call this\n * method yourself for preloading or other purposes.\n * @override\n * @api\n */\nIcon.prototype.load = function() {\n  this.iconImage_.load();\n};\n\n\n/**\n * @override\n */\nIcon.prototype.unlistenImageChange = function(listener, thisArg) {\n  unlisten(this.iconImage_, EventType.CHANGE,\n    listener, thisArg);\n};\nexport default Icon;\n","/**\n * @module ol/style/Stroke\n */\nimport {getUid} from '../index.js';\n\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n *\n * @constructor\n * @param {olx.style.StrokeOptions=} opt_options Options.\n * @api\n */\nconst Stroke = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {ol.Color|ol.ColorLike}\n   */\n  this.color_ = options.color !== undefined ? options.color : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.lineCap_ = options.lineCap;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.lineDashOffset_ = options.lineDashOffset;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.lineJoin_ = options.lineJoin;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.miterLimit_ = options.miterLimit;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.width_ = options.width;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Clones the style.\n * @return {ol.style.Stroke} The cloned style.\n * @api\n */\nStroke.prototype.clone = function() {\n  const color = this.getColor();\n  return new Stroke({\n    color: (color && color.slice) ? color.slice() : color || undefined,\n    lineCap: this.getLineCap(),\n    lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n    lineDashOffset: this.getLineDashOffset(),\n    lineJoin: this.getLineJoin(),\n    miterLimit: this.getMiterLimit(),\n    width: this.getWidth()\n  });\n};\n\n\n/**\n * Get the stroke color.\n * @return {ol.Color|ol.ColorLike} Color.\n * @api\n */\nStroke.prototype.getColor = function() {\n  return this.color_;\n};\n\n\n/**\n * Get the line cap type for the stroke.\n * @return {string|undefined} Line cap.\n * @api\n */\nStroke.prototype.getLineCap = function() {\n  return this.lineCap_;\n};\n\n\n/**\n * Get the line dash style for the stroke.\n * @return {Array.<number>} Line dash.\n * @api\n */\nStroke.prototype.getLineDash = function() {\n  return this.lineDash_;\n};\n\n\n/**\n * Get the line dash offset for the stroke.\n * @return {number|undefined} Line dash offset.\n * @api\n */\nStroke.prototype.getLineDashOffset = function() {\n  return this.lineDashOffset_;\n};\n\n\n/**\n * Get the line join type for the stroke.\n * @return {string|undefined} Line join.\n * @api\n */\nStroke.prototype.getLineJoin = function() {\n  return this.lineJoin_;\n};\n\n\n/**\n * Get the miter limit for the stroke.\n * @return {number|undefined} Miter limit.\n * @api\n */\nStroke.prototype.getMiterLimit = function() {\n  return this.miterLimit_;\n};\n\n\n/**\n * Get the stroke width.\n * @return {number|undefined} Width.\n * @api\n */\nStroke.prototype.getWidth = function() {\n  return this.width_;\n};\n\n\n/**\n * Set the color.\n *\n * @param {ol.Color|ol.ColorLike} color Color.\n * @api\n */\nStroke.prototype.setColor = function(color) {\n  this.color_ = color;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line cap.\n *\n * @param {string|undefined} lineCap Line cap.\n * @api\n */\nStroke.prototype.setLineCap = function(lineCap) {\n  this.lineCap_ = lineCap;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line dash.\n *\n * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n * property will have no visual effect in these browsers.\n *\n * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n *\n * @param {Array.<number>} lineDash Line dash.\n * @api\n */\nStroke.prototype.setLineDash = function(lineDash) {\n  this.lineDash_ = lineDash;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line dash offset.\n *\n * @param {number|undefined} lineDashOffset Line dash offset.\n * @api\n */\nStroke.prototype.setLineDashOffset = function(lineDashOffset) {\n  this.lineDashOffset_ = lineDashOffset;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line join.\n *\n * @param {string|undefined} lineJoin Line join.\n * @api\n */\nStroke.prototype.setLineJoin = function(lineJoin) {\n  this.lineJoin_ = lineJoin;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the miter limit.\n *\n * @param {number|undefined} miterLimit Miter limit.\n * @api\n */\nStroke.prototype.setMiterLimit = function(miterLimit) {\n  this.miterLimit_ = miterLimit;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the width.\n *\n * @param {number|undefined} width Width.\n * @api\n */\nStroke.prototype.setWidth = function(width) {\n  this.width_ = width;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * @return {string} The checksum.\n */\nStroke.prototype.getChecksum = function() {\n  if (this.checksum_ === undefined) {\n    this.checksum_ = 's';\n    if (this.color_) {\n      if (typeof this.color_ === 'string') {\n        this.checksum_ += this.color_;\n      } else {\n        this.checksum_ += getUid(this.color_).toString();\n      }\n    } else {\n      this.checksum_ += '-';\n    }\n    this.checksum_ += ',' +\n        (this.lineCap_ !== undefined ?\n          this.lineCap_.toString() : '-') + ',' +\n        (this.lineDash_ ?\n          this.lineDash_.toString() : '-') + ',' +\n        (this.lineDashOffset_ !== undefined ?\n          this.lineDashOffset_ : '-') + ',' +\n        (this.lineJoin_ !== undefined ?\n          this.lineJoin_ : '-') + ',' +\n        (this.miterLimit_ !== undefined ?\n          this.miterLimit_.toString() : '-') + ',' +\n        (this.width_ !== undefined ?\n          this.width_.toString() : '-');\n  }\n\n  return this.checksum_;\n};\nexport default Stroke;\n","/**\n * @module ol/style/Style\n */\nimport {assert} from '../asserts.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport CircleStyle from '../style/Circle.js';\nimport Fill from '../style/Fill.js';\nimport Stroke from '../style/Stroke.js';\n\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n *\n * @constructor\n * @struct\n * @param {olx.style.StyleOptions=} opt_options Style options.\n * @api\n */\nconst Style = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {string|ol.geom.Geometry|ol.StyleGeometryFunction}\n   */\n  this.geometry_ = null;\n\n  /**\n   * @private\n   * @type {!ol.StyleGeometryFunction}\n   */\n  this.geometryFunction_ = defaultGeometryFunction;\n\n  if (options.geometry !== undefined) {\n    this.setGeometry(options.geometry);\n  }\n\n  /**\n   * @private\n   * @type {ol.style.Fill}\n   */\n  this.fill_ = options.fill !== undefined ? options.fill : null;\n\n  /**\n   * @private\n   * @type {ol.style.Image}\n   */\n  this.image_ = options.image !== undefined ? options.image : null;\n\n  /**\n   * @private\n   * @type {ol.StyleRenderFunction|null}\n   */\n  this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n\n  /**\n   * @private\n   * @type {ol.style.Stroke}\n   */\n  this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n  /**\n   * @private\n   * @type {ol.style.Text}\n   */\n  this.text_ = options.text !== undefined ? options.text : null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.zIndex_ = options.zIndex;\n\n};\n\n\n/**\n * Clones the style.\n * @return {ol.style.Style} The cloned style.\n * @api\n */\nStyle.prototype.clone = function() {\n  let geometry = this.getGeometry();\n  if (geometry && geometry.clone) {\n    geometry = geometry.clone();\n  }\n  return new Style({\n    geometry: geometry,\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    image: this.getImage() ? this.getImage().clone() : undefined,\n    stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n    text: this.getText() ? this.getText().clone() : undefined,\n    zIndex: this.getZIndex()\n  });\n};\n\n\n/**\n * Get the custom renderer function that was configured with\n * {@link #setRenderer} or the `renderer` constructor option.\n * @return {ol.StyleRenderFunction|null} Custom renderer function.\n * @api\n */\nStyle.prototype.getRenderer = function() {\n  return this.renderer_;\n};\n\n\n/**\n * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n * and `image` options of the style will be ignored.\n * @param {ol.StyleRenderFunction|null} renderer Custom renderer function.\n * @api\n */\nStyle.prototype.setRenderer = function(renderer) {\n  this.renderer_ = renderer;\n};\n\n\n/**\n * Get the geometry to be rendered.\n * @return {string|ol.geom.Geometry|ol.StyleGeometryFunction}\n * Feature property or geometry or function that returns the geometry that will\n * be rendered with this style.\n * @api\n */\nStyle.prototype.getGeometry = function() {\n  return this.geometry_;\n};\n\n\n/**\n * Get the function used to generate a geometry for rendering.\n * @return {!ol.StyleGeometryFunction} Function that is called with a feature\n * and returns the geometry to render instead of the feature's geometry.\n * @api\n */\nStyle.prototype.getGeometryFunction = function() {\n  return this.geometryFunction_;\n};\n\n\n/**\n * Get the fill style.\n * @return {ol.style.Fill} Fill style.\n * @api\n */\nStyle.prototype.getFill = function() {\n  return this.fill_;\n};\n\n\n/**\n * Set the fill style.\n * @param {ol.style.Fill} fill Fill style.\n * @api\n */\nStyle.prototype.setFill = function(fill) {\n  this.fill_ = fill;\n};\n\n\n/**\n * Get the image style.\n * @return {ol.style.Image} Image style.\n * @api\n */\nStyle.prototype.getImage = function() {\n  return this.image_;\n};\n\n\n/**\n * Set the image style.\n * @param {ol.style.Image} image Image style.\n * @api\n */\nStyle.prototype.setImage = function(image) {\n  this.image_ = image;\n};\n\n\n/**\n * Get the stroke style.\n * @return {ol.style.Stroke} Stroke style.\n * @api\n */\nStyle.prototype.getStroke = function() {\n  return this.stroke_;\n};\n\n\n/**\n * Set the stroke style.\n * @param {ol.style.Stroke} stroke Stroke style.\n * @api\n */\nStyle.prototype.setStroke = function(stroke) {\n  this.stroke_ = stroke;\n};\n\n\n/**\n * Get the text style.\n * @return {ol.style.Text} Text style.\n * @api\n */\nStyle.prototype.getText = function() {\n  return this.text_;\n};\n\n\n/**\n * Set the text style.\n * @param {ol.style.Text} text Text style.\n * @api\n */\nStyle.prototype.setText = function(text) {\n  this.text_ = text;\n};\n\n\n/**\n * Get the z-index for the style.\n * @return {number|undefined} ZIndex.\n * @api\n */\nStyle.prototype.getZIndex = function() {\n  return this.zIndex_;\n};\n\n\n/**\n * Set a geometry that is rendered instead of the feature's geometry.\n *\n * @param {string|ol.geom.Geometry|ol.StyleGeometryFunction} geometry\n *     Feature property or geometry or function returning a geometry to render\n *     for this style.\n * @api\n */\nStyle.prototype.setGeometry = function(geometry) {\n  if (typeof geometry === 'function') {\n    this.geometryFunction_ = geometry;\n  } else if (typeof geometry === 'string') {\n    this.geometryFunction_ = function(feature) {\n      return /** @type {ol.geom.Geometry} */ (feature.get(geometry));\n    };\n  } else if (!geometry) {\n    this.geometryFunction_ = defaultGeometryFunction;\n  } else if (geometry !== undefined) {\n    this.geometryFunction_ = function() {\n      return /** @type {ol.geom.Geometry} */ (geometry);\n    };\n  }\n  this.geometry_ = geometry;\n};\n\n\n/**\n * Set the z-index.\n *\n * @param {number|undefined} zIndex ZIndex.\n * @api\n */\nStyle.prototype.setZIndex = function(zIndex) {\n  this.zIndex_ = zIndex;\n};\n\n\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of ol.style.Style or single style objects wrapped in a\n * new style function.\n * @param {ol.StyleFunction|Array.<ol.style.Style>|ol.style.Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {ol.StyleFunction} A style function.\n */\nexport function toFunction(obj) {\n  let styleFunction;\n\n  if (typeof obj === 'function') {\n    styleFunction = obj;\n  } else {\n    /**\n     * @type {Array.<ol.style.Style>}\n     */\n    let styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      assert(obj instanceof Style,\n        41); // Expected an `ol.style.Style` or an array of `ol.style.Style`\n      styles = [obj];\n    }\n    styleFunction = function() {\n      return styles;\n    };\n  }\n  return styleFunction;\n}\n\n\n/**\n * @type {Array.<ol.style.Style>}\n */\nlet defaultStyles = null;\n\n\n/**\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array.<ol.style.Style>} Style.\n */\nexport function createDefaultStyle(feature, resolution) {\n  // We don't use an immediately-invoked function\n  // and a closure so we don't get an error at script evaluation time in\n  // browsers that do not support Canvas. (ol.style.Circle does\n  // canvas.getContext('2d') at construction time, which will cause an.error\n  // in such browsers.)\n  if (!defaultStyles) {\n    const fill = new Fill({\n      color: 'rgba(255,255,255,0.4)'\n    });\n    const stroke = new Stroke({\n      color: '#3399CC',\n      width: 1.25\n    });\n    defaultStyles = [\n      new Style({\n        image: new CircleStyle({\n          fill: fill,\n          stroke: stroke,\n          radius: 5\n        }),\n        fill: fill,\n        stroke: stroke\n      })\n    ];\n  }\n  return defaultStyles;\n}\n\n\n/**\n * Default styles for editing features.\n * @return {Object.<ol.geom.GeometryType, Array.<ol.style.Style>>} Styles\n */\nexport function createEditingStyle() {\n  /** @type {Object.<ol.geom.GeometryType, Array.<ol.style.Style>>} */\n  const styles = {};\n  const white = [255, 255, 255, 1];\n  const blue = [0, 153, 255, 1];\n  const width = 3;\n  styles[GeometryType.POLYGON] = [\n    new Style({\n      fill: new Fill({\n        color: [255, 255, 255, 0.5]\n      })\n    })\n  ];\n  styles[GeometryType.MULTI_POLYGON] =\n      styles[GeometryType.POLYGON];\n\n  styles[GeometryType.LINE_STRING] = [\n    new Style({\n      stroke: new Stroke({\n        color: white,\n        width: width + 2\n      })\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: blue,\n        width: width\n      })\n    })\n  ];\n  styles[GeometryType.MULTI_LINE_STRING] =\n      styles[GeometryType.LINE_STRING];\n\n  styles[GeometryType.CIRCLE] =\n      styles[GeometryType.POLYGON].concat(\n        styles[GeometryType.LINE_STRING]\n      );\n\n\n  styles[GeometryType.POINT] = [\n    new Style({\n      image: new CircleStyle({\n        radius: width * 2,\n        fill: new Fill({\n          color: blue\n        }),\n        stroke: new Stroke({\n          color: white,\n          width: width / 2\n        })\n      }),\n      zIndex: Infinity\n    })\n  ];\n  styles[GeometryType.MULTI_POINT] =\n      styles[GeometryType.POINT];\n\n  styles[GeometryType.GEOMETRY_COLLECTION] =\n      styles[GeometryType.POLYGON].concat(\n        styles[GeometryType.LINE_STRING],\n        styles[GeometryType.POINT]\n      );\n\n  return styles;\n}\n\n\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {ol.Feature|ol.render.Feature} feature Feature to get the geometry\n *     for.\n * @return {ol.geom.Geometry|ol.render.Feature|undefined} Geometry to render.\n */\nfunction defaultGeometryFunction(feature) {\n  return feature.getGeometry();\n}\n\nexport default Style;\n","/**\n * @module ol/style/Text\n */\nimport Fill from '../style/Fill.js';\nimport TextPlacement from '../style/TextPlacement.js';\n\n\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n */\nconst DEFAULT_FILL_COLOR = '#333';\n\n\n/**\n * @classdesc\n * Set text style for vector features.\n *\n * @constructor\n * @param {olx.style.TextOptions=} opt_options Options.\n * @api\n */\nconst Text = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.font_ = options.font;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.rotation_ = options.rotation;\n\n  /**\n   * @private\n   * @type {boolean|undefined}\n   */\n  this.rotateWithView_ = options.rotateWithView;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.scale_ = options.scale;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.text_ = options.text;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.textAlign_ = options.textAlign;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.textBaseline_ = options.textBaseline;\n\n  /**\n   * @private\n   * @type {ol.style.Fill}\n   */\n  this.fill_ = options.fill !== undefined ? options.fill :\n    new Fill({color: DEFAULT_FILL_COLOR});\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxAngle_ = options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n\n  /**\n   * @private\n   * @type {ol.style.TextPlacement|string}\n   */\n  this.placement_ = options.placement !== undefined ? options.placement : TextPlacement.POINT;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.overflow_ = !!options.overflow;\n\n  /**\n   * @private\n   * @type {ol.style.Stroke}\n   */\n  this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n\n  /**\n   * @private\n   * @type {ol.style.Fill}\n   */\n  this.backgroundFill_ = options.backgroundFill ? options.backgroundFill : null;\n\n  /**\n   * @private\n   * @type {ol.style.Stroke}\n   */\n  this.backgroundStroke_ = options.backgroundStroke ? options.backgroundStroke : null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.padding_ = options.padding === undefined ? null : options.padding;\n};\n\n\n/**\n * Clones the style.\n * @return {ol.style.Text} The cloned style.\n * @api\n */\nText.prototype.clone = function() {\n  return new Text({\n    font: this.getFont(),\n    placement: this.getPlacement(),\n    maxAngle: this.getMaxAngle(),\n    overflow: this.getOverflow(),\n    rotation: this.getRotation(),\n    rotateWithView: this.getRotateWithView(),\n    scale: this.getScale(),\n    text: this.getText(),\n    textAlign: this.getTextAlign(),\n    textBaseline: this.getTextBaseline(),\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n    offsetX: this.getOffsetX(),\n    offsetY: this.getOffsetY(),\n    backgroundFill: this.getBackgroundFill() ? this.getBackgroundFill().clone() : undefined,\n    backgroundStroke: this.getBackgroundStroke() ? this.getBackgroundStroke().clone() : undefined\n  });\n};\n\n\n/**\n * Get the `overflow` configuration.\n * @return {boolean} Let text overflow the length of the path they follow.\n * @api\n */\nText.prototype.getOverflow = function() {\n  return this.overflow_;\n};\n\n\n/**\n * Get the font name.\n * @return {string|undefined} Font.\n * @api\n */\nText.prototype.getFont = function() {\n  return this.font_;\n};\n\n\n/**\n * Get the maximum angle between adjacent characters.\n * @return {number} Angle in radians.\n * @api\n */\nText.prototype.getMaxAngle = function() {\n  return this.maxAngle_;\n};\n\n\n/**\n * Get the label placement.\n * @return {ol.style.TextPlacement|string} Text placement.\n * @api\n */\nText.prototype.getPlacement = function() {\n  return this.placement_;\n};\n\n\n/**\n * Get the x-offset for the text.\n * @return {number} Horizontal text offset.\n * @api\n */\nText.prototype.getOffsetX = function() {\n  return this.offsetX_;\n};\n\n\n/**\n * Get the y-offset for the text.\n * @return {number} Vertical text offset.\n * @api\n */\nText.prototype.getOffsetY = function() {\n  return this.offsetY_;\n};\n\n\n/**\n * Get the fill style for the text.\n * @return {ol.style.Fill} Fill style.\n * @api\n */\nText.prototype.getFill = function() {\n  return this.fill_;\n};\n\n\n/**\n * Determine whether the text rotates with the map.\n * @return {boolean|undefined} Rotate with map.\n * @api\n */\nText.prototype.getRotateWithView = function() {\n  return this.rotateWithView_;\n};\n\n\n/**\n * Get the text rotation.\n * @return {number|undefined} Rotation.\n * @api\n */\nText.prototype.getRotation = function() {\n  return this.rotation_;\n};\n\n\n/**\n * Get the text scale.\n * @return {number|undefined} Scale.\n * @api\n */\nText.prototype.getScale = function() {\n  return this.scale_;\n};\n\n\n/**\n * Get the stroke style for the text.\n * @return {ol.style.Stroke} Stroke style.\n * @api\n */\nText.prototype.getStroke = function() {\n  return this.stroke_;\n};\n\n\n/**\n * Get the text to be rendered.\n * @return {string|undefined} Text.\n * @api\n */\nText.prototype.getText = function() {\n  return this.text_;\n};\n\n\n/**\n * Get the text alignment.\n * @return {string|undefined} Text align.\n * @api\n */\nText.prototype.getTextAlign = function() {\n  return this.textAlign_;\n};\n\n\n/**\n * Get the text baseline.\n * @return {string|undefined} Text baseline.\n * @api\n */\nText.prototype.getTextBaseline = function() {\n  return this.textBaseline_;\n};\n\n\n/**\n * Get the background fill style for the text.\n * @return {ol.style.Fill} Fill style.\n * @api\n */\nText.prototype.getBackgroundFill = function() {\n  return this.backgroundFill_;\n};\n\n\n/**\n * Get the background stroke style for the text.\n * @return {ol.style.Stroke} Stroke style.\n * @api\n */\nText.prototype.getBackgroundStroke = function() {\n  return this.backgroundStroke_;\n};\n\n\n/**\n * Get the padding for the text.\n * @return {Array.<number>} Padding.\n * @api\n */\nText.prototype.getPadding = function() {\n  return this.padding_;\n};\n\n\n/**\n * Set the `overflow` property.\n *\n * @param {boolean} overflow Let text overflow the path that it follows.\n * @api\n */\nText.prototype.setOverflow = function(overflow) {\n  this.overflow_ = overflow;\n};\n\n\n/**\n * Set the font.\n *\n * @param {string|undefined} font Font.\n * @api\n */\nText.prototype.setFont = function(font) {\n  this.font_ = font;\n};\n\n\n/**\n * Set the maximum angle between adjacent characters.\n *\n * @param {number} maxAngle Angle in radians.\n * @api\n */\nText.prototype.setMaxAngle = function(maxAngle) {\n  this.maxAngle_ = maxAngle;\n};\n\n\n/**\n * Set the x offset.\n *\n * @param {number} offsetX Horizontal text offset.\n * @api\n */\nText.prototype.setOffsetX = function(offsetX) {\n  this.offsetX_ = offsetX;\n};\n\n\n/**\n * Set the y offset.\n *\n * @param {number} offsetY Vertical text offset.\n * @api\n */\nText.prototype.setOffsetY = function(offsetY) {\n  this.offsetY_ = offsetY;\n};\n\n\n/**\n * Set the text placement.\n *\n * @param {ol.style.TextPlacement|string} placement Placement.\n * @api\n */\nText.prototype.setPlacement = function(placement) {\n  this.placement_ = placement;\n};\n\n\n/**\n * Set the fill.\n *\n * @param {ol.style.Fill} fill Fill style.\n * @api\n */\nText.prototype.setFill = function(fill) {\n  this.fill_ = fill;\n};\n\n\n/**\n * Set the rotation.\n *\n * @param {number|undefined} rotation Rotation.\n * @api\n */\nText.prototype.setRotation = function(rotation) {\n  this.rotation_ = rotation;\n};\n\n\n/**\n * Set the scale.\n *\n * @param {number|undefined} scale Scale.\n * @api\n */\nText.prototype.setScale = function(scale) {\n  this.scale_ = scale;\n};\n\n\n/**\n * Set the stroke.\n *\n * @param {ol.style.Stroke} stroke Stroke style.\n * @api\n */\nText.prototype.setStroke = function(stroke) {\n  this.stroke_ = stroke;\n};\n\n\n/**\n * Set the text.\n *\n * @param {string|undefined} text Text.\n * @api\n */\nText.prototype.setText = function(text) {\n  this.text_ = text;\n};\n\n\n/**\n * Set the text alignment.\n *\n * @param {string|undefined} textAlign Text align.\n * @api\n */\nText.prototype.setTextAlign = function(textAlign) {\n  this.textAlign_ = textAlign;\n};\n\n\n/**\n * Set the text baseline.\n *\n * @param {string|undefined} textBaseline Text baseline.\n * @api\n */\nText.prototype.setTextBaseline = function(textBaseline) {\n  this.textBaseline_ = textBaseline;\n};\n\n\n/**\n * Set the background fill.\n *\n * @param {ol.style.Fill} fill Fill style.\n * @api\n */\nText.prototype.setBackgroundFill = function(fill) {\n  this.backgroundFill_ = fill;\n};\n\n\n/**\n * Set the background stroke.\n *\n * @param {ol.style.Stroke} stroke Stroke style.\n * @api\n */\nText.prototype.setBackgroundStroke = function(stroke) {\n  this.backgroundStroke_ = stroke;\n};\n\n\n/**\n * Set the padding (`[top, right, bottom, left]`).\n *\n * @param {!Array.<number>} padding Padding.\n * @api\n */\nText.prototype.setPadding = function(padding) {\n  this.padding_ = padding;\n};\nexport default Text;\n","/**\n * @module ol/transform\n */\nimport {assert} from './asserts.js';\n\n\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 3×3 matrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n\n\n/**\n * @private\n * @type {ol.Transform}\n */\nconst tmp_ = new Array(6);\n\n\n/**\n * Create an identity transform.\n * @return {!ol.Transform} Identity transform.\n */\nexport function create() {\n  return [1, 0, 0, 1, 0, 0];\n}\n\n\n/**\n * Resets the given transform to an identity transform.\n * @param {!ol.Transform} transform Transform.\n * @return {!ol.Transform} Transform.\n */\nexport function reset(transform) {\n  return set(transform, 1, 0, 0, 1, 0, 0);\n}\n\n\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!ol.Transform} transform1 Transform parameters of matrix 1.\n * @param {!ol.Transform} transform2 Transform parameters of matrix 2.\n * @return {!ol.Transform} transform1 multiplied with transform2.\n */\nexport function multiply(transform1, transform2) {\n  const a1 = transform1[0];\n  const b1 = transform1[1];\n  const c1 = transform1[2];\n  const d1 = transform1[3];\n  const e1 = transform1[4];\n  const f1 = transform1[5];\n  const a2 = transform2[0];\n  const b2 = transform2[1];\n  const c2 = transform2[2];\n  const d2 = transform2[3];\n  const e2 = transform2[4];\n  const f2 = transform2[5];\n\n  transform1[0] = a1 * a2 + c1 * b2;\n  transform1[1] = b1 * a2 + d1 * b2;\n  transform1[2] = a1 * c2 + c1 * d2;\n  transform1[3] = b1 * c2 + d1 * d2;\n  transform1[4] = a1 * e2 + c1 * f2 + e1;\n  transform1[5] = b1 * e2 + d1 * f2 + f1;\n\n  return transform1;\n}\n\n/**\n * Set the transform components a-f on a given transform.\n * @param {!ol.Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!ol.Transform} Matrix with transform applied.\n */\nexport function set(transform, a, b, c, d, e, f) {\n  transform[0] = a;\n  transform[1] = b;\n  transform[2] = c;\n  transform[3] = d;\n  transform[4] = e;\n  transform[5] = f;\n  return transform;\n}\n\n\n/**\n * Set transform on one matrix from another matrix.\n * @param {!ol.Transform} transform1 Matrix to set transform to.\n * @param {!ol.Transform} transform2 Matrix to set transform from.\n * @return {!ol.Transform} transform1 with transform from transform2 applied.\n */\nexport function setFromArray(transform1, transform2) {\n  transform1[0] = transform2[0];\n  transform1[1] = transform2[1];\n  transform1[2] = transform2[2];\n  transform1[3] = transform2[3];\n  transform1[4] = transform2[4];\n  transform1[5] = transform2[5];\n  return transform1;\n}\n\n\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {ol.Transform} transform The transformation.\n * @param {ol.Coordinate|ol.Pixel} coordinate The coordinate to transform.\n * @return {ol.Coordinate|ol.Pixel} return coordinate so that operations can be\n *     chained together.\n */\nexport function apply(transform, coordinate) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n  coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n  return coordinate;\n}\n\n\n/**\n * Applies rotation to the given transform.\n * @param {!ol.Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!ol.Transform} The rotated transform.\n */\nexport function rotate(transform, angle) {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  return multiply(transform, set(tmp_, cos, sin, -sin, cos, 0, 0));\n}\n\n\n/**\n * Applies scale to a given transform.\n * @param {!ol.Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!ol.Transform} The scaled transform.\n */\nexport function scale(transform, x, y) {\n  return multiply(transform, set(tmp_, x, 0, 0, y, 0, 0));\n}\n\n\n/**\n * Applies translation to the given transform.\n * @param {!ol.Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!ol.Transform} The translated transform.\n */\nexport function translate(transform, dx, dy) {\n  return multiply(transform, set(tmp_, 1, 0, 0, 1, dx, dy));\n}\n\n\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!ol.Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!ol.Transform} The composite transform.\n */\nexport function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n  const sin = Math.sin(angle);\n  const cos = Math.cos(angle);\n  transform[0] = sx * cos;\n  transform[1] = sy * sin;\n  transform[2] = -sx * sin;\n  transform[3] = sy * cos;\n  transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n  transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n  return transform;\n}\n\n\n/**\n * Invert the given transform.\n * @param {!ol.Transform} transform Transform.\n * @return {!ol.Transform} Inverse of the transform.\n */\nexport function invert(transform) {\n  const det = determinant(transform);\n  assert(det !== 0, 32); // Transformation matrix cannot be inverted\n\n  const a = transform[0];\n  const b = transform[1];\n  const c = transform[2];\n  const d = transform[3];\n  const e = transform[4];\n  const f = transform[5];\n\n  transform[0] = d / det;\n  transform[1] = -b / det;\n  transform[2] = -c / det;\n  transform[3] = a / det;\n  transform[4] = (c * f - d * e) / det;\n  transform[5] = -(a * f - b * e) / det;\n\n  return transform;\n}\n\n\n/**\n * Returns the determinant of the given matrix.\n * @param {!ol.Transform} mat Matrix.\n * @return {number} Determinant.\n */\nexport function determinant(mat) {\n  return mat[0] * mat[3] - mat[1] * mat[2];\n}\n"],"sourceRoot":""}